{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\src\\views\\login\\redirect.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\src\\views\\login\\redirect.vue","mtime":1678931188645},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\babel.config.js","mtime":1678931188406},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678931310818},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\babel-loader\\lib\\index.js","mtime":1678931314285},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678931310818},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\vue-loader\\lib\\index.js","mtime":1678931316857}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiQzovVXNlcnMvQWRtaW5pc3RyYXRvci9EZXNrdG9wL3R1YmVyY3Vsb3Npcy1mZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vcmVnZW5lcmF0b3JSdW50aW1lLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL0FkbWluaXN0cmF0b3IvRGVza3RvcC90dWJlcmN1bG9zaXMtZmUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwovLwovLwovLwovLwppbXBvcnQgeyBsb2dpbmJ5dGlja2V0LCBzc29hdXRodXJsIH0gZnJvbSAnQC9hcGkvU3NvJzsKaW1wb3J0IHJvdXRlciBmcm9tICdAL3JvdXRlcic7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHt9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIGlmICh0aGlzLiRyb3V0ZS5xdWVyeS50aWNrZXQpIHsKICAgICAgdGhpcy5nZXRUb2tlbih0aGlzLiRyb3V0ZS5xdWVyeS50aWNrZXQpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5nZXRzc29hdXRodXJsKCk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAvL+iOt+WPluWNleeCueeZu+W9leWcsOWdgAogICAgZ2V0c3NvYXV0aHVybDogZnVuY3Rpb24gZ2V0c3NvYXV0aHVybCgpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcmVzOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHNzb2F1dGh1cmwoewogICAgICAgICAgICAgICAgICBjbGllbnRMb2dpblVybDogcHJvY2Vzcy5lbnYuVlVFX0FQUF9SRURJUkVDVFVSTCArICdyZWRpcmVjdCcKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgd2luZG93Lm9wZW4ocmVzLlJlc3BvbnNlLCAnX3NlbGYnKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGdldFRva2VuOiBmdW5jdGlvbiBnZXRUb2tlbih0aWNrZXQpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGxvZ2luYnl0aWNrZXQoewogICAgICAgIHRpY2tldDogdGlja2V0CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgndXNlci9yZWRpcmVjdExvZ2luJywgcmVzKS50aGVuKGZ1bmN0aW9uIChyKSB7CiAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvJzsKICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIF90aGlzLiRtZXNzYWdlLmVycm9yKCLnmbvlvZXlpLHotKUs5Y2z5bCG6Lez6L2s55m75b2V6aG1Li4uIik7CgogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8gcm91dGVyLnB1c2goYC9sb2dpbmApOyAKICAgICAgICAgIC8vIHdpbmRvdy5vcGVuKCcvbG9naW4nLCAnX3NlbGYnKTsKICAgICAgICAgIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgndXNlci9sb2dvdXQnKTsKCiAgICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goIi9sb2dpbj9yZWRpcmVjdD0iLmNvbmNhdChfdGhpcy4kcm91dGUuZnVsbFBhdGgpKTsKICAgICAgICB9LCAxMDAwKTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;AAKA;AACA;AACA;EACAA,IADA,kBACA;IACA;EACA,CAHA;EAIAC,OAJA,qBAIA;IACA;MACA;IACA,CAFA,MAEA;MACA;IACA;EAEA,CAXA;EAYAC;IACA;IACAC,aAFA,2BAEA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACAC;kBAAAC;gBAAA,EADA;;cAAA;gBACAC,GADA;gBAEAC;;cAFA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAGA,CALA;IAMAC,QANA,oBAMAC,MANA,EAMA;MAAA;;MACAC;QAAAD;MAAA,GACAE,IADA,CACA;QACA,iDACAA,IADA,CACA;UACAJ;QACA,CAHA;MAIA,CANA,EAOAK,KAPA,CAOA;QACA;;QACAC;UACA;UACA;UAEA;;UACA;QACA,CANA,EAMA,IANA;MAOA,CAhBA;IAiBA;EAxBA;AAZA","names":["data","created","methods","getssoauthurl","ssoauthurl","clientLoginUrl","res","window","getToken","ticket","loginbyticket","then","catch","setTimeout"],"sourceRoot":"src/views/login","sources":["redirect.vue"],"sourcesContent":["<template>\r\n  <div class=\"content\">登陆中,请稍后...</div>\r\n</template>\r\n\r\n<script>\r\nimport { loginbyticket, ssoauthurl } from '@/api/Sso'\r\nimport router from '@/router';\r\nexport default {\r\n  data () {\r\n    return {}\r\n  },\r\n  created () {\r\n    if (this.$route.query.ticket) {\r\n      this.getToken(this.$route.query.ticket)\r\n    } else {\r\n      this.getssoauthurl()\r\n    }\r\n\r\n  },\r\n  methods: {\r\n    //获取单点登录地址\r\n    async getssoauthurl () {\r\n      let res = await ssoauthurl({ clientLoginUrl: process.env.VUE_APP_REDIRECTURL + 'redirect' })\r\n      window.open(res.Response, '_self');\r\n    },\r\n    getToken (ticket) {\r\n      loginbyticket({ ticket })\r\n        .then((res) => {\r\n          this.$store.dispatch('user/redirectLogin', res)\r\n            .then((r) => {\r\n              window.location.href = '/'\r\n            })\r\n        })\r\n        .catch((err) => {\r\n          this.$message.error(\"登录失败,即将跳转登录页...\")\r\n          setTimeout(() => {\r\n            // router.push(`/login`); \r\n            // window.open('/login', '_self');\r\n\r\n            this.$store.dispatch('user/logout')\r\n            this.$router.push(`/login?redirect=${this.$route.fullPath}`)\r\n          }, 1000);\r\n        })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.content {\r\n  user-select: none;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  line-height: 60vh;\r\n  background: #fff;\r\n  color: rgb(122, 90, 23);\r\n  font-size: 20px;\r\n  text-align: center;\r\n}\r\n</style>\r\n"]}]}