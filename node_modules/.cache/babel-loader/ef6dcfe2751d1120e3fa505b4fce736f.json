{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\src\\utils\\request.js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\src\\utils\\request.js","mtime":1678931188570},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\babel.config.js","mtime":1678931188406},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678931310818},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\babel-loader\\lib\\index.js","mtime":1678931314285},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\eslint-loader\\index.js","mtime":1678931311328}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgeyBNZXNzYWdlQm94LCBNZXNzYWdlIH0gZnJvbSAnZWxlbWVudC11aSc7CmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJzsKaW1wb3J0IHsgZ2V0VG9rZW4sIGdldExvZ2luSW5mbyB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7CmltcG9ydCB7IGlzVG9rZW5FeHBpcmVkIH0gZnJvbSAnQC91dGlscy9pbmRleCc7CmltcG9ydCAkVVJMIGZyb20gIkAvYXNzZXRzL2pzL3JlcXVlc3RVcmwiOyAvL+ivt+axguaTjeS9nOato+W4uGNvZGXvvIzmlK/mjIFTdHJpbmfjgIFBcnJheeOAgWludOWkmuenjeexu+Weiyzpobnnm67kuK3lkozlkI7nq6/mj5DliY3ljY/llYblpb3vvIzlrprkuYnlk6rkupvnirbmgIHnoIHkuLpzdWNjZXNzCgp2YXIgc3VjY2Vzc0NvZGUgPSBbMjAwLCAyMDEsIDIwNCwgMF07IC8v5Yib5bu65LiA5LiqYXhpb3Plrp7kvosKCnZhciBzZXJ2aWNlID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiBwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfQVBJLAogIC8vJy8nLCAKICB0aW1lb3V0OiA2MDAwMCwKICAvLyDor7fmsYLotoXml7YKICBoZWFkZXJzOiB7CiAgICAnQ29udGVudC1UeXBlJzogImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOCIsCiAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXInICsgJyAnICsgZ2V0VG9rZW4oKQogIH0KfSk7CndpbmRvdy5pc1JlZnJlc2hpbmcgPSBmYWxzZTsgLy/mmK/lkKbmnInor7fmsYLmraPlnKjliLfmlrB0b2tlbgoKdmFyIHJlZnJlc2hTdWJzY3JpYmVycyA9IFtdOyAvL+iiq+aMgui1t+eahOivt+axguaVsOe7hAoKLypwdXNo5omA5pyJ6K+35rGC5Yiw5pWw57uE5LitKi8KCmZ1bmN0aW9uIHN1YnNjcmliZVRva2VuUmVmcmVzaChjYikgewogIHJlZnJlc2hTdWJzY3JpYmVycy5wdXNoKGNiKTsKfQovKuWIt+aWsOivt+axgu+8iHJlZnJlc2hTdWJzY3JpYmVyc+aVsOe7hOS4reeahOivt+axguW+l+WIsOaWsOeahHRva2Vu5LmL5ZCO5Lya6Ieq5omn6KGM77yM55So5paw55qEdG9rZW7ljrvor7fmsYLmlbDmja7vvIkqLwoKCmZ1bmN0aW9uIG9uUnJlZnJlc2hlZCh0b2tlbikgewogIHJlZnJlc2hTdWJzY3JpYmVycy5tYXAoZnVuY3Rpb24gKGNiKSB7CiAgICByZXR1cm4gY2IodG9rZW4pOwogIH0pOwp9IC8v6K+35rGC5oum5oiq5ZmoCi8vIHNlcnZpY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKAovLyAgIGNvbmZpZyA9PiB7Ci8vICAgICAvL+WIpOaWreaYr+WQpuW3sueZu+W9lQovLyAgICAgaWYgKHN0b3JlLmdldHRlcnMudG9rZW4pIHsKLy8gICAgICAgLy/lnKjor7fmsYLlpLTkuK3mt7vliqB0b2tlbuexu+WeiwovLyAgICAgICBjb25maWcuaGVhZGVycy5BdXRob3JpemF0aW9uID1nZXRMb2dpbkluZm8oKS50b2tlbl90eXBlKycgJytnZXRUb2tlbigpOwovLyAgICAgICAvL+iOt+WPlui/h+acn+aXtumXtAovLyAgICAgICBsZXQgZXhwaXJlZFRpbWU9Z2V0TG9naW5JbmZvKCkuZXhwaXJlZFRpbWU7Ci8vICAgICAgIC8vdG9rZW7mmK/lkKblsIbopoHov4fmnJ/miJblt7Lnu4/ov4fmnJ8KLy8gICAgICAgaWYgKGlzVG9rZW5FeHBpcmVkKGV4cGlyZWRUaW1lKSYmY29uZmlnLnVybC5pbmRleE9mKCRVUkwudXJscy5yZWZyZXNoVG9rZW4pID09PSAtMSkgewovLyAgICAgICAgIAovLyAgICAgICAgICAgLy/mmK/lkKbmraPlnKjliLfmlrAKLy8gICAgICAgICAgIGlmICghd2luZG93LmlzUmVmcmVzaGluZykgewovLyAgICAgICAgICAgICAvL+WwhuWIt+aWsHRva2Vu55qE5qCH5b+X572u5Li6dHJ1ZQovLyAgICAgICAgICAgICB3aW5kb3cuaXNSZWZyZXNoaW5nID0gdHJ1ZTsKLy8gICAgICAgICAgICAgLy/lj5HotbfliLfmlrB0b2tlbueahOivt+axggovLyAgICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgndXNlci9yZWZyZXNoVG9rZW4nKS50aGVuKHJlcyA9PiB7Ci8vICAgICAgICAgICAgICAgLy/lsIbmoIflv5fnva7kuLpmYWxzZQovLyAgICAgICAgICAgICAgIHdpbmRvdy5pc1JlZnJlc2hpbmcgPSBmYWxzZTsKLy8gICAgICAgICAgICAgICAvL+aIkOWKn+WIt+aWsHRva2VuCi8vICAgICAgICAgICAgICAgY29uZmlnLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9IHJlcy50b2tlbl9UeXBlICsgJyAnICsgcmVzLnRva2VuICAgICAgICAgIAovLyAgICAgICAgICAgICAgIC8v5omn6KGM5pWw57uE6YeM55qE5Ye95pWwLOmHjeaWsOWPkei1t+iiq+aMgui1t+eahOivt+axggovLyAgICAgICAgICAgICAgIHZhciByZXMgPXsKLy8gICAgICAgICAgICAgICAgIHRva2VuOjE2NDc4MjU5NzM5MzgKLy8gICAgICAgICAgICAgICB9Ci8vICAgICAgICAgICAgICAgb25ScmVmcmVzaGVkKHJlcy50b2tlbik7Ci8vICAgICAgICAgICAgICAgLy/miafooYxvblJlZnJlc2hlZOWHveaVsOWQjua4heepuuaVsOe7hOS4reS/neWtmOeahOivt+axggovLyAgICAgICAgICAgICAgIHJlZnJlc2hTdWJzY3JpYmVycyA9IFtdOwovLyAgICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4gewovLyAgICAgICAgICAgICAgIC8v5Yi35pawdG9rZW7lpLHotKXliLDnmbvlvZXpobUKLy8gICAgICAgICAgICAgICBNZXNzYWdlQm94LmFsZXJ0KCfns7vnu5/nmbvlvZXml7bpl7Tov4fplb8s5bCG6YeN5paw55m75b2VIScsJ+aPkOekuicsewovLyAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAovLyAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGFjdGlvbiA9PiB7Ci8vICAgICAgICAgICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCd1c2VyL3Jlc2V0VG9rZW4nKS50aGVuKCgpID0+IHsKLy8gICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKLy8gICAgICAgICAgICAgICAgICAgfSkKLy8gICAgICAgICAgICAgICAgIH0KLy8gICAgICAgICAgICAgICB9KTsgICAgICAgICAgCi8vICAgICAgICAgICAgIH0pCi8vICAgICAgICAgICB9Ci8vICAgICAgICAgLyrmioror7fmsYIodG9rZW4pPT57Li4uLn3pg71wdXNo5Yiw5LiA5Liq5pWw57uE5LitKi8KLy8gICAgICAgICBsZXQgcmV0cnkgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7Ci8vICAgICAgICAgICAvKih0b2tlbikgPT4gey4uLn3ov5nkuKrlh73mlbDlsLHmmK/lm57osIPlh73mlbAqLwovLyAgICAgICAgICAgc3Vic2NyaWJlVG9rZW5SZWZyZXNoKCh0b2tlbikgPT4gewovLyAgICAgICAgICAgICBjb25maWcuaGVhZGVycy5BdXRob3JpemF0aW9uID0gJ0JlYXJlciAnICsgdG9rZW4KLy8gICAgICAgICAgICAgLy/lsIbor7fmsYLmjILotbcKLy8gICAgICAgICAgICAgcmVzb2x2ZShjb25maWcpCi8vICAgICAgICAgICB9KQovLyAgICAgICAgIH0pCi8vICAgICAgICAgcmV0dXJuIHJldHJ5Ci8vICAgICAgIH0KLy8gICAgICAgcmV0dXJuIGNvbmZpZyAgCi8vICAgICB9ZWxzZXsKLy8gICAgICAgLy/mnKrnmbvlvZXnm7TmjqXov5Tlm57phY3nva7kv6Hmga8KLy8gICAgICAgcmV0dXJuIGNvbmZpZwovLyAgICAgfQovLyAgIH0sZXJyb3IgPT4geyAgICAKLy8gICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcikKLy8gICB9Ci8vICkKLy8g5ZON5bqU5oum5oiq5ZmoCgoKc2VydmljZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogIHZhciBkYXRhID0gcmVzcG9uc2UuZGF0YSwKICAgICAgY29uZmlnID0gcmVzcG9uc2UuY29uZmlnLAogICAgICBzdGF0dXMgPSByZXNwb25zZS5zdGF0dXMsCiAgICAgIHN0YXR1c1RleHQgPSByZXNwb25zZS5zdGF0dXNUZXh0OyAvLyDliKTmlq3or7fmsYJjb2Rl5piv5ZCm56ym5ZCI5oiQ5YqfZGVmaWVuZENvZGUKCiAgaWYgKHN1Y2Nlc3NDb2RlLmluY2x1ZGVzKHN0YXR1cykpIHsKICAgIHJldHVybiBkYXRhOwogIH0gZWxzZSB7CiAgICBoYW5kbGVDb2RlKHN0YXR1cywgc3RhdHVzVGV4dCk7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoJ+ivt+axguW8guW4uOaLpuaIqjonICsgSlNPTi5zdHJpbmdpZnkoewogICAgICB1cmw6IGNvbmZpZy51cmwsCiAgICAgIHN0YXR1czogc3RhdHVzLAogICAgICBzdGF0dXNUZXh0OiBzdGF0dXNUZXh0CiAgICB9KSB8fCAiRXJyb3IiKTsKICB9Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIGlmIChlcnJvciA9PT0gdW5kZWZpbmVkIHx8IGVycm9yLmNvZGUgPT09ICdFQ09OTkFCT1JURUQnKSB7CiAgICBNZXNzYWdlKHsKICAgICAgbWVzc2FnZTogJ+acjeWKoei2heaXtu+8jOivt+eojeWQjumHjeivlScsCiAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgIGR1cmF0aW9uOiA1MDAwCiAgICB9KTsKICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7CiAgfQoKICB2YXIgcmVzcG9uc2UgPSBlcnJvci5yZXNwb25zZSwKICAgICAgbWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7CgogIGlmIChlcnJvci5yZXNwb25zZSAmJiBlcnJvci5yZXNwb25zZS5kYXRhKSB7CiAgICB2YXIgc3RhdHVzID0gcmVzcG9uc2Uuc3RhdHVzLAogICAgICAgIGRhdGEgPSByZXNwb25zZS5kYXRhOwogICAgaGFuZGxlQ29kZShzdGF0dXMsIGRhdGEgfHwgbWVzc2FnZSk7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogIH0KfSk7Ci8qIOWkhOeQhmh0dHDov5Tlm57plJnor6/nirbmgIHnoIEgKi8KCnZhciBoYW5kbGVDb2RlID0gZnVuY3Rpb24gaGFuZGxlQ29kZShjb2RlLCBtc2cpIHsKICBzd2l0Y2ggKGNvZGUpIHsKICAgIGNhc2UgNDAxOgogICAgICBNZXNzYWdlKHsKICAgICAgICBtZXNzYWdlOiBtc2cuVmFsdWUgfHwgIlx1NUJBMlx1NjIzN1x1N0FFRlx1NjNBNVx1NTNFMyIuY29uY2F0KGNvZGUsICJcdTVGMDJcdTVFMzgiKSwKICAgICAgICB0eXBlOiAnZXJyb3InLAogICAgICAgIGR1cmF0aW9uOiA2MDAwCiAgICAgIH0pOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBzdG9yZS5kaXNwYXRjaCgndXNlci9yZXNldFRva2VuJykudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICB9KTsKICAgICAgfSwgMTAwMCk7CiAgICAgIGJyZWFrOwoKICAgIGRlZmF1bHQ6CiAgICAgIE1lc3NhZ2UoewogICAgICAgIG1lc3NhZ2U6IG1zZyB8fCAiXHU1QkEyXHU2MjM3XHU3QUVGXHU2M0E1XHU1M0UzIi5jb25jYXQoY29kZSwgIlx1NUYwMlx1NUUzOCIpLAogICAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgICAgZHVyYXRpb246IDYwMDAKICAgICAgfSk7CiAgICAgIGJyZWFrOwogIH0KfTsKLyoNCiAqIOi/lOWbnueKtuaAgeegge+8mg0KICogDQogKiAyeHgg5oiQ5YqfDQogKiAyMDAgLSBPSyDor7fmsYLmiJDlip8NCiAqIDIwMSAtIENyZWF0ZWQg6K+35rGC5oiQ5Yqf5bm25Yib5bu65LqG6LWE5rqQDQogKiAyMDQgLSBObyBDb250ZW50IOivt+axguaIkOWKn++8jOS9huaYr+S4jeW6lOivpei/lOWbnuS7u+S9leS4nOilv++8jOS+i+WmguWIoOmZpOaTjeS9nA0KICogDQogKiA0eHgg5a6i5oi356uv6ZSZ6K+vDQogKiA0MDAgLSBCYWQgUmVxdWVzdCBBUEnmtojotLnogIXlj5HpgIHliLDmnI3liqHlmajnmoTor7fmsYLmmK/mnInplJnor6/nmoQNCiAqIDQwMSAtIFVuYXV0aG9yaXplZCDmsqHmnInmj5DkvpvmjojmnYPkv6Hmga/miJbogIXmj5DkvpvnmoTmjojmnYPkv6Hmga/kuI3mraPnoa4NCiAqIDQwMyAtIEZvcmJpZGRlbiDouqvku73orqTor4Hlt7Lnu4/miJDlip/vvIzkvYbmmK/lt7LorqTor4HnmoTnlKjmiLfljbTml6Dms5Xorr/pl67or7fmsYLnmoTotYTmupANCiAqIDQwNCAtIE5vdCBGb3VuZCDor7fmsYLnmoTotYTmupDkuI3lrZjlnKgNCiAqIDQwNSAtIE1ldGhvZCBOb3QgQWxsb3dlZCDlsJ3or5Xlj5HpgIHor7fmsYLliLDotYTmupDnmoTml7blgJnvvIzkvb/nlKjkuobkuI3ooqvmlK/mjIHnmoRIVFRQ5pa55rOVDQogKiA0MDYgLSBOb3QgQWNjZXB0YWJsZSBBUEnmtojotLnogIXor7fmsYLnmoTooajov7DmoLzlvI/lubbkuI3ooqtXZWIgQVBJ5omA5pSv5oyB77yM5bm25LiUQVBJ5LiNDQogKiAgICAgICDkvJrmj5Dkvpvpu5jorqTnmoTooajov7DmoLzlvI8NCiAqIDQwOSAtIENvbmZsaWN0IOivt+axguS4juacjeWKoeWZqOW9k+WJjeeKtuaAgeWGsueqge+8iOmAmuW4uOaMh+abtOaWsOi1hOa6kOaXtuWPkeeUn+eahOWGsueqge+8iQ0KICogNDE1IC0gVW5zdXBwb3J0ZWQgTWVkaWEgVHlwZSDkuI40MDbmraPlpb3nm7jlj43vvIzmnInkuIDkupvor7fmsYLlv4XpobvluKbnnYDmlbDmja7lj5HlvoDmnI3liqHlmajvvIwNCiAqICAgICAgIOi/meS6m+aVsOaNrumDveWxnuS6jueJueWumueahOWqkuS9k+agvOW8j++8jOWmguaenEFQSeS4jeaUr+aMgeivpeWqkuS9k+exu+Wei+agvOW8j++8jDQxNeWwseS8muiiq+i/lOWbng0KICogNDIyIC0gVW5wcm9jZXNzYWJsZSBFbnRpdHkg5a6D5pivSFRUUOaLk+WxleWNj+iurueahOS4gOmDqOWIhu+8jOWug+ivtOaYjuacjeWKoeWZqOW3sue7j+aHguW+l+S6hg0KICogICAgICAgQ29udGVudCBUeXBl77yM5a6e5L2T55qE6K+t5rOV5Lmf5rKh5pyJ6Zeu6aKY77yM5L2G5piv5pyN5Yqh5Zmo5LuN54S25peg5rOV5aSE55CG6L+Z5Liq5a6e5L2T5pWw5o2uIA0KICogDQogKiA1eHgg5pyN5Yqh5Zmo6ZSZ6K+vDQogKiA1MDAgLSBJbnRlcm5hbCBTZXJ2ZXIgRXJyb3Ig5pyN5Yqh5Zmo5Ye6546w6ZSZ6K+vDQogKi8KCgpleHBvcnQgZGVmYXVsdCBzZXJ2aWNlOw=="},{"version":3,"names":["axios","MessageBox","Message","store","getToken","getLoginInfo","isTokenExpired","$URL","successCode","service","create","baseURL","process","env","VUE_APP_BASE_API","timeout","headers","window","isRefreshing","refreshSubscribers","subscribeTokenRefresh","cb","push","onRrefreshed","token","map","interceptors","response","use","data","config","status","statusText","includes","handleCode","Promise","reject","JSON","stringify","url","error","undefined","code","message","type","duration","msg","Value","setTimeout","dispatch","then","location","reload"],"sources":["C:/Users/Administrator/Desktop/tuberculosis-fe/src/utils/request.js"],"sourcesContent":["import axios from 'axios'\r\nimport { MessageBox, Message } from 'element-ui'\r\nimport store from '@/store'\r\nimport { getToken,getLoginInfo} from '@/utils/auth'\r\nimport { isTokenExpired } from '@/utils/index'\r\nimport $URL from \"@/assets/js/requestUrl\";\r\n//请求操作正常code，支持String、Array、int多种类型,项目中和后端提前协商好，定义哪些状态码为success\r\nconst successCode=[200, 201,204, 0];\r\n//创建一个axios实例\r\nconst service = axios.create({\r\n  baseURL:  process.env.VUE_APP_BASE_API,//'/', \r\n  timeout: 60000, // 请求超时\r\n  headers: {\r\n    'Content-Type': \"application/json;charset=UTF-8\",\r\n    'Authorization':'Bearer' +' '+ getToken()\r\n  }\r\n})\r\nwindow.isRefreshing = false;//是否有请求正在刷新token\r\nlet refreshSubscribers = [];//被挂起的请求数组\r\n /*push所有请求到数组中*/\r\n function subscribeTokenRefresh (cb) {\r\n  refreshSubscribers.push(cb)\r\n }\r\n  /*刷新请求（refreshSubscribers数组中的请求得到新的token之后会自执行，用新的token去请求数据）*/\r\n function onRrefreshed (token) {\r\n  refreshSubscribers.map(cb => cb(token))\r\n }\r\n//请求拦截器\r\n// service.interceptors.request.use(\r\n//   config => {\r\n    \r\n//     //判断是否已登录\r\n//     if (store.getters.token) {\r\n//       //在请求头中添加token类型\r\n//       config.headers.Authorization =getLoginInfo().token_type+' '+getToken();\r\n//       //获取过期时间\r\n//       let expiredTime=getLoginInfo().expiredTime;\r\n//       //token是否将要过期或已经过期\r\n//       if (isTokenExpired(expiredTime)&&config.url.indexOf($URL.urls.refreshToken) === -1) {\r\n//         \r\n//           //是否正在刷新\r\n//           if (!window.isRefreshing) {\r\n//             //将刷新token的标志置为true\r\n//             window.isRefreshing = true;\r\n//             //发起刷新token的请求\r\n//             store.dispatch('user/refreshToken').then(res => {\r\n//               //将标志置为false\r\n//               window.isRefreshing = false;\r\n//               //成功刷新token\r\n//               config.headers.Authorization = res.token_Type + ' ' + res.token          \r\n//               //执行数组里的函数,重新发起被挂起的请求\r\n//               var res ={\r\n//                 token:1647825973938\r\n//               }\r\n//               onRrefreshed(res.token);\r\n//               //执行onRefreshed函数后清空数组中保存的请求\r\n//               refreshSubscribers = [];\r\n//             }).catch(err => {\r\n//               //刷新token失败到登录页\r\n//               MessageBox.alert('系统登录时间过长,将重新登录!','提示',{\r\n//                 confirmButtonText: '确定',\r\n//                 callback: action => {\r\n//                   store.dispatch('user/resetToken').then(() => {\r\n//                     location.reload();\r\n//                   })\r\n//                 }\r\n//               });          \r\n//             })\r\n//           }\r\n\r\n//         /*把请求(token)=>{....}都push到一个数组中*/\r\n//         let retry = new Promise((resolve, reject) => {\r\n//           /*(token) => {...}这个函数就是回调函数*/\r\n//           subscribeTokenRefresh((token) => {\r\n//             config.headers.Authorization = 'Bearer ' + token\r\n//             //将请求挂起\r\n//             resolve(config)\r\n//           })\r\n//         })\r\n//         return retry\r\n//       }\r\n//       return config  \r\n//     }else{\r\n//       //未登录直接返回配置信息\r\n//       return config\r\n//     }\r\n//   },error => {    \r\n//     return Promise.reject(error)\r\n//   }\r\n// )\r\n\r\n// 响应拦截器\r\nservice.interceptors.response.use(\r\n  response => {    \r\n    let { data, config,status,statusText} = response;\r\n    // 判断请求code是否符合成功defiendCode\r\n    if (successCode.includes(status)) {\r\n      return data;\r\n    } else {\r\n      handleCode(status, statusText);\r\n      return Promise.reject('请求异常拦截:' + JSON.stringify({ url: config.url, status, statusText }) || \"Error\")\r\n    }\r\n  },\r\n  error => {\r\n    if (error === undefined || error.code === 'ECONNABORTED') {\r\n        Message({\r\n          message: '服务超时，请稍后重试',\r\n          type: 'error',\r\n          duration: 5000\r\n        })\r\n        return Promise.reject(error)\r\n    }\r\n    const { response, message } = error;\r\n    if (error.response && error.response.data) {\r\n      const { status, data } = response;\r\n      handleCode(status, data || message);\r\n      return Promise.reject(error)\r\n    }\r\n  }\r\n)\r\n/* 处理http返回错误状态码 */\r\nconst handleCode = (code, msg) => {\r\n  switch (code) {\r\n      case 401:\r\n          Message({\r\n            message:msg.Value || `客户端接口${code}异常`,\r\n            type: 'error',\r\n            duration: 6000\r\n          })\r\n          setTimeout(() => {\r\n            store.dispatch('user/resetToken').then(() => {\r\n              location.reload()\r\n            })\r\n          },1000)\r\n          break;\r\n      default:\r\n          Message({\r\n            message:msg || `客户端接口${code}异常`,\r\n            type: 'error',\r\n            duration: 6000\r\n          })\r\n          break;\r\n  }\r\n}\r\n\r\n/*\r\n * 返回状态码：\r\n * \r\n * 2xx 成功\r\n * 200 - OK 请求成功\r\n * 201 - Created 请求成功并创建了资源\r\n * 204 - No Content 请求成功，但是不应该返回任何东西，例如删除操作\r\n * \r\n * 4xx 客户端错误\r\n * 400 - Bad Request API消费者发送到服务器的请求是有错误的\r\n * 401 - Unauthorized 没有提供授权信息或者提供的授权信息不正确\r\n * 403 - Forbidden 身份认证已经成功，但是已认证的用户却无法访问请求的资源\r\n * 404 - Not Found 请求的资源不存在\r\n * 405 - Method Not Allowed 尝试发送请求到资源的时候，使用了不被支持的HTTP方法\r\n * 406 - Not Acceptable API消费者请求的表述格式并不被Web API所支持，并且API不\r\n *       会提供默认的表述格式\r\n * 409 - Conflict 请求与服务器当前状态冲突（通常指更新资源时发生的冲突）\r\n * 415 - Unsupported Media Type 与406正好相反，有一些请求必须带着数据发往服务器，\r\n *       这些数据都属于特定的媒体格式，如果API不支持该媒体类型格式，415就会被返回\r\n * 422 - Unprocessable Entity 它是HTTP拓展协议的一部分，它说明服务器已经懂得了\r\n *       Content Type，实体的语法也没有问题，但是服务器仍然无法处理这个实体数据 \r\n * \r\n * 5xx 服务器错误\r\n * 500 - Internal Server Error 服务器出现错误\r\n */\r\nexport default service\r\n"],"mappings":"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"}]}