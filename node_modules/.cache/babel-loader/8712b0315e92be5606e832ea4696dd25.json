{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\src\\layout\\components\\AppSystem.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\src\\layout\\components\\AppSystem.vue","mtime":1678931188546},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\babel.config.js","mtime":1678931188406},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678931310818},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\babel-loader\\lib\\index.js","mtime":1678931314285},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678931310818},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\vue-loader\\lib\\index.js","mtime":1678931316857}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBDcnlwdG9KUyBmcm9tICJjcnlwdG8tanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkFwcFN5c3RlbSIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGJpZ1RpdGxlOiB0aGlzLiRiaWdUaXRsZSwKICAgICAgdXNlckluZm86IHt9LAogICAgICBzeXN0ZW1MaXN0OiBbXQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldFN5c1RlbURhdGEoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8v6I635Y+W57O757uf5pWw5o2uCiAgICBnZXRTeXNUZW1EYXRhOiBmdW5jdGlvbiBnZXRTeXNUZW1EYXRhKCkgewogICAgICB0aGlzLnN5c3RlbUxpc3QgPSBKU09OLnBhcnNlKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgic2VsZWN0U3lzdGVtIikpOwoKICAgICAgaWYgKHRoaXMuc3lzdGVtTGlzdC5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbS5pc0FjdGl2ZSA9PT0gdHJ1ZTsKICAgICAgfSkubGVuZ3RoID09IDApIHsKICAgICAgICB0aGlzLnN5c3RlbUxpc3RbMF0uaXNBY3RpdmUgPSB0cnVlOwogICAgICB9CiAgICB9LAogICAgLy/liIfmjaLns7vnu58KICAgIGNoYW5nZVN5c3RlbTogZnVuY3Rpb24gY2hhbmdlU3lzdGVtKGl0ZW0pIHsKICAgICAgLy/liY3lvoDnrKzkuInmlrnns7vnu58KICAgICAgaWYgKGl0ZW0uZXh0ZXJuYWxMaW5rcykgewogICAgICAgIHRoaXMuZ290b05ld1N5cyhpdGVtKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuc3lzdGVtTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpKSB7CiAgICAgICAgaWYgKGkucGVybWlzc2lvbklkID09PSBpdGVtLnBlcm1pc3Npb25JZCkgewogICAgICAgICAgaS5pc0FjdGl2ZSA9IHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGkuaXNBY3RpdmUgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oInNlbGVjdFN5c3RlbSIsIEpTT04uc3RyaW5naWZ5KHRoaXMuc3lzdGVtTGlzdCkpOwogICAgICB2YXIgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7CiAgICAgIHVybCA9IHVybC5zbGljZSgwLCB1cmwuaW5kZXhPZigiIyIpKTsKICAgICAgd2luZG93Lm9wZW4odXJsLCAiX3NlbGYiKTsKICAgIH0sCiAgICAvL+WJjeW+gOesrOS4ieaWueezu+e7nwogICAgZ290b05ld1N5czogZnVuY3Rpb24gZ290b05ld1N5cyhpdGVtKSB7CiAgICAgIHZhciB1c2VyTG9naW5JbmZvID0gSlNPTi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXJMb2dpbkluZm8iKSk7CiAgICAgIHZhciBfdXJsID0gaXRlbS5jb2RlOwogICAgICB2YXIgdXNlck5hbWUgPSB1c2VyTG9naW5JbmZvLmxvZ2luQ29kZTsKICAgICAgdmFyIHBhc3N3ZCA9IHVzZXJMb2dpbkluZm8ucGFzc3dvcmQ7IC8vIHZhciB1c2VyTmFtZSA9ICd5aDEnOwogICAgICAvLyB2YXIgcGFzc3dkID0gJ2FkbWluMTIzJzsKICAgICAgLy/lr4bpkqUKCiAgICAgIHZhciBzZWNyZXQgPSBDcnlwdG9KUy5lbmMuVXRmOC5wYXJzZSgiQkJuRldRb3giKTsgLy9rZXkKCiAgICAgIHZhciBrZXkgPSAiUldWaGZhb0VDRDltaVZPWnp5cHFtVktyIjsgLy/ml7bpl7QKCiAgICAgIHZhciBzeXN0aW1lID0gdGhpcy4kdXRpbHNGdW4uZGF0ZUZvcm1hdChuZXcgRGF0ZSgpLCAnWVlZWW1tZGRISE1NU1MnKTsgLy/liqDlr4botKblj7cgREVT5Yqg5a+G5pa55byPCgogICAgICB2YXIgdW5hbWUgPSBlbmNvZGVVUklDb21wb25lbnQoQ3J5cHRvSlMuVHJpcGxlREVTLmVuY3J5cHQodXNlck5hbWUsIHNlY3JldCwgewogICAgICAgIG1vZGU6IENyeXB0b0pTLm1vZGUuRUNCLAogICAgICAgIHBhZGRpbmc6IENyeXB0b0pTLnBhZC5Qa2NzNwogICAgICB9KS50b1N0cmluZygpKTsgLy/liqDlr4botKblj7flr4bnoIEKCiAgICAgIHZhciBwd2QgPSBlbmNvZGVVUklDb21wb25lbnQoQ3J5cHRvSlMuVHJpcGxlREVTLmVuY3J5cHQocGFzc3dkLCBzZWNyZXQsIHsKICAgICAgICBtb2RlOiBDcnlwdG9KUy5tb2RlLkVDQiwKICAgICAgICBwYWRkaW5nOiBDcnlwdG9KUy5wYWQuUGtjczcKICAgICAgfSkudG9TdHJpbmcoKSk7IC8v5Yqg5a+G5pe26Ze0CgogICAgICB2YXIgdGltZSA9IGVuY29kZVVSSUNvbXBvbmVudChDcnlwdG9KUy5UcmlwbGVERVMuZW5jcnlwdChzeXN0aW1lLCBzZWNyZXQsIHsKICAgICAgICBtb2RlOiBDcnlwdG9KUy5tb2RlLkVDQiwKICAgICAgICBwYWRkaW5nOiBDcnlwdG9KUy5wYWQuUGtjczcKICAgICAgfSkudG9TdHJpbmcoKSk7IC8v5ou85o6lIOaYjuaWh+i0puWPtyvlr4bnoIEra2V5K+aXtumXtAoKICAgICAgdmFyIF92ZXJpZnkgPSAiIi5jb25jYXQodXNlck5hbWUpLmNvbmNhdChwYXNzd2QpLmNvbmNhdChrZXkpLmNvbmNhdChzeXN0aW1lKTsgLy/nlJ/miJDnrb7lkI0KCgogICAgICB2YXIgdmVyaWZ5ID0gZW5jb2RlVVJJQ29tcG9uZW50KENyeXB0b0pTLk1ENShfdmVyaWZ5KS50b1N0cmluZygpKTsgLy/mnoTpgKDlnLDlnYAKCiAgICAgIHZhciBoX3VybCA9IF91cmwgKyAnP3VzZXJuYW1lPScgKyB1bmFtZSArICcmcGFzc3dvcmQ9JyArIHB3ZCArICcmdmVyaWZ5PScgKyB2ZXJpZnkgKyAnJnN5c3RpbWU9JyArIHRpbWU7IC8vIOi3s+i9rOWIsOesrOS4ieaWueezu+e7nwogICAgICAvLyB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGhfdXJsOwoKICAgICAgd2luZG93Lm9wZW4oaF91cmwsICJfYmxhbmsiKTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAkBA;AACA;EACAA,iBADA;EAEAC,IAFA,kBAEA;IACA;MACAC,wBADA;MAEAC,YAFA;MAGAC;IAHA;EAKA,CARA;EASAC,OATA,qBASA;IACA;EACA,CAXA;EAYAC;IACA;IACAC,aAFA,2BAEA;MACA;;MACA;QAAA;MAAA;QACA;MACA;IACA,CAPA;IAQA;IACAC,YATA,wBASAC,IATA,EASA;MACA;MACA;QACA;QACA;MACA;;MACA;QACA;UACAC;QACA,CAFA,MAEA;UACAA;QACA;MACA,CANA;MAOAC;MACA;MACAC;MACAD;IACA,CA1BA;IA2BA;IACAE,UA5BA,sBA4BAJ,IA5BA,EA4BA;MACA;MACA;MACA;MACA,oCAJA,CAOA;MACA;MACA;;MACA,iDAVA,CAWA;;MACA,qCAZA,CAaA;;MACA,sEAdA,CAgBA;;MACA;QACAK,uBADA;QAEAC;MAFA,GAGAC,QAHA,IAjBA,CAsBA;;MACA;QACAF,uBADA;QAEAC;MAFA,GAGAC,QAHA,IAvBA,CA4BA;;MACA;QACAF,uBADA;QAEAC;MAFA,GAGAC,QAHA,IA7BA,CAkCA;;MACA,6EAnCA,CAoCA;;;MACA,kEArCA,CAsCA;;MACA,wGAvCA,CAwCA;MACA;;MACAL;IACA;EAvEA;AAZA","names":["name","data","bigTitle","userInfo","systemList","created","methods","getSysTemData","changeSystem","item","i","window","url","gotoNewSys","mode","padding","toString"],"sourceRoot":"src/layout/components","sources":["AppSystem.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"header-system\">\r\n      <span\r\n        v-for=\"(item, index) in systemList\"\r\n        :key=\"index\"\r\n        class=\"systemName\"\r\n        @click=\"changeSystem(item)\"\r\n      >\r\n        <div v-if=\"item.isActive\" class=\"active\">{{ item.permissionName }}</div>\r\n        <div v-else>{{ item.permissionName }}</div>\r\n      </span>\r\n      <div class=\"header-bottom\"></div>\r\n    </div>\r\n    \r\n  </div>\r\n</template>\r\n<script>\r\nimport CryptoJS from \"crypto-js\";\r\nexport default {\r\n  name: \"AppSystem\",\r\n  data() {\r\n    return {\r\n      bigTitle: this.$bigTitle,\r\n      userInfo: {},\r\n      systemList: [],\r\n    };\r\n  },\r\n  created() {\r\n    this.getSysTemData();\r\n  },\r\n  methods: {\r\n    //获取系统数据\r\n    getSysTemData() {\r\n      this.systemList = JSON.parse(window.localStorage.getItem(\"selectSystem\"));\r\n      if(this.systemList.filter((item)=>item.isActive ===true).length==0){\r\n        this.systemList[0].isActive = true;\r\n      }\r\n    },\r\n    //切换系统\r\n    changeSystem(item) {\r\n      //前往第三方系统\r\n      if(item.externalLinks){\r\n        this.gotoNewSys(item);\r\n        return\r\n      }\r\n      this.systemList.forEach((i) => {\r\n        if (i.permissionId === item.permissionId) {\r\n          i.isActive = true;\r\n        } else {\r\n          i.isActive = false;\r\n        }\r\n      });\r\n      window.localStorage.setItem(\"selectSystem\",JSON.stringify(this.systemList));\r\n      let url = window.location.href;\r\n      url = url.slice(0, url.indexOf(\"#\"));\r\n      window.open(url, \"_self\");\r\n    },\r\n    //前往第三方系统\r\n    gotoNewSys(item){\r\n      let userLoginInfo = JSON.parse(window.localStorage.getItem(\"userLoginInfo\"))\r\n      var _url = item.code;\r\n      var userName = userLoginInfo.loginCode;\r\n      var passwd = userLoginInfo.password;\r\n\r\n      \r\n      // var userName = 'yh1';\r\n      // var passwd = 'admin123';\r\n      //密钥\r\n      var secret= CryptoJS.enc.Utf8.parse(\"BBnFWQox\")\r\n      //key\r\n      var key=\"RWVhfaoECD9miVOZzypqmVKr\"\r\n      //时间\r\n      var systime = this.$utilsFun.dateFormat(new Date(),'YYYYmmddHHMMSS');\r\n\r\n      //加密账号 DES加密方式\r\n      var uname = encodeURIComponent(CryptoJS.TripleDES.encrypt(userName, secret, {\r\n        mode: CryptoJS.mode.ECB,\r\n        padding: CryptoJS.pad.Pkcs7\r\n      }).toString());\r\n\r\n      //加密账号密码\r\n      var pwd=encodeURIComponent(CryptoJS.TripleDES.encrypt(passwd, secret, {\r\n        mode: CryptoJS.mode.ECB,\r\n        padding: CryptoJS.pad.Pkcs7\r\n      }).toString());\r\n\r\n      //加密时间\r\n      var time = encodeURIComponent(CryptoJS.TripleDES.encrypt(systime, secret, {\r\n        mode: CryptoJS.mode.ECB,\r\n        padding: CryptoJS.pad.Pkcs7\r\n      }).toString());\r\n\r\n      //拼接 明文账号+密码+key+时间\r\n      var _verify=`${userName}${passwd}${key}${systime}`;\r\n      //生成签名\r\n      var verify = encodeURIComponent(CryptoJS.MD5(_verify).toString());\r\n      //构造地址\r\n      var h_url = _url+'?username='+uname+'&password='+pwd+'&verify='+verify+'&systime='+time;\r\n      // 跳转到第三方系统\r\n      // window.location.href = h_url;\r\n      window.open(h_url, \"_blank\");\r\n    }\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.header-bottom{\r\n  height: 8px;\r\n  width: calc(100% + 20px);\r\n  margin-left: -20px!important;\r\n  display: flex;\r\n  background: #eff3f9 ;\r\n}\r\n.header-system {\r\n  position: fixed !important;\r\n  top: 60px;\r\n  height: 50px;\r\n  width: 100%;\r\n  z-index: 2000;\r\n  line-height: 50px;\r\n  background: #ffffff;\r\n  padding-left: 20px;\r\n  .systemName {\r\n    cursor:pointer;\r\n    color: #666666;\r\n    line-height: 40px;\r\n    font-size: 16px;\r\n    font-weight: 400;\r\n    font-family: Microsoft YaHei;\r\n    div {\r\n      float: left;\r\n      margin-left: 3px;\r\n      margin-right: 42px;\r\n    }\r\n    .active {\r\n      color: #2d78ff;\r\n      font-weight: bold;\r\n      border-bottom: 3px solid #2d78ff;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}