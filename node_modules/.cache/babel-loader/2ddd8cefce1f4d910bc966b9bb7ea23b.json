{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\src\\http\\request.js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\src\\http\\request.js","mtime":1678931188529},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\babel.config.js","mtime":1678931188406},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678931310818},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\babel-loader\\lib\\index.js","mtime":1678931314285},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\eslint-loader\\index.js","mtime":1678931311328}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YgZnJvbSAiQzovVXNlcnMvQWRtaW5pc3RyYXRvci9EZXNrdG9wL3R1YmVyY3Vsb3Npcy1mZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mLmpzIjsKCnZhciBfdGhpcyA9IHRoaXM7CgppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmVycm9yLmNhdXNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCByb3V0ZXIgZnJvbSAnQC9yb3V0ZXInOwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZSc7CmltcG9ydCB7IE5vdGlmaWNhdGlvbiwgTWVzc2FnZUJveCwgTWVzc2FnZSwgTG9hZGluZyB9IGZyb20gJ2VsZW1lbnQtdWknOwppbXBvcnQgcXMgZnJvbSAncXMnOwppbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7CmltcG9ydCBlcnJvckNvZGUgZnJvbSAnQC9jb25maWcvZXJyb3JDb2RlJzsKaW1wb3J0IHsgdGFuc1BhcmFtcywgYmxvYlZhbGlkYXRlIH0gZnJvbSAnQC91dGlscy90b29sLmpzJzsKaW1wb3J0IGNhY2hlIGZyb20gJ0AvcGx1Z2lucy9jYWNoZSc7CmltcG9ydCB7IHJlbW92ZVdhdGVybWFyaywgc2V0V2F0ZXJNYXJrIH0gZnJvbSAnQC91dGlscy93YXRlck1hcmsnOyAvLyDmmK/lkKbmmL7npLrph43mlrDnmbvlvZUKCmV4cG9ydCB2YXIgaXNSZWxvZ2luID0gewogIHNob3c6IGZhbHNlCn07CnZhciBsb2FkaW5nSW5zdGFuY2U7IC8vIOWIm+W7umF4aW9z5a6e5L6LCgp2YXIgaW5zdGFuY2UgPSBheGlvcy5jcmVhdGUoewogIC8vIGF4aW9z5Lit6K+35rGC6YWN572u5pyJYmFzZVVSTOmAiemhue+8jOihqOekuuivt+axglVSTOWFrOWFsemDqOWIhgogIGJhc2VVUkw6IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9BUEksCiAgdGltZW91dDogNTAwMDAsCiAgaGVhZGVyczogewogICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTgnCiAgfQp9KTsgLy8g6K+35rGC5oum5oiq5ZmoCgppbnN0YW5jZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIC8vIGxvYWRpbmdJbnN0YW5jZSA9IFZ1ZS5wcm90b3R5cGUuJGJhc2VDb2xvcmZ1bGxMb2FkaW5nKDMpOwogIC8vIDEu6K+35rGC5piv5ZCm6ZyA6KaB5YqgdG9rZW4KICAvLyDnmbvlvZXor7fmsYLnmoR0b2tlbgogIHZhciBnZXRpc1Rva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ1RPS0VOJyk7CiAgdmFyIGlzVG9rZW4gPSAoY29uZmlnLmhlYWRlcnMgfHwge30pLmlzVG9rZW4gPT09IGZhbHNlOyAvL+S4gOWumuimgeaYr+WFqOetiT09PQoKICBpZiAoZ2V0aXNUb2tlbiAmJiAhaXNUb2tlbikgewogICAgY29uZmlnLmhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9ICdCZWFyZXIgJyArIGdldGlzVG9rZW47CiAgfSAvLzIuIGdldOivt+axguaYoOWwhHBhcmFtc+WPguaVsAoKCiAgaWYgKGNvbmZpZy5tZXRob2QgPT09ICdnZXQnICYmIGNvbmZpZy5wYXJhbXMpIHsKICAgIHZhciB1cmwgPSBjb25maWcudXJsICsgJz8nICsgdGFuc1BhcmFtcyhjb25maWcucGFyYW1zKTsKICAgIHVybCA9IHVybC5zbGljZSgwLCAtMSk7CiAgICBjb25maWcucGFyYW1zID0ge307CiAgICBjb25maWcudXJsID0gdXJsOwogIH0gLy8zLiDmmK/lkKbpnIDopoHpmLLmraLmlbDmja7ph43lpI3mj5DkuqQKCgogIHZhciBpc1JlcGVhdFN1Ym1pdCA9IChjb25maWcuaGVhZGVycyB8fCB7fSkucmVwZWF0U3VibWl0ID09PSBmYWxzZTsKCiAgaWYgKCFpc1JlcGVhdFN1Ym1pdCAmJiAoY29uZmlnLm1ldGhvZCA9PT0gJ3Bvc3QnIHx8IGNvbmZpZy5tZXRob2QgPT09ICdwdXQnKSkgewogICAgLy8g6ZyA6KaB6Zi75q2i55qE6K+35rGC57uE6KOF5a+56LGhCiAgICB2YXIgcmVxdWVzdE9iaiA9IHsKICAgICAgdXJsOiBjb25maWcudXJsLAogICAgICBkYXRhOiBfdHlwZW9mKGNvbmZpZy5kYXRhKSA9PT0gJ29iamVjdCcgPyBKU09OLnN0cmluZ2lmeShjb25maWcuZGF0YSkgOiBjb25maWcuZGF0YSwKICAgICAgdGltZTogbmV3IERhdGUoKS5nZXRUaW1lKCkKICAgIH07IC8vIOWtmOWCqOWcqOacrOWcsOeahOivt+axgue7hOijheWvueixoQoKICAgIHZhciBzZXNzaW9uT2JqID0gY2FjaGUuc2Vzc2lvbi5nZXRKU09OKCdzZXNzaW9uT2JqJyk7CgogICAgaWYgKHNlc3Npb25PYmogPT09IHVuZGVmaW5lZCB8fCBzZXNzaW9uT2JqID09PSBudWxsIHx8IHNlc3Npb25PYmogPT09ICcnKSB7CiAgICAgIGNhY2hlLnNlc3Npb24uc2V0SlNPTignc2Vzc2lvbk9iaicsIHJlcXVlc3RPYmopOwogICAgfSBlbHNlIHsKICAgICAgdmFyIHNfdXJsID0gc2Vzc2lvbk9iai51cmw7IC8vIOivt+axguWcsOWdgAoKICAgICAgdmFyIHNfZGF0YSA9IHNlc3Npb25PYmouZGF0YTsgLy8g6K+35rGC5pWw5o2uCgogICAgICB2YXIgc190aW1lID0gc2Vzc2lvbk9iai50aW1lOyAvLyDor7fmsYLml7bpl7QKCiAgICAgIHZhciBpbnRlcnZhbCA9IDEwMDA7IC8vIOmXtOmalOaXtumXtChtcynvvIzlsI/kuo7mraTml7bpl7Top4bkuLrph43lpI3mj5DkuqQKCiAgICAgIGlmIChzX2RhdGEgPT09IHJlcXVlc3RPYmouZGF0YSAmJiByZXF1ZXN0T2JqLnRpbWUgLSBzX3RpbWUgPCBpbnRlcnZhbCAmJiBzX3VybCA9PT0gcmVxdWVzdE9iai51cmwpIHsKICAgICAgICB2YXIgbWVzc2FnZSA9ICfmlbDmja7mraPlnKjlpITnkIbvvIzor7fli7/ph43lpI3mj5DkuqQnOwogICAgICAgIE1lc3NhZ2Uud2FybmluZyh7CiAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihtZXNzYWdlKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2FjaGUuc2Vzc2lvbi5zZXRKU09OKCdzZXNzaW9uT2JqJywgcmVxdWVzdE9iaik7CiAgICAgIH0KICAgIH0KICB9CgogIHJldHVybiBjb25maWc7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7IC8vIOWTjeW6lOaLpuaIquWZqAoKaW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAocmVzKSB7CiAgbG9hZGluZ0luc3RhbmNlID8gbG9hZGluZ0luc3RhbmNlLmNsb3NlKCkgOiBudWxsOyAvLzEuIOacquiuvue9rueKtuaAgeeggeWImem7mOiupOaIkOWKn+eKtuaAgQoKICB2YXIgY29kZSA9IHJlcy5kYXRhLlN0YXR1c0NvZGUgfHwgMjAwOyAvLzIuIOiOt+WPlumUmeivr+S/oeaBrwoKICB2YXIgbXNnID0gZXJyb3JDb2RlW2NvZGVdIHx8IHJlcy5kYXRhLk1lc3NhZ2UgfHwgZXJyb3JDb2RlWydkZWZhdWx0J107IC8vMy4g5LqM6L+b5Yi25pWw5o2u5YiZ55u05o6l6L+U5ZueCgogIGlmIChyZXMucmVxdWVzdC5yZXNwb25zZVR5cGUgPT09ICdibG9iJyB8fCByZXMucmVxdWVzdC5yZXNwb25zZVR5cGUgPT09ICdhcnJheWJ1ZmZlcicpIHsKICAgIHJldHVybiByZXMuZGF0YTsKICB9IC8vIDQu5aSE55CG5LiN5ZCM54q25oCB56CBCgoKICBpZiAoY29kZSA9PT0gNDAxKSB7CiAgICBpZiAoIWlzUmVsb2dpbi5zaG93KSB7CiAgICAgIGlzUmVsb2dpbi5zaG93ID0gdHJ1ZTsKICAgICAgTWVzc2FnZUJveC5jb25maXJtKCfnmbvlvZXnirbmgIHlt7Lov4fmnJ/vvIzmgqjlj6/ku6Xnu6fnu63nlZnlnKjor6XpobXpnaLvvIzmiJbogIXph43mlrDnmbvlvZUnLCAn57O757uf5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn6YeN5paw55m75b2VJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgaXNSZWxvZ2luLnNob3cgPSBmYWxzZTsKICAgICAgICB2YXIgc2Vzc2lvbklkID0gSlNPTi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJbmZvJykpLnNlc3Npb25JZDsKCiAgICAgICAgaWYgKHNlc3Npb25JZCkgewogICAgICAgICAgYXhpb3MoewogICAgICAgICAgICBtZXRob2Q6ICdnZXQnLAogICAgICAgICAgICB1cmw6IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9BUEkgKyAnc3NvL3Nzb2F1dGh1cmwnLAogICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICBjbGllbnRMb2dpblVybDogcHJvY2Vzcy5lbnYuVlVFX0FQUF9SRURJUkVDVFVSTCArICdyZWRpcmVjdCcKICAgICAgICAgICAgfQogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIHdpbmRvdy5vcGVuKHJlcy5kYXRhLlJlc3BvbnNlLCAnX3NlbGYnKTsKICAgICAgICAgIH0pOwogICAgICAgICAgcmVtb3ZlV2F0ZXJtYXJrKCk7CgogICAgICAgICAgX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCd1c2VyL2xvZ291dCcpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgndXNlci9sb2dvdXQnKTsKICAgICAgICAgIHJvdXRlci5wdXNoKCIvbG9naW4iKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICBpc1JlbG9naW4uc2hvdyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0KCiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoJ+aXoOaViOeahOS8muivne+8jOaIluiAheS8muivneW3sui/h+acn++8jOivt+mHjeaWsOeZu+W9leOAgicpOwogIH0gZWxzZSBpZiAoY29kZSA9PT0gNTAwIHx8IGNvZGUgPT09IDQwMCB8fCBjb2RlID09IDQwNCkgewogICAgTWVzc2FnZSh7CiAgICAgIG1lc3NhZ2U6IG1zZywKICAgICAgdHlwZTogJ2Vycm9yJwogICAgfSk7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKG1zZykpOwogIH0gZWxzZSBpZiAoY29kZSAhPT0gMjAwKSB7CiAgICBOb3RpZmljYXRpb24uZXJyb3IoewogICAgICB0aXRsZTogbXNnCiAgICB9KTsKICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgnZXJyb3InKTsKICB9IGVsc2UgewogICAgcmV0dXJuIHJlcy5kYXRhOwogIH0KfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgLy8gbG9hZGluZ0luc3RhbmNlID8gbG9hZGluZ0luc3RhbmNlLmNsb3NlKCkgOiBudWxsOwogIC8vIGlzUmVsb2dpbi5zaG93ID0gdHJ1ZTsKICAvLyBNZXNzYWdlQm94LmNvbmZpcm0oJ+eZu+W9leeKtuaAgeW3sui/h+acn++8jOaCqOWPr+S7pee7p+e7reeVmeWcqOivpemhtemdou+8jOaIluiAhemHjeaWsOeZu+W9lScsICfns7vnu5/mj5DnpLonLCB7CiAgLy8gICBjb25maXJtQnV0dG9uVGV4dDogJ+mHjeaWsOeZu+W9lScsCiAgLy8gICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAvLyAgIHR5cGU6ICd3YXJuaW5nJywKICAvLyB9KQogIC8vICAgLnRoZW4oKCkgPT4gewogIC8vICAgICBpc1JlbG9naW4uc2hvdyA9IGZhbHNlOwogIC8vICAgICBzdG9yZS5kaXNwYXRjaCgndXNlci9sb2dvdXQnKTsKICAvLyAgICAgcm91dGVyLnB1c2goYC9sb2dpbmApOwogIC8vICAgfSkKICAvLyAgIC5jYXRjaCgoKSA9PiB7CiAgLy8gICAgIGlzUmVsb2dpbi5zaG93ID0gZmFsc2U7CiAgLy8gICAgIC8vIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7CiAgLy8gICB9KTsKICB2YXIgbWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7CgogIGlmIChtZXNzYWdlID09ICdOZXR3b3JrIEVycm9yJykgewogICAgbWVzc2FnZSA9ICflkI7nq6/mjqXlj6Pov57mjqXlvILluLgnOwogIH0gZWxzZSBpZiAobWVzc2FnZS5pbmNsdWRlcygndGltZW91dCcpKSB7CiAgICBtZXNzYWdlID0gJ+ezu+e7n+aOpeWPo+ivt+axgui2heaXtic7CiAgfSBlbHNlIGlmIChtZXNzYWdlLmluY2x1ZGVzKCdSZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlJykpIHsKICAgIG1lc3NhZ2UgPSAn57O757uf5o6l5Y+jJyArIG1lc3NhZ2Uuc3Vic3RyKG1lc3NhZ2UubGVuZ3RoIC0gMykgKyAn5byC5bi4JzsKICB9CgogIE1lc3NhZ2UoewogICAgbWVzc2FnZTogbWVzc2FnZSwKICAgIHR5cGU6ICdlcnJvcicsCiAgICBkdXJhdGlvbjogNSAqIDEwMDAKICB9KTsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKZXhwb3J0IGRlZmF1bHQgaW5zdGFuY2U7"},{"version":3,"names":["Vue","axios","router","store","Notification","MessageBox","Message","Loading","qs","getToken","errorCode","tansParams","blobValidate","cache","removeWatermark","setWaterMark","isRelogin","show","loadingInstance","instance","create","baseURL","process","env","VUE_APP_BASE_API","timeout","headers","interceptors","request","use","config","getisToken","localStorage","getItem","isToken","method","params","url","slice","isRepeatSubmit","repeatSubmit","requestObj","data","JSON","stringify","time","Date","getTime","sessionObj","session","getJSON","undefined","setJSON","s_url","s_data","s_time","interval","message","warning","Promise","reject","Error","error","response","res","close","code","StatusCode","msg","responseType","confirm","confirmButtonText","cancelButtonText","type","then","sessionId","parse","window","clientLoginUrl","VUE_APP_REDIRECTURL","open","Response","$store","dispatch","push","catch","title","includes","substr","length","duration"],"sources":["C:/Users/Administrator/Desktop/tuberculosis-fe/src/http/request.js"],"sourcesContent":["import Vue from 'vue';\r\nimport axios from 'axios';\r\nimport router from '@/router';\r\nimport store from '@/store';\r\nimport { Notification, MessageBox, Message, Loading } from 'element-ui';\r\nimport qs from 'qs';\r\nimport { getToken } from '@/utils/auth';\r\nimport errorCode from '@/config/errorCode';\r\nimport { tansParams, blobValidate } from '@/utils/tool.js';\r\nimport cache from '@/plugins/cache';\r\nimport { removeWatermark, setWaterMark } from '@/utils/waterMark';\r\n// 是否显示重新登录\r\nexport let isRelogin = { show: false };\r\nlet loadingInstance;\r\n// 创建axios实例\r\nconst instance = axios.create({\r\n  // axios中请求配置有baseURL选项，表示请求URL公共部分\r\n  baseURL: process.env.VUE_APP_BASE_API,\r\n  timeout: 50000,\r\n  headers: {\r\n    'Content-Type': 'application/json;charset=utf-8',\r\n  },\r\n});\r\n// 请求拦截器\r\ninstance.interceptors.request.use(\r\n  config => {\r\n    // loadingInstance = Vue.prototype.$baseColorfullLoading(3);\r\n    // 1.请求是否需要加token\r\n\r\n    // 登录请求的token\r\n    const getisToken = localStorage.getItem('TOKEN');\r\n\r\n    const isToken = (config.headers || {}).isToken === false; //一定要是全等===\r\n    if (getisToken && !isToken) {\r\n      config.headers['Authorization'] = 'Bearer ' + getisToken;\r\n    }\r\n\r\n    //2. get请求映射params参数\r\n    if (config.method === 'get' && config.params) {\r\n      let url = config.url + '?' + tansParams(config.params);\r\n      url = url.slice(0, -1);\r\n      config.params = {};\r\n      config.url = url;\r\n    }\r\n    //3. 是否需要防止数据重复提交\r\n    const isRepeatSubmit = (config.headers || {}).repeatSubmit === false;\r\n    if (!isRepeatSubmit && (config.method === 'post' || config.method === 'put')) {\r\n      // 需要阻止的请求组装对象\r\n      const requestObj = {\r\n        url: config.url,\r\n        data: typeof config.data === 'object' ? JSON.stringify(config.data) : config.data,\r\n        time: new Date().getTime(),\r\n      };\r\n      // 存储在本地的请求组装对象\r\n      const sessionObj = cache.session.getJSON('sessionObj');\r\n      if (sessionObj === undefined || sessionObj === null || sessionObj === '') {\r\n        cache.session.setJSON('sessionObj', requestObj);\r\n      } else {\r\n        const s_url = sessionObj.url; // 请求地址\r\n        const s_data = sessionObj.data; // 请求数据\r\n        const s_time = sessionObj.time; // 请求时间\r\n        const interval = 1000; // 间隔时间(ms)，小于此时间视为重复提交\r\n        if (s_data === requestObj.data && requestObj.time - s_time < interval && s_url === requestObj.url) {\r\n          const message = '数据正在处理，请勿重复提交';\r\n          Message.warning({\r\n            message,\r\n          });\r\n          return Promise.reject(new Error(message));\r\n        } else {\r\n          cache.session.setJSON('sessionObj', requestObj);\r\n        }\r\n      }\r\n    }\r\n\r\n    return config;\r\n  },\r\n  error => {\r\n    Promise.reject(error);\r\n  }\r\n);\r\n// 响应拦截器\r\ninstance.interceptors.response.use(\r\n  res => {\r\n    loadingInstance ? loadingInstance.close() : null;\r\n    //1. 未设置状态码则默认成功状态\r\n    const code = res.data.StatusCode || 200;\r\n    //2. 获取错误信息\r\n    const msg = errorCode[code] || res.data.Message || errorCode['default'];\r\n    //3. 二进制数据则直接返回\r\n    if (res.request.responseType === 'blob' || res.request.responseType === 'arraybuffer') {\r\n      return res.data;\r\n    }\r\n    // 4.处理不同状态码\r\n    if (code === 401) {\r\n      if (!isRelogin.show) {\r\n        isRelogin.show = true;\r\n        MessageBox.confirm('登录状态已过期，您可以继续留在该页面，或者重新登录', '系统提示', {\r\n          confirmButtonText: '重新登录',\r\n          cancelButtonText: '取消',\r\n          type: 'warning',\r\n        })\r\n          .then(() => {\r\n            isRelogin.show = false;\r\n            let sessionId = JSON.parse(window.localStorage.getItem('userInfo')).sessionId;\r\n            if (sessionId) {\r\n              axios({\r\n                method: 'get',\r\n                url: process.env.VUE_APP_BASE_API + 'sso/ssoauthurl',\r\n                params: { clientLoginUrl: process.env.VUE_APP_REDIRECTURL + 'redirect' },\r\n              }).then(res => {\r\n                window.open(res.data.Response, '_self');\r\n              });\r\n              removeWatermark();\r\n              this.$store.dispatch('user/logout');\r\n            } else {\r\n              store.dispatch('user/logout');\r\n              router.push(`/login`);\r\n            }\r\n          })\r\n          .catch(() => {\r\n            isRelogin.show = false;\r\n          });\r\n      }\r\n      return Promise.reject('无效的会话，或者会话已过期，请重新登录。');\r\n    } else if (code === 500 || code === 400 || code == 404) {\r\n      Message({\r\n        message: msg,\r\n        type: 'error',\r\n      });\r\n      return Promise.reject(new Error(msg));\r\n    } else if (code !== 200) {\r\n      Notification.error({\r\n        title: msg,\r\n      });\r\n      return Promise.reject('error');\r\n    } else {\r\n      return res.data;\r\n    }\r\n  },\r\n  error => {\r\n    // loadingInstance ? loadingInstance.close() : null;\r\n    // isRelogin.show = true;\r\n    // MessageBox.confirm('登录状态已过期，您可以继续留在该页面，或者重新登录', '系统提示', {\r\n    //   confirmButtonText: '重新登录',\r\n    //   cancelButtonText: '取消',\r\n    //   type: 'warning',\r\n    // })\r\n    //   .then(() => {\r\n    //     isRelogin.show = false;\r\n    //     store.dispatch('user/logout');\r\n    //     router.push(`/login`);\r\n    //   })\r\n    //   .catch(() => {\r\n    //     isRelogin.show = false;\r\n    //     // return Promise.reject(error);\r\n    //   });\r\n    let { message } = error;\r\n    if (message == 'Network Error') {\r\n      message = '后端接口连接异常';\r\n    } else if (message.includes('timeout')) {\r\n      message = '系统接口请求超时';\r\n    } else if (message.includes('Request failed with status code')) {\r\n      message = '系统接口' + message.substr(message.length - 3) + '异常';\r\n    }\r\n    Message({\r\n      message: message,\r\n      type: 'error',\r\n      duration: 5 * 1000,\r\n    });\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default instance;\r\n"],"mappings":"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"}]}