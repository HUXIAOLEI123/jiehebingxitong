{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\src\\views\\systemManage\\organizationpermissions\\components\\pageEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\src\\views\\systemManage\\organizationpermissions\\components\\pageEdit.vue","mtime":1678931188713},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678931310818},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\babel-loader\\lib\\index.js","mtime":1678931314285},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678931310818},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\vue-loader\\lib\\index.js","mtime":1678931316857}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CglnZXRMaXN0LAoJb3JnYW5pemF0aW9ucGVybWlzc2lvbnNEZXRhaWwsCglhZGRPcmdhbml6YXRpb25wZXJtaXNzaW9ucywKCUVkaXRvcmdhbml6YXRpb25wZXJtaXNzaW9ucwp9IGZyb20gIkAvYXBpL3N5c3RlbU1hbmFnZS9Pcmdhbml6YXRpb25QZXJtaXNzaW9uIjsKZXhwb3J0IGRlZmF1bHQgewoJZGF0YSgpIHsKCQlyZXR1cm4gewoJCQkvLyDooajljZXphY3nva4KCQkJZm9ybUNvbmZpZzogewoJCQkJdGl0bGU6ICIiLAoJCQkJdmlzaWJsZTogZmFsc2UsCgkJCQl3aWR0aDogIjcwJSIsCgkJCQlvcHQ6ICIiLAoJCQkJbG9hZGluZzogZmFsc2UsCgkJCQlyZWRlclZpZXc6IHRydWUKCQkJfSwKCQkJT3JnYW5pemF0aW9uUGVybWlzc2lvbkxpc3Q6IFtdLCAvL+acuuaehOaVsOe7hAoJCQlwcm9wc2xpc3Q6IHsKCQkJCXZhbHVlOiAiUGVybWlzc2lvbklkIiwKCQkJCWxhYmVsOiAiUGVybWlzc2lvbk5hbWUiLAoJCQkJY2hpbGRyZW46ICJjaGlsZHJlbiIsCgkJCQljaGVja1N0cmljdGx5OiB0cnVlLAoJCQkJZW1pdFBhdGg6IGZhbHNlLAoJCQl9LAoJCQkvLyDooajljZXmlbDmja4KCQkJZm9ybURhdGE6IHsKCQkJCVNvcnQ6ICIwIiwKCQkJCUlzQnV0dG9uOiBmYWxzZSwKCQkJCUVuYWJsZWQ6IHRydWUKCQkJfSwKCQkJZm9ybURhdGFDb3B5OiB7fSwKCQkJLy8g6aqM6K+B6KeE5YiZCgkJCWZvcm1SdWxlczoge30sCgkJfTsKCX0sCgljcmVhdGVkKCkgewoJCXRoaXMuc2V0Zm9ybVJ1bGVzKCkKCX0sCgltZXRob2RzOiB7CgkJLy8g6I635Y+W5py65p6E5L+h5oGv5YiX6KGoCgkJYXN5bmMgcXVlcnkoKSB7CgkJCWxldCByZXMgPSBhd2FpdCBnZXRMaXN0KHsKCQkJCVBhZ2VOdW1iZXI6IDEsCgkJCQlQYWdlU2l6ZTogOTk5OQoJCQl9KQoJCQl0aGlzLk9yZ2FuaXphdGlvblBlcm1pc3Npb25MaXN0ID0gdGhpcy5jb252ZXJ0KG51bGwsIHJlcy5SZXNwb25zZS5pdGVtcyk7CgkJfSwKCQkvL+mAkuW9kgoJCWNvbnZlcnQocGlkLCBhcnIpIHsKCQkJbGV0IHJlc3VsdGFyciA9IGFyci5maWx0ZXIocCA9PiBwLlBhcmVudElkID09IHBpZCk7CgkJCWlmIChyZXN1bHRhcnIubGVuZ3RoID4gMCkgewoJCQkJcmVzdWx0YXJyLmZvckVhY2goKGl0ZW0pID0+IHsKCQkJCQlpdGVtLmNoaWxkcmVuID0gW107CgkJCQkJaXRlbS5jaGlsZHJlbiA9IHRoaXMuY29udmVydChpdGVtLlBlcm1pc3Npb25JZCwgYXJyKQoJCQkJCWlmIChpdGVtLmNoaWxkcmVuLmxlbmd0aCA9PSAwKSBkZWxldGUgaXRlbS5jaGlsZHJlbgoJCQkJfSk7CgkJCX0KCQkJcmV0dXJuIHJlc3VsdGFycjsKCQl9LAoJCXNldGZvcm1SdWxlcygpIHsKCQkJbGV0IGFyciA9IFt7CgkJCQkJdHJpZ2dlcjogJ2JsdXInLAoJCQkJCW1lc3NhZ2U6ICLoj5zljZXlkI3np7AiLAoJCQkJCWtleTogIlBlcm1pc3Npb25OYW1lIgoJCQkJfSwKCQkJCXsKCQkJCQl0cmlnZ2VyOiAnYmx1cicsCgkJCQkJbWVzc2FnZTogIuiPnOWNlei3r+eUsSIsCgkJCQkJa2V5OiAiQ29kZSIKCQkJCX0sCgkJCQl7CgkJCQkJdHJpZ2dlcjogJ2JsdXInLAoJCQkJCW1lc3NhZ2U6ICLmmK/lkKbmjInpkq4iLAoJCQkJCWtleTogIklzQnV0dG9uIgoJCQkJfSwKCQkJCXsKCQkJCQl0cmlnZ2VyOiAnYmx1cicsCgkJCQkJbWVzc2FnZTogIuaYr+WQpua/gOa0uyIsCgkJCQkJa2V5OiAiRW5hYmxlZCIKCQkJCX0sCgkJCV0KCQkJZm9yIChsZXQgaXRlbSBvZiBhcnIpIHsKCQkJCWxldCBvYmogPSB7CgkJCQkJdHJpZ2dlcjogaXRlbS50cmlnZ2VyLAoJCQkJCXJlcXVpcmVkOiB0cnVlLAoJCQkJfQoJCQkJaWYgKGl0ZW0udHJpZ2dlciA9PSAnYmx1cicpIG9iai5tZXNzYWdlID0gaXRlbS5tZXNzYWdlICsgJ+S4jeiDveS4uuepuic7CgkJCQlpZiAoaXRlbS50cmlnZ2VyID09ICdjaGFuZ2UnKSBvYmoubWVzc2FnZSA9ICfor7fpgInmi6knICsgaXRlbS5tZXNzYWdlOwoJCQkJdGhpcy5mb3JtUnVsZXNbaXRlbS5rZXldID0gb2JqCgkJCX0KCQl9LAoJCS8v5YWz6Zet5by55qGGCgkJaGFuZGxlQ2xvc2UoKSB7CgkJCXRoaXMuJHJlZnMucmVmRm9ybS5yZXNldEZpZWxkcygpOwoJCQl0aGlzLmZvcm1Db25maWcudmlzaWJsZSA9IGZhbHNlOwoJCX0sCgkJLy8g5o+Q5LqkCgkJc3VibWl0KCkgewoJCQlsZXQgdGhhdCA9IHRoaXM7CgkJCXRoaXMuJHJlZnMucmVmRm9ybS52YWxpZGF0ZShhc3luYyAodmFsaWQpID0+IHsKCQkJCWlmICh2YWxpZCkgewoJCQkJCXRoYXQuZm9ybUNvbmZpZy5sb2FkaW5nID0gdHJ1ZTsKCQkJCQlpZiAodGhhdC5mb3JtQ29uZmlnLm9wdCA9PSAnYWRkJykgewoJCQkJCQlhd2FpdCBhZGRPcmdhbml6YXRpb25wZXJtaXNzaW9ucyh0aGF0LmZvcm1EYXRhKTsKCQkJCQkJdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLmlrDlop7miJDlip8iKTsKCQkJCQkJdGhhdC4kZW1pdCgic3VibWl0IikKCQkJCQkJdGhhdC5oYW5kbGVDbG9zZSgpCgkJCQkJfQoJCQkJCWlmICh0aGF0LmZvcm1Db25maWcub3B0ID09ICdlZGl0JykgewoJCQkJCQlsZXQgYXJyID0gdGhhdC4kdXRpbHNGdW4uY29tcGFyZU9iaih0aGF0LmZvcm1EYXRhLCB0aGF0LmZvcm1EYXRhQ29weSkKCQkJCQkJYXdhaXQgRWRpdG9yZ2FuaXphdGlvbnBlcm1pc3Npb25zKHsKCQkJCQkJCVBlcm1pc3Npb25JZDogdGhhdC5mb3JtRGF0YS5QZXJtaXNzaW9uSWQsCgkJCQkJCQlkYXRhOiBhcnIKCQkJCQkJfSkKCQkJCQkJdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLnvJbovpHmiJDlip8iKTsKCQkJCQkJdGhhdC4kZW1pdCgic3VibWl0IikKCQkJCQkJdGhhdC5oYW5kbGVDbG9zZSgpCgkJCQkJfQoJCQkJfQoJCQl9KTsKCQl9LAoJCS8vIOWIneWni+WMluW8ueahhu+8jOiOt+WPluivpuaDhQoJCWFzeW5jIGdldERldGFpbChwYXJhbSkgewoJCQlpZiAocGFyYW0ub3B0ID09ICIiIHx8IHBhcmFtLm9wdCA9PSBudWxsKSB7CgkJCQlyZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcigi5pyq55+l5pON5L2cIik7CgkJCX0KCQkJdGhpcy5xdWVyeSgpOwoJCQl0aGlzLiRuZXh0VGljaygoKSA9PiB7CgkJCQl0aGlzLmZvcm1EYXRhID0gewoJCQkJCS4uLnsKCQkJCQkJU29ydDogIjAiLAoJCQkJCQlJc0J1dHRvbjogZmFsc2UsCgkJCQkJCUVuYWJsZWQ6IHRydWUsCgkJCQkJCVBhcmVudElkOiBwYXJhbS5QYXJlbnRJZAoJCQkJCX0KCQkJCX0KCQkJfSkKCQkJdGhpcy5mb3JtQ29uZmlnID0gT2JqZWN0LmFzc2lnbih0aGlzLmZvcm1Db25maWcsIHBhcmFtKTsKCQkJdGhpcy4kc2V0KHRoaXMuZm9ybURhdGEsICdQYXJlbnRJZCcsIHBhcmFtLlBhcmVudElkKQoJCQkvLyDnvJbovpHkuYvliY3lhYjljrvmn6Xor6Lor6bmg4UKCQkJaWYgKHBhcmFtLm9wdCA9PT0gImVkaXQiKSB7CgkJCQlsZXQgcmVzID0gYXdhaXQgb3JnYW5pemF0aW9ucGVybWlzc2lvbnNEZXRhaWwocGFyYW0uUGVybWlzc2lvbklkKTsKCQkJCXRoaXMuJG5leHRUaWNrKCgpID0+IHsKCQkJCQl0aGlzLmZvcm1EYXRhID0gewoJCQkJCQkuLi5yZXMuUmVzcG9uc2UKCQkJCQl9CgkJCQl9KQoJCQkJdGhpcy5mb3JtRGF0YUNvcHkgPSByZXMuUmVzcG9uc2UKCQkJfQoJCQl0aGlzLmZvcm1Db25maWcubG9hZGluZyA9IGZhbHNlOwoJCX0sCgl9LAp9Owo="},{"version":3,"sources":["pageEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"pageEdit.vue","sourceRoot":"src/views/systemManage/organizationpermissions/components","sourcesContent":["<template>\r\n\t<el-dialog :title=\"formConfig.title\" :visible.sync=\"formConfig.visible\" :width=\"formConfig.width\"\r\n\t\t:close-on-click-modal=\"false\" :close-on-press-escape=\"false\" @close=\"handleClose\" top=\"20vh\">\r\n\t\t<div slot=\"title\" class=\"dialog-title\">\r\n\t\t\t<div class=\"sectionstly\"></div>\r\n\t\t\t<span class=\"title-text\">{{formConfig.title}}</span>\r\n\t\t\t<div class=\"button-right\">\r\n\t\t\t\t<span class=\"title-close\" @click=\"handleClose\"></span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<el-form :model=\"formData\" :rules=\"formRules\" v-loading=\"formConfig.loading\" ref=\"refForm\" label-width=\"130px\"\r\n\t\t\tclass=\"form_row\">\r\n\t\t\t<div class=\"el-dialog-div\" style=\"height: 50vh\">\r\n\t\t\t\t<el-row>\r\n\t\t\t\t\t<el-col :span=\"24\">\r\n\t\t\t\t\t\t<el-form-item label=\"上级菜单:\" prop=\"ParentId\">\r\n\t\t\t\t\t\t\t<el-cascader style=\"width: 100%\" :options=\"OrganizationPermissionList\" :props=\"propslist\"\r\n\t\t\t\t\t\t\t\tv-model=\"formData.ParentId\" :show-all-levels=\"false\" clearable></el-cascader>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</el-row>\r\n\t\t\t\t<el-row>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"菜单名称\" prop=\"PermissionName\">\r\n\t\t\t\t\t\t\t<el-input v-model=\"formData.PermissionName\"></el-input>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"菜单路径:\" prop=\"Code\">\r\n\t\t\t\t\t\t\t<el-input v-model=\"formData.Code\"></el-input>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</el-row>\r\n\t\t\t\t<el-row>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"图标:\" prop=\"Icon\">\r\n\t\t\t\t\t\t\t<el-input v-model=\"formData.Icon\"></el-input>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"排序:\" prop=\"OrderSort\">\r\n\t\t\t\t\t\t\t<el-input v-model=\"formData.OrderSort\"></el-input>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</el-row>\r\n\t\t\t\t<el-row>\r\n\t\t\t\t\t<el-col :span=\"6\">\r\n\t\t\t\t\t\t<el-form-item label=\"是否隐藏菜单:\" prop=\"IsHide\">\r\n\t\t\t\t\t\t\t<el-checkbox v-model=\"formData.IsHide\"></el-checkbox>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"6\">\r\n\t\t\t\t\t\t<el-form-item label=\"是否按钮:\" prop=\"IsButton\">\r\n\t\t\t\t\t\t\t<el-checkbox v-model=\"formData.IsButton\"></el-checkbox>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"按钮事件:\" prop=\"Func\">\r\n\t\t\t\t\t\t\t<el-input v-model=\"formData.Func\"></el-input>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</el-row>\r\n\t\t\t\t<el-row>\r\n\t\t\t\t\t<el-col :span=\"6\">\r\n\t\t\t\t\t\t<el-form-item label=\"是否保持状态:\" prop=\"IsKeepAlive\">\r\n\t\t\t\t\t\t\t<el-checkbox v-model=\"formData.IsKeepAlive\"></el-checkbox>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"6\">\r\n\t\t\t\t\t\t<el-form-item label=\"是否激活:\" prop=\"Enabled\">\r\n\t\t\t\t\t\t\t<el-checkbox v-model=\"formData.Enabled\"></el-checkbox>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</el-row>\r\n\t\t\t\t<el-row>\r\n\t\t\t\t\t<el-col :span=\"24\">\r\n\t\t\t\t\t\t<el-form-item label=\"描述:\" prop=\"Description\">\r\n\t\t\t\t\t\t\t<el-input v-model=\"formData.Description\" type=\"textarea\"></el-input>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</el-row>\r\n\t\t\t</div>\r\n\t\t</el-form>\r\n\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t<el-button class=\"cancelbtn\" @click=\"handleClose\">取 消</el-button>\r\n\t\t\t<el-button  class=\"savebtn\"  type=\"primary\" @click=\"submit\">确 定</el-button>\r\n\t\t</span>\r\n\t</el-dialog>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tgetList,\r\n\t\torganizationpermissionsDetail,\r\n\t\taddOrganizationpermissions,\r\n\t\tEditorganizationpermissions\r\n\t} from \"@/api/systemManage/OrganizationPermission\";\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t// 表单配置\r\n\t\t\t\tformConfig: {\r\n\t\t\t\t\ttitle: \"\",\r\n\t\t\t\t\tvisible: false,\r\n\t\t\t\t\twidth: \"70%\",\r\n\t\t\t\t\topt: \"\",\r\n\t\t\t\t\tloading: false,\r\n\t\t\t\t\trederView: true\r\n\t\t\t\t},\r\n\t\t\t\tOrganizationPermissionList: [], //机构数组\r\n\t\t\t\tpropslist: {\r\n\t\t\t\t\tvalue: \"PermissionId\",\r\n\t\t\t\t\tlabel: \"PermissionName\",\r\n\t\t\t\t\tchildren: \"children\",\r\n\t\t\t\t\tcheckStrictly: true,\r\n\t\t\t\t\temitPath: false,\r\n\t\t\t\t},\r\n\t\t\t\t// 表单数据\r\n\t\t\t\tformData: {\r\n\t\t\t\t\tSort: \"0\",\r\n\t\t\t\t\tIsButton: false,\r\n\t\t\t\t\tEnabled: true\r\n\t\t\t\t},\r\n\t\t\t\tformDataCopy: {},\r\n\t\t\t\t// 验证规则\r\n\t\t\t\tformRules: {},\r\n\t\t\t};\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.setformRules()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 获取机构信息列表\r\n\t\t\tasync query() {\r\n\t\t\t\tlet res = await getList({\r\n\t\t\t\t\tPageNumber: 1,\r\n\t\t\t\t\tPageSize: 9999\r\n\t\t\t\t})\r\n\t\t\t\tthis.OrganizationPermissionList = this.convert(null, res.Response.items);\r\n\t\t\t},\r\n\t\t\t//递归\r\n\t\t\tconvert(pid, arr) {\r\n\t\t\t\tlet resultarr = arr.filter(p => p.ParentId == pid);\r\n\t\t\t\tif (resultarr.length > 0) {\r\n\t\t\t\t\tresultarr.forEach((item) => {\r\n\t\t\t\t\t\titem.children = [];\r\n\t\t\t\t\t\titem.children = this.convert(item.PermissionId, arr)\r\n\t\t\t\t\t\tif (item.children.length == 0) delete item.children\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn resultarr;\r\n\t\t\t},\r\n\t\t\tsetformRules() {\r\n\t\t\t\tlet arr = [{\r\n\t\t\t\t\t\ttrigger: 'blur',\r\n\t\t\t\t\t\tmessage: \"菜单名称\",\r\n\t\t\t\t\t\tkey: \"PermissionName\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttrigger: 'blur',\r\n\t\t\t\t\t\tmessage: \"菜单路由\",\r\n\t\t\t\t\t\tkey: \"Code\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttrigger: 'blur',\r\n\t\t\t\t\t\tmessage: \"是否按钮\",\r\n\t\t\t\t\t\tkey: \"IsButton\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttrigger: 'blur',\r\n\t\t\t\t\t\tmessage: \"是否激活\",\r\n\t\t\t\t\t\tkey: \"Enabled\"\r\n\t\t\t\t\t},\r\n\t\t\t\t]\r\n\t\t\t\tfor (let item of arr) {\r\n\t\t\t\t\tlet obj = {\r\n\t\t\t\t\t\ttrigger: item.trigger,\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (item.trigger == 'blur') obj.message = item.message + '不能为空';\r\n\t\t\t\t\tif (item.trigger == 'change') obj.message = '请选择' + item.message;\r\n\t\t\t\t\tthis.formRules[item.key] = obj\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//关闭弹框\r\n\t\t\thandleClose() {\r\n\t\t\t\tthis.$refs.refForm.resetFields();\r\n\t\t\t\tthis.formConfig.visible = false;\r\n\t\t\t},\r\n\t\t\t// 提交\r\n\t\t\tsubmit() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tthis.$refs.refForm.validate(async (valid) => {\r\n\t\t\t\t\tif (valid) {\r\n\t\t\t\t\t\tthat.formConfig.loading = true;\r\n\t\t\t\t\t\tif (that.formConfig.opt == 'add') {\r\n\t\t\t\t\t\t\tawait addOrganizationpermissions(that.formData);\r\n\t\t\t\t\t\t\tthis.$message.success(\"新增成功\");\r\n\t\t\t\t\t\t\tthat.$emit(\"submit\")\r\n\t\t\t\t\t\t\tthat.handleClose()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (that.formConfig.opt == 'edit') {\r\n\t\t\t\t\t\t\tlet arr = that.$utilsFun.compareObj(that.formData, that.formDataCopy)\r\n\t\t\t\t\t\t\tawait Editorganizationpermissions({\r\n\t\t\t\t\t\t\t\tPermissionId: that.formData.PermissionId,\r\n\t\t\t\t\t\t\t\tdata: arr\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tthis.$message.success(\"编辑成功\");\r\n\t\t\t\t\t\t\tthat.$emit(\"submit\")\r\n\t\t\t\t\t\t\tthat.handleClose()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 初始化弹框，获取详情\r\n\t\t\tasync getDetail(param) {\r\n\t\t\t\tif (param.opt == \"\" || param.opt == null) {\r\n\t\t\t\t\treturn this.$message.error(\"未知操作\");\r\n\t\t\t\t}\r\n\t\t\t\tthis.query();\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tthis.formData = {\r\n\t\t\t\t\t\t...{\r\n\t\t\t\t\t\t\tSort: \"0\",\r\n\t\t\t\t\t\t\tIsButton: false,\r\n\t\t\t\t\t\t\tEnabled: true,\r\n\t\t\t\t\t\t\tParentId: param.ParentId\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tthis.formConfig = Object.assign(this.formConfig, param);\r\n\t\t\t\tthis.$set(this.formData, 'ParentId', param.ParentId)\r\n\t\t\t\t// 编辑之前先去查询详情\r\n\t\t\t\tif (param.opt === \"edit\") {\r\n\t\t\t\t\tlet res = await organizationpermissionsDetail(param.PermissionId);\r\n\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\tthis.formData = {\r\n\t\t\t\t\t\t\t...res.Response\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.formDataCopy = res.Response\r\n\t\t\t\t}\r\n\t\t\t\tthis.formConfig.loading = false;\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n</script>\r\n"]}]}