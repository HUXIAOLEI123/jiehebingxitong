{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\src\\views\\patientManagement\\unassignedrecord\\components\\CaseEdit.vue?vue&type=style&index=0&id=331d7046&lang=scss&scoped=true&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\src\\views\\patientManagement\\unassignedrecord\\components\\CaseEdit.vue","mtime":1678931188672},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\css-loader\\dist\\cjs.js","mtime":1678931311747},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1678931317953},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\postcss-loader\\src\\index.js","mtime":1678931314216},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1678931310798},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678931310818},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\vue-loader\\lib\\index.js","mtime":1678931316857}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmNvbnRlbnRib3ggewoJaGVpZ2h0OiA2MjBweDsKfQoKLmVsLWNvbG5hbWUgewoJbWFyZ2luLWxlZnQ6IDYwcHg7CgltYXJnaW4tYm90dG9tOiAyMHB4Owp9Cg=="},{"version":3,"sources":["CaseEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAklBA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"CaseEdit.vue","sourceRoot":"src/views/patientManagement/patientManagement/components","sourcesContent":["<template>\r\n\t<el-dialog :title=\"title\" :visible.sync=\"dialogVisible\" top=\"0vh\" :close-on-click-modal=\"false\" width=\"50%\"\r\n\t\t@close=\"close\">\r\n\t\t<div slot=\"title\" class=\"dialog-title\">\r\n\t\t\t<div class=\"sectionstly\"></div>\r\n\t\t\t<span class=\"title-text\">{{ title }}</span>\r\n\t\t\t<div class=\"button-right\">\r\n\t\t\t\t<span class=\"title-close\" @click=\"close\"></span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<!-- <div class=\"heaer\"></div> -->\r\n\t\t<div class=\"contentbox\">\r\n\t\t\t<el-form class=\"form_row\" ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"120px\">\r\n\t\t\t\t<div class=\"detailstitlo\">\r\n\t\t\t\t\t<p class=\"xqtitolstyle\">档案信息</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<el-row>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"姓名\">\r\n\t\t\t\t\t\t\t<el-input v-model=\"Personform.Name\" disabled placeholder=\"\"></el-input>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"证件号\">\r\n\t\t\t\t\t\t\t<el-input v-model=\"Personform.CardNo\" disabled placeholder=\"\"></el-input>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</el-row>\r\n\t\t\t\t<el-row>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"机构名称\">\r\n\t\t\t\t\t\t\t<el-input v-model=\"Personform.DiagnosisOrganizationName\" disabled placeholder=\"\"></el-input>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"登记日期\">\r\n\t\t\t\t\t\t\t<el-input v-model=\"Personform.RegisterTime\" disabled placeholder=\"\"></el-input>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</el-row>\r\n\t\t\t\t<div class=\"detailstitlo\">\r\n\t\t\t\t\t<p class=\"xqtitolstyle\">结案信息</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<!-- + -->\r\n\t\t\t\t<el-row>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"结案人员\">\r\n\t\t\t\t\t\t\t<el-input v-model=\"form.EvaluationDoctorName\" disabled placeholder=\"请输入内容\"></el-input>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"建档日期\">\r\n\t\t\t\t\t\t\t<el-date-picker v-model=\"form.EvaluationDate\" align=\"center\" type=\"date\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"选择日期时间\"></el-date-picker>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</el-row>\r\n\t\t\t\t<!-- + -->\r\n\t\t\t\t<el-row>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"停止治疗时间\">\r\n\t\t\t\t\t\t\t<el-date-picker v-model=\"form.StopTime\" align=\"center\" type=\"datetime\" placeholder=\"选择日期\">\r\n\t\t\t\t\t\t\t</el-date-picker>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<!--  -->\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"停止治疗原因\" prop=\"StopResult\">\r\n\t\t\t\t\t\t\t<el-select v-model=\"form.StopResult\" placeholder=\"请输入内容\">\r\n\t\t\t\t\t\t\t\t<el-option v-for=\"item in A0030\" :key=\"item.DetailsCode\" :label=\"item.DetailsName\"\r\n\t\t\t\t\t\t\t\t\t:value=\"item.DetailsCode\"></el-option>\r\n\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</el-row>\r\n\t\t\t\t<!-- + -->\r\n\t\t\t\t<el-row>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"应访视次数\">\r\n\t\t\t\t\t\t\t<el-input v-model=\"Personform.VisitNumber\" disabled></el-input>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<!--  -->\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"实际访视次数\">\r\n\t\t\t\t\t\t\t<el-input v-model=\"Personform.ActualVisitNumber\" disabled></el-input>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</el-row>\r\n\r\n\t\t\t\t<!-- + -->\r\n\t\t\t\t<el-row>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"应服药次数\">\r\n\t\t\t\t\t\t\t<el-input v-model=\"Personform.TakeMedicineNumber\" disabled></el-input>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<!--  -->\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"实际服药次数\">\r\n\t\t\t\t\t\t\t<el-input v-model=\"Personform.ActualTakeMedicineNumber\" disabled></el-input>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</el-row>\r\n\r\n\t\t\t\t<!-- + -->\r\n\t\t\t\t<el-row>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"服药率\">\r\n\t\t\t\t\t\t\t<el-input v-model=\"Personform.MedicationRate + '%'\" placeholder=\"请输入内容\" disabled></el-input>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"是否规范\">\r\n\t\t\t\t\t\t\t<el-input v-model=\"form.IsStandard?'是':'否'\" placeholder=\"请输入内容\" disabled></el-input>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<!--  -->\r\n\t\t\t\t\t<!-- <el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"是否电话随访\">\r\n\t\t\t\t\t\t\t<el-select v-model=\"form.IsPhone\" placeholder=\"请选择\">\r\n\t\t\t\t\t\t\t\t<el-option label=\"是\" :value='true'></el-option>\r\n\t\t\t\t\t\t\t\t<el-option label=\"否\" :value='false'></el-option>\r\n\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col> -->\r\n\t\t\t\t</el-row>\r\n\r\n\t\t\t\t<!-- + -->\r\n\t\t\t\t<el-row>\r\n\t\t\t\t\t<!-- <el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"是否就诊\">\r\n\t\t\t\t\t\t\t<el-select v-model=\"form.IsDiagnosis\" placeholder=\"请选择\">\r\n\t\t\t\t\t\t\t\t<el-option label=\"是\" :value='true'></el-option>\r\n\t\t\t\t\t\t\t\t<el-option label=\"否\" :value='false'></el-option>\r\n\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col> -->\r\n\t\t\t\t\t<!--  -->\r\n\r\n\t\t\t\t\t<!-- <el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"是否确认结果\">\r\n\t\t\t\t\t\t\t<el-select v-model=\"form.IsResult\" placeholder=\"请选择活动区域\">\r\n\t\t\t\t\t\t\t\t<el-option label=\"是\" :value='true'></el-option>\r\n\t\t\t\t\t\t\t\t<el-option label=\"否\" :value='false'></el-option>\r\n\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col> -->\r\n\t\t\t\t</el-row>\r\n\t\t\t\t<el-row v-if=\"Isfufa\">\r\n\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t<el-form-item label=\"治疗方案\" prop=\"TreatmentPlanId\">\r\n\t\t\t\t\t\t\t<el-select v-model=\"form.TreatmentPlanId\" placeholder=\"请输入内容\">\r\n\t\t\t\t\t\t\t\t<el-option v-for=\"item in TreatmentPlanId\" :key=\"item.TreatmentPlanId\"\r\n\t\t\t\t\t\t\t\t\t:label=\"item.TreatmentPlanName\" :value=\"item.TreatmentPlanId\"></el-option>\r\n\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"10\">\r\n\t\t\t\t\t\t<el-button style=\"margin-left: 30px\" type=\"primary\" round @click=\"handlerEdit\">新增治疗方案\r\n\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</el-row>\r\n\t\t\t\t<el-row v-if=\"Isfufa\">\r\n\t\t\t\t\t<el-col :span=\"4\" class=\"el-colname\">\r\n\t\t\t\t\t\t<label>强化期(月):</label>\r\n\t\t\t\t\t\t<span>{{ StrengtheningPeriodMonth }}</span>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"6\">\r\n\t\t\t\t\t\t<label>强化期服药频率(次/天):</label>\r\n\t\t\t\t\t\t<span>{{ StrengtheningPeriodDMT }}</span>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"6\">\r\n\t\t\t\t\t\t<label>巩固期(月):</label>\r\n\t\t\t\t\t\t<span>{{ ConsolidationPeriodMonth }}</span>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"6\">\r\n\t\t\t\t\t\t<label>巩固期服药频率(次/天):</label>\r\n\t\t\t\t\t\t<span>{{ ConsolidationPeriodDMT }}</span>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</el-row>\r\n\r\n\t\t\t\t<!-- + -->\r\n\t\t\t\t<el-row>\r\n\t\t\t\t   \r\n\t\t\t\t\t<el-col :span=\"24\"> \r\n\t\t\t\t\t\t<el-form-item label=\"备注\">\r\n\t\t\t\t\t\t\t<el-input v-model=\"form.Remarks\" type=\"textarea\" placeholder=\"请输入内容\"></el-input>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n                     \r\n\t\t\t\t\t<!-- <el-col :span=\"10\">\r\n\t\t          <el-form-item label=\"治疗方案\" >\r\n\t\t            <el-select v-model=\"form.TreatmentPlanId\" placeholder=\"请输入内容\">\r\n\t\t              <el-option v-for=\"item in TreatmentPlanId\" :key=\"item.TreatmentPlanName\" :label=\"item.TreatmentPlanName\"\r\n\t\t                :value=\"item.TreatmentPlanName\">\r\n\t\t              </el-option>\r\n\t\t            </el-select>\r\n\t\t          </el-form-item>\r\n\t\t        </el-col> -->\r\n\t\t\t\t</el-row>\r\n\t\t\t</el-form>\r\n\t\t</div>\r\n\t\t<OptionsEdit ref=\"optionsedit\" @sumiteprogramme=\"funtreatmentplantemplates\"></OptionsEdit>\r\n\t\t<div slot=\"footer\">\r\n\t\t\t<el-button class=\"cancelbtn\" @click=\"close\">取 消</el-button>\r\n\t\t\t<el-button class=\"savebtn\" type=\"primary\" @click=\"handlerSave\">提 交</el-button>\r\n\t\t</div>\r\n\t</el-dialog>\r\n</template>\r\n<script>\r\n\timport {\r\n\t\tusedictionarydetails\r\n\t} from '@/api/dict.js'\r\n\timport {\r\n\t\ttreatmentplantemplates\r\n\t} from '@/api/TreatmentPlanTemplate.js'\r\n\timport {\r\n\t\tpulmonaryclosesvisitandmedicine,\r\n\t\taddapplysettlement,\r\n\t\tpulmonarycloseslist,\r\n\t\tupdatatuberculosisModify\r\n\t} from '@/api/PulmonaryClose.js'\r\n\timport {\r\n\t\ttuberculosisdiagnosissmsg\r\n\t} from '@/api/TuberculosisDiagnosis.js'\r\n\timport {\r\n\t\ttuberculosisdiagnosiss,\r\n\t\taddtuberculosisdiagnosiss,\r\n\t\tedittuberculosisdiagnosiss,\r\n\t\tdeletetuberculosisdiagnosiss,\r\n\t\ttuberculosisdiagnosissexcel\r\n\t} from '@/api/TuberculosisDiagnosis.js'\r\n\timport OptionsEdit from '../components/tabComponents/echeatComponents/optionsEdit.vue' //./echeatComponents/optionsEdit.vue\r\n\texport default {\r\n\t\tname: \"Edit\",\r\n\t\tcomponents: {\r\n\t\t\tOptionsEdit\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttitle: \"\",\r\n\t\t\t\t// 弹窗的开关\r\n\t\t\t\tdialogVisible: false,\r\n\t\t\t\tflag: \"\",\r\n\t\t\t\tIsfufa: false,\r\n\t\t\t\tStrengtheningPeriodMonth: '',\r\n\t\t\t\tStrengtheningPeriodDMT: '',\r\n\t\t\t\tConsolidationPeriodMonth: '',\r\n\t\t\t\tConsolidationPeriodDMT: '',\r\n\t\t\t\tform: {\r\n\t\t\t\t\tStopTime: '',\r\n\t\t\t\t\tStopResult: '',\r\n\t\t\t\t\tIsPhone: null,\r\n\t\t\t\t\tIsDiagnosis: null,\r\n\t\t\t\t\tIsResult: null,\r\n\t\t\t\t\tRemarks: '',\r\n\t\t\t\t\tIsStandard: null,\r\n\t\t\t\t},\r\n\t\t\t\tTreatmentPlanId: [],\r\n\t\t\t\tIDS: {},\r\n\t\t\t\tcopyform: {},\r\n\t\t\t\tPersonform: {}, //次数\r\n\t\t\t\tpubform: {},\r\n\t\t\t\t//  表单验证\r\n\t\t\t\trules: {\r\n\r\n\r\n\t\t\t\t\tFileNumber: [{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: \"请输入\",\r\n\t\t\t\t\t\ttrigger: \"blur\"\r\n\t\t\t\t\t}, ],\r\n\r\n\t\t\t\t\tName: [{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: \"请输入\",\r\n\t\t\t\t\t\ttrigger: \"blur\"\r\n\t\t\t\t\t}, ],\r\n\r\n\t\t\t\t\tCardNo: [{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: \"请输入\",\r\n\t\t\t\t\t\ttrigger: \"blur\"\r\n\t\t\t\t\t}, ],\r\n\r\n\t\t\t\t\tPhone: [{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: \"请输入\",\r\n\t\t\t\t\t\ttrigger: \"blur\"\r\n\t\t\t\t\t}, ],\r\n\r\n\t\t\t\t\tEvaluationDate: [{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: \"请输入\",\r\n\t\t\t\t\t\ttrigger: \"change\"\r\n\t\t\t\t\t}, ],\r\n\r\n\t\t\t\t\tEvaluationDoctor: [{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: \"请输入\",\r\n\t\t\t\t\t\ttrigger: \"change\"\r\n\t\t\t\t\t}, ],\r\n\r\n\t\t\t\t\tStopTime: [{\r\n\t\t\t\t\t\ttype: 'string',\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: \"请输入\",\r\n\t\t\t\t\t\ttrigger: \"change\"\r\n\t\t\t\t\t}, ],\r\n\r\n\t\t\t\t\tStopResult: [{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: \"请输入\",\r\n\t\t\t\t\t\ttrigger: \"change\"\r\n\t\t\t\t\t}, ],\r\n\r\n\t\t\t\t\tVisitNumber: [{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: \"请输入\",\r\n\t\t\t\t\t\ttrigger: \"blur\"\r\n\t\t\t\t\t}, ],\r\n\r\n\t\t\t\t\tActualVisitNumber: [{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: \"请输入\",\r\n\t\t\t\t\t\ttrigger: \"blur\"\r\n\t\t\t\t\t}, ],\r\n\r\n\t\t\t\t\tTakeMedicineNumber: [{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: \"请输入\",\r\n\t\t\t\t\t\ttrigger: \"blur\"\r\n\t\t\t\t\t}, ],\r\n\r\n\t\t\t\t\tActualTakeMedicineNumber: [{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: \"请输入\",\r\n\t\t\t\t\t\ttrigger: \"blur\"\r\n\t\t\t\t\t}, ],\r\n\r\n\t\t\t\t\tMedicationRate: [{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: \"请输入\",\r\n\t\t\t\t\t\ttrigger: \"blur\"\r\n\t\t\t\t\t}, ],\r\n\r\n\t\t\t\t\tIsPhone: [{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: \"请输入\",\r\n\t\t\t\t\t\ttrigger: \"change\"\r\n\t\t\t\t\t}, ],\r\n\t\t\t\t\tIsDiagnosis: [{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: \"请输入\",\r\n\t\t\t\t\t\ttrigger: \"change\"\r\n\t\t\t\t\t}, ],\r\n\t\t\t\t\tIsResult: [{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: \"请输入\",\r\n\t\t\t\t\t\ttrigger: \"change\"\r\n\t\t\t\t\t}, ],\r\n\r\n\t\t\t\t\tRemarks: [{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: \"请输入\",\r\n\t\t\t\t\t\ttrigger: \"blur\"\r\n\t\t\t\t\t}, ],\r\n\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tdictarr: [],\r\n\t\t\t\tA0001: [],\r\n\t\t\t\tA0030: [],\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tasync created() {\r\n\t\t\tawait this.funtreatmentplantemplates()\r\n\t\t\tawait this.funusedictionarydetails()\r\n\t\t\tawait this.fundictlist()\r\n\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tasync funusedictionarydetails(params) {\r\n\t\t\t\tconst res = await usedictionarydetails({\r\n\t\t\t\t\tCategoryCode: ['A0001', 'A0030'],\r\n\t\t\t\t\tPageNumber: 1,\r\n\t\t\t\t\tPageSize: 90\r\n\t\t\t\t})\r\n\t\t\t\tlet {\r\n\t\t\t\t\tStatusCode,\r\n\t\t\t\t\tMessage\r\n\t\t\t\t} = res\r\n\t\t\t\tif (!res || StatusCode !== 200) {\r\n\t\t\t\t\treturn this.$baseMessage(Message || '数据获取失败', 'error')\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.dictarr = res.Response.items\r\n\r\n\t\t\t},\r\n\t\t\t//获取患者信息\r\n\t\t\tasync tuberculosisdiagnosissmsglist() {\r\n\t\t\t\tconst res = await tuberculosisdiagnosissmsg(this.IDS.DiagnosisId)\r\n\t\t\t\tres.Response.RegisterTime = res.Response.RegisterTime.slice(0, 10);\r\n\t\t\t\t// this.pubform = res.Response;\r\n\t\t\t\tthis.Personform = Object.assign(this.Personform, res.Response);\r\n\r\n\t\t\t},\r\n\t\t\t//根据主键获取全部信息\r\n\t\t\tasync pulmonarycloseslistmsg() {\r\n\t\t\t\tconst res = await pulmonarycloseslist(this.IDS.DiagnosisId, this.IDS.closeId)\r\n\t\t\t\tthis.form = {\r\n\t\t\t\t\t...res.Response\r\n\t\t\t\t}\r\n\t\t\t\tthis.copyform = {\r\n\t\t\t\t\t...res.Response\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//获取次数\r\n\t\t\tasync pulmonaryclosesvisitandmedicinelist() {\r\n\t\t\t\tconst res = await pulmonaryclosesvisitandmedicine(this.IDS.DiagnosisId)\r\n\t\t\t\tlet MedicationRate = Number(res.Response.ActualTakeMedicineNumber) / Number(res.Response\r\n\t\t\t\t\t.TakeMedicineNumber)\r\n\t\t\t\tthis.Personform = res.Response;\r\n\t\t\t\t// this.Personform.MedicationRate = MedicationRate.toFixed(2) * 100;\r\n\t\t\t\tif (MedicationRate.toFixed(2) < 1) {\r\n\t\t\t\t\tthis.form.IsStandard = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.form.IsStandard = true;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//新增治疗方案\r\n\t\t\thandlerEdit(flag, data) {\r\n\t\t\t\tdata = this.TreatmentPlanId;\r\n\t\t\t\tthis.$refs.optionsedit.show(flag, data)\r\n\t\t\t},\r\n\t\t\t// 字典数据处理\r\n\t\t\tfundictlist() {\r\n\t\t\t\tthis.dictarr.forEach(item => {\r\n\t\t\t\t\tif (item.CategoryCode == 'A0001') {\r\n\t\t\t\t\t\tthis.A0001.push(item)\r\n\r\n\t\t\t\t\t} else if (item.CategoryCode == 'A0030') {\r\n\t\t\t\t\t\tthis.A0030.push(item)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t},\r\n\t\t\t// 治疗方案\r\n\t\t\tasync funtreatmentplantemplates(params) {\r\n\t\t\t\tconst res = await treatmentplantemplates(params)\r\n\t\t\t\tthis.TreatmentPlanId = res.Response.items\r\n\t\t\t},\r\n\r\n\t\t\t// 确认新增\r\n\t\t\tasync show(flag, data) {\r\n\t\t\t\tthis.dialogVisible = true;\r\n\t\t\t\tthis.flag = flag;\r\n\t\t\t\tif (this.flag == 'case') {\r\n\t\t\t\t\tthis.title = \"添加结案信息\";\r\n\t\t\t\t\tthis.Isfufa = false;\r\n\t\t\t\t\tthis.IDS.DiagnosisId = data\r\n\t\t\t\t\tthis.form.EvaluationDoctorName = this.$utilsFun.getUserInfo().real_Name; //给结案人员默认当前人\r\n\t\t\t\t\tthis.form.EvaluationDoctor = this.$utilsFun.getUserInfo().identifier;\r\n\t\t\t\t\tthis.form.AdminOrganizationName = this.$utilsFun.getUserInfo().authOrgName;\r\n\t\t\t\t\tthis.form.AdminOrganization = this.$utilsFun.getUserInfo().authOrgId\r\n\t\t\t\t\tvar datetime = new Date();\r\n\t\t\t\t\tvar year = datetime.getFullYear(); //获取完整的年份(4位,如:1970)\r\n\t\t\t\t\tvar month = datetime.getMonth() + 1; //获取月份(返回0-11,0代表1月,用的时候记得加上1)\r\n\t\t\t\t\tvar date = datetime.getDate(); //获取日(返回1-31)\r\n\t\t\t\t\t//判断小于等于9月的时候在月份前加一个\"0\"\r\n\t\t\t\t\tif (month <= 9) {\r\n\t\t\t\t\t\tmonth = \"0\" + month;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//判断小于等于9号的时候在天数前加一个\"0\"\r\n\t\t\t\t\tif (date <= 9) {\r\n\t\t\t\t\t\tdate = \"0\" + date;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.form.EvaluationDate = year + \"-\" + month + \"-\" + date; //给建档时间默认当前\r\n\t\t\t\t\tthis.form.StopTime = new Date();\r\n\t\t\t\t\t// this.IDS.TreatmentPlanId = data.TreatmentPlanId\r\n\t\t\t\t\tawait this.pulmonaryclosesvisitandmedicinelist();\r\n\t\t\t\t\tawait this.tuberculosisdiagnosissmsglist();\r\n\r\n\t\t\t\t} else if (this.flag == 'edit') {\r\n\t\t\t\t\tthis.title = \"编辑结案信息\";\r\n\t\t\t\t\tthis.Isfufa = false;\r\n\t\t\t\t\tthis.IDS.DiagnosisId = data.DiagnosisId\r\n\t\t\t\t\tthis.IDS.closeId = data.CloseId\r\n\t\t\t\t\tawait this.pulmonaryclosesvisitandmedicinelist();\r\n\t\t\t\t\tawait this.tuberculosisdiagnosissmsglist();\r\n\t\t\t\t\tawait this.pulmonarycloseslistmsg();\r\n\t\t\t\t} else if (this.flag == 'recurrence') {\r\n\t\t\t\t\tthis.title = \"复发结案信息\";\r\n\t\t\t\t\tthis.IDS.DiagnosisId = data.DiagnosisId\r\n\t\t\t\t\tthis.IDS.closeId = data.CloseId\r\n\t\t\t\t\tawait this.pulmonaryclosesvisitandmedicinelist();\r\n\t\t\t\t\tawait this.tuberculosisdiagnosissmsglist();\r\n\t\t\t\t\tawait this.pulmonarycloseslistmsg();\r\n\t\t\t\t\tthis.form.Remarks = '';\r\n\t\t\t\t\tthis.Isfufa = true; //复发选择治疗方案\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 确定\r\n\t\t\thandlerSave() {\r\n\t\t\t\tthis.$refs[\"form\"].validate((valid) => {\r\n\t\t\t\t\tif (!valid) return;\r\n\t\t\t\t\tthis.hasinfo = [];\r\n\t\t\t\t\tfor (let key in this.form) {\r\n\t\t\t\t\t\tlet obj = {};\r\n\t\t\t\t\t\tif (this.form[key] !== this.copyform[key]) {\r\n\t\t\t\t\t\t\tobj.op = 'replace',\r\n\t\t\t\t\t\t\t\tobj.value = this.form[key];\r\n\t\t\t\t\t\t\tobj.path = key;\r\n\t\t\t\t\t\t\tthis.hasinfo.push(obj)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.$baseConfirm(`确认要${this.title}此项目吗？`, null, async () => {\r\n\t\t\t\t\t\t// let subData = Object.assign({}, this.form)\r\n\t\t\t\t\t\tif (this.flag == 'case') {\r\n\t\t\t\t\t\t\tconst res = await addapplysettlement({\r\n\t\t\t\t\t\t\t\t...this.Personform,\r\n\t\t\t\t\t\t\t\t...this.form,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t// this.$emit(\"caseEdit\", this.flag, this.IDS, this.form);\r\n\t\t\t\t\t\t\tthis.$baseMessage('添加成功', \"success\")\r\n\t\t\t\t\t\t\tthis.$emit('sumite');\r\n\t\t\t\t\t\t\tthis.close();\r\n\t\t\t\t\t\t} else if (this.flag == 'edit') {\r\n\t\t\t\t\t\t\tconst res = await updatatuberculosisModify(this.IDS.closeId, this.hasinfo)\r\n\t\t\t\t\t\t\tlet {\r\n\t\t\t\t\t\t\t\tStatusCode,\r\n\t\t\t\t\t\t\t\tMessage\r\n\t\t\t\t\t\t\t} = res;\r\n\t\t\t\t\t\t\tif (StatusCode != 200) {\r\n\t\t\t\t\t\t\t\treturn this.$baseMessage(\r\n\t\t\t\t\t\t\t\t\tMessage || '修改失败', 'error'\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$baseMessage('修改成功', \"success\")\r\n\t\t\t\t\t\t\t\tthis.$emit(\"sumite\")\r\n\t\t\t\t\t\t\t\tthis.close();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (this.flag == 'recurrence') {\r\n\t\t\t\t\t\t\t// const res = await addapplysettlement({\r\n\t\t\t\t\t\t\t// \t...this.Personform,\r\n\t\t\t\t\t\t\t// \t...this.form,\r\n\t\t\t\t\t\t\t// })\r\n\t\t\t\t\t\t\tconst res = await addtuberculosisdiagnosiss({\r\n\t\t\t\t\t\t\t\t...this.Personform,\r\n\t\t\t\t\t\t\t\t...this.form,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tthis.$emit('sumite');\r\n\t\t\t\t\t\t\tthis.$baseMessage('复发操作成功', \"success\")\r\n\t\t\t\t\t\t\tthis.close();\r\n\r\n\t\t\t\t\t\t\tthis.$router.push({\r\n\t\t\t\t\t\t\t\tname: 'PatientManagement',\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t},\r\n\r\n\r\n\t\t\t//取消\r\n\t\t\tclose() {\r\n\t\t\t\tthis.dialogVisible = false;\r\n\t\t\t\tthis.form = this.$options.data().form;\r\n\t\t\t\tthis.$refs[\"form\"].resetFields();\r\n\t\t\t},\r\n\r\n\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\t'form.TreatmentPlanId': function(val) {\r\n\t\t\t\tfor (let i in this.TreatmentPlanId) {\r\n\t\t\t\t\tif (this.TreatmentPlanId[i].TreatmentPlanId == this.form.TreatmentPlanId) {\r\n\t\t\t\t\t\tthis.StrengtheningPeriodDMT = this.TreatmentPlanId[i].StrengtheningPeriodDMT;\r\n\t\t\t\t\t\tthis.ConsolidationPeriodMonth = this.TreatmentPlanId[i].ConsolidationPeriodMonth;\r\n\t\t\t\t\t\tthis.ConsolidationPeriodDMT = this.TreatmentPlanId[i].ConsolidationPeriodDMT;\r\n\t\t\t\t\t\tthis.StrengtheningPeriodMonth = this.TreatmentPlanId[i].StrengtheningPeriodMonth;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style lang=scss scoped>\r\n\t.contentbox {\r\n\t\theight: 620px;\r\n\t}\r\n\r\n\t.el-colname {\r\n\t\tmargin-left: 60px;\r\n\t\tmargin-bottom: 20px;\r\n\t}\r\n</style>\r\n"]}]}