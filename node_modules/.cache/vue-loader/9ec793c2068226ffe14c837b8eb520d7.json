{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\src\\views\\systemManage\\getRegions\\components\\pageEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\src\\views\\systemManage\\getRegions\\components\\pageEdit.vue","mtime":1678931188707},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678931310818},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\babel-loader\\lib\\index.js","mtime":1678931314285},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678931310818},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\vue-loader\\lib\\index.js","mtime":1678931316857}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyByZWdpb25zRGV0YWlsLCBhZGRSZWdpb25zLCBFZGl0cmVnaW9ucywgY2FzY2FkZXIsIGdldExpc3QgfSBmcm9tICJAL2FwaS9zeXN0ZW1NYW5hZ2UvUmVnaW9uIjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgZGF0YSAoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIC8vIOihqOWNlemFjee9rg0KICAgICAgZm9ybUNvbmZpZzogew0KICAgICAgICB0aXRsZTogJycsDQogICAgICAgIHJlZGVyVmlldzogdHJ1ZSwNCiAgICAgICAgdmlzaWJsZTogZmFsc2UsDQogICAgICAgIHdpZHRoOiAnNjAlJywNCiAgICAgICAgb3B0OiAnJywNCiAgICAgIH0sDQogICAgICB0YWJsZURhdGE6IFtdLA0KICAgICAgUmVnX1JlZ2lvbkNvZGVEYXRhOiBbXSwNCiAgICAgIC8vIOihqOWNleaVsOaNrg0KICAgICAgZm9ybURhdGE6IHt9LA0KICAgICAgLy8g6aqM6K+B6KeE5YiZDQogICAgICBmb3JtUnVsZXM6IHsNCiAgICAgICAgUmVnaW9uTmFtZTogeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+WMuuWfn+WQjeensOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICBSZWdpb25Db2RlOiB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn5Yy65Z+f57yW56CB5LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2JsdXInIH0sDQogICAgICAgIFJlZ2lvbkxldmVsOiB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn5Yy65Z+f57qn5Yir5LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2JsdXInIH0NCiAgICAgIH0sDQogICAgICBwcm9wc2xpc3Q6IHsNCiAgICAgICAgdmFsdWU6ICJSZWdpb25Db2RlIiwNCiAgICAgICAgbGFiZWw6ICJSZWdpb25OYW1lIiwNCiAgICAgICAgY2hpbGRyZW46ICJDaGlsZHJlbiIsDQogICAgICAgIGNoZWNrU3RyaWN0bHk6IHRydWUsDQogICAgICAgIGVtaXRQYXRoOiBmYWxzZSwNCiAgICAgICAgbGF6eTogdHJ1ZSwNCiAgICAgICAgbGF6eUxvYWQ6IHRoaXMubGF6eUxvYWQNCiAgICAgIH0sDQogICAgfTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGFzeW5jIGdldFJlZ19SZWdpb25Db2RlRGF0YSAoKSB7DQogICAgICBsZXQgcmVzID0gYXdhaXQgZ2V0TGlzdCh7IFJlZ19SZWdpb25Db2RlOiAnJywgUGFnZU51bWJlcjogMSwgUGFnZVNpemU6IDk5OTksIFJlZ2lvbkxldmVsOiAxIH0pDQogICAgICB0aGlzLlJlZ19SZWdpb25Db2RlRGF0YSA9IHJlcy5SZXNwb25zZS5pdGVtcw0KICAgIH0sDQogICAgYXN5bmMgbGF6eUxvYWQgKG5vZGUsIHJlc29sdmUpIHsNCiAgICAgIGxldCB7IGxldmVsIH0gPSBub2RlOw0KICAgICAgbGV0IHBhcmFtcyA9IG5vZGUudmFsdWUNCiAgICAgIGdldExpc3QoeyBSZWdfUmVnaW9uQ29kZTogcGFyYW1zLCBQYWdlTnVtYmVyOiAxLCBQYWdlU2l6ZTogOTk5OSB9KS50aGVuKHJlcyA9PiB7Ly/mjqXlj6MNCiAgICAgICAgaWYgKHJlcyAmJiByZXMuU3RhdHVzQ29kZSA9PSAyMDApIHsNCiAgICAgICAgICBsZXQgZGF0YSA9IFtyZXMuUmVzcG9uc2VdDQogICAgICAgICAgaWYgKGxldmVsID4gMCkgew0KICAgICAgICAgICAgZGF0YSA9IHJlcy5SZXNwb25zZS5pdGVtcw0KICAgICAgICAgIH0NCiAgICAgICAgICAvLyBpZiAobGV2ZWwgPT0gMykgew0KICAgICAgICAgIC8vICAgZGF0YS5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgIC8vICAgICBpdGVtLmxlYWYgPSBsZXZlbCA+PSAzDQogICAgICAgICAgLy8gICB9KTsNCiAgICAgICAgICAvLyB9DQogICAgICAgICAgcmVzb2x2ZShkYXRhKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfojrflj5bljLrliJLmlbDmja7lpLHotKUnKQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgLy/lhbPpl63lvLnmoYYNCiAgICBoYW5kbGVDbG9zZSAoKSB7DQogICAgICB0aGlzLiRyZWZzLnJlZkZvcm0ucmVzZXRGaWVsZHMoKTsNCiAgICAgIHRoaXMuZm9ybUNvbmZpZy52aXNpYmxlID0gZmFsc2UNCiAgICB9LA0KICAgIC8vIOaPkOS6pA0KICAgIHN1Ym1pdCAoKSB7DQogICAgICBsZXQgdGhhdCA9IHRoaXMNCiAgICAgIHRoaXMuJHJlZnMucmVmRm9ybS52YWxpZGF0ZShhc3luYyAodmFsaWQpID0+IHsNCiAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgaWYgKHRoYXQuZm9ybUNvbmZpZy5vcHQgPT0gJ2FkZCcpIHsNCiAgICAgICAgICAgIGF3YWl0IGFkZFJlZ2lvbnModGhhdC5mb3JtRGF0YSk7DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuaWsOWinuaIkOWKnyIpOw0KICAgICAgICAgICAgdGhhdC4kZW1pdCgic3VibWl0IikNCiAgICAgICAgICAgIHRoYXQuaGFuZGxlQ2xvc2UoKQ0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAodGhhdC5mb3JtQ29uZmlnLm9wdCA9PSAnZWRpdCcpIHsNCiAgICAgICAgICAgIGxldCBhcnIgPSB0aGF0LiR1dGlsc0Z1bi5jb21wYXJlT2JqKHRoYXQuZm9ybURhdGEsIHRoYXQuZm9ybURhdGFDb3B5KQ0KICAgICAgICAgICAgYXdhaXQgRWRpdHJlZ2lvbnMoew0KICAgICAgICAgICAgICBSZWdpb25Db2RlOiB0aGF0LmZvcm1EYXRhLlJlZ2lvbkNvZGUsDQogICAgICAgICAgICAgIGRhdGE6IGFycg0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi57yW6L6R5oiQ5YqfIik7DQogICAgICAgICAgICB0aGF0LiRlbWl0KCJzdWJtaXQiKQ0KICAgICAgICAgICAgdGhhdC5oYW5kbGVDbG9zZSgpDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIC8vIOWIneWni+WMluW8ueahhu+8jOiOt+WPluivpuaDhQ0KICAgIGFzeW5jIGdldERldGFpbCAocGFyYW0pIHsNCiAgICAgIGlmIChwYXJhbS5vcHQgPT0gJycgfHwgcGFyYW0ub3B0ID09IG51bGwpIHsNCiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+acquefpeaTjeS9nCcpOw0KICAgICAgfQ0KICAgICAgdGhpcy5nZXRSZWdfUmVnaW9uQ29kZURhdGEoKQ0KICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICB0aGlzLmZvcm1EYXRhID0geyAuLi57fSB9DQogICAgICB9KQ0KICAgICAgdGhpcy5mb3JtQ29uZmlnID0gT2JqZWN0LmFzc2lnbih0aGlzLmZvcm1Db25maWcsIHBhcmFtKTsNCiAgICAgIC8v57yW6L6R55u05o6l5Y+W5YiX6KGo5pWw5o2u77yM5LiN6LCD5o6l5Y+jDQogICAgICBpZiAocGFyYW0ub3B0ID09ICdlZGl0Jykgew0KICAgICAgICBsZXQgcmVzID0gYXdhaXQgcmVnaW9uc0RldGFpbChwYXJhbS5SZWdpb25Db2RlKTsNCiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgIHRoaXMuZm9ybURhdGEgPSB7IC4uLnJlcy5SZXNwb25zZSB9DQogICAgICAgIH0pDQogICAgICAgIHRoaXMuZm9ybURhdGFDb3B5ID0gcmVzLlJlc3BvbnNlDQogICAgICB9Ow0KICAgIH0NCiAgfQ0KfTsNCg=="},{"version":3,"sources":["pageEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"pageEdit.vue","sourceRoot":"src/views/systemManage/getRegions/components","sourcesContent":["<template>\r\n  <el-dialog\r\n    :title=\"formConfig.title\"\r\n    :visible=\"formConfig.visible\"\r\n    :width=\"formConfig.width\"\r\n    :close-on-click-modal=\"false\"\r\n    :close-on-press-escape=\"false\"\r\n    @close=\"handleClose\"\r\n    top=\"15vh\"\r\n  >\r\n\t<div slot=\"title\" class=\"dialog-title\">\r\n\t\t<div class=\"sectionstly\"></div>\r\n\t\t<span class=\"title-text\">{{formConfig.title}}</span>\r\n\t\t<div class=\"button-right\">\r\n\t\t\t<span class=\"title-close\" @click=\"handleClose\"></span>\r\n\t\t</div>\r\n\t</div>\r\n    <el-form :model=\"formData\" :rules=\"formRules\" ref=\"refForm\" label-width=\"100px\" class=\"form_row\">\r\n      <div class=\"el-dialog-div\" style=\"height: 30vh\">\r\n        <el-row>\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"上级区划:\" prop=\"Reg_RegionCode\">\r\n              <el-cascader\r\n                style=\"width: 100%\"\r\n                :options=\"Reg_RegionCodeData\"\r\n                :props=\"propslist\"\r\n                v-model=\"formData.Reg_RegionCode\"\r\n                :show-all-levels=\"false\"\r\n                clearable\r\n              ></el-cascader>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"区域名称:\" prop=\"RegionName\">\r\n              <el-input v-model=\"formData.RegionName\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"区域编码:\" prop=\"RegionCode\">\r\n              <el-input v-model=\"formData.RegionCode\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"地区全称:\" prop=\"FullRegionName\">\r\n              <el-input v-model=\"formData.FullRegionName\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"级别:\" prop=\"RegionLevel\">\r\n              <el-input v-model=\"formData.RegionLevel\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n      </div>\r\n    </el-form>\r\n    <span slot=\"footer\" class=\"dialog-footer\">\r\n      <el-button class=\"cancelbtn\" @click=\"handleClose\">取 消</el-button>\r\n      <el-button class=\"savebtn\"  type=\"primary\" @click=\"submit\">确 定</el-button>\r\n    </span>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport { regionsDetail, addRegions, Editregions, cascader, getList } from \"@/api/systemManage/Region\";\r\nexport default {\r\n  data () {\r\n    return {\r\n      // 表单配置\r\n      formConfig: {\r\n        title: '',\r\n        rederView: true,\r\n        visible: false,\r\n        width: '60%',\r\n        opt: '',\r\n      },\r\n      tableData: [],\r\n      Reg_RegionCodeData: [],\r\n      // 表单数据\r\n      formData: {},\r\n      // 验证规则\r\n      formRules: {\r\n        RegionName: { required: true, message: '区域名称不能为空', trigger: 'blur' },\r\n        RegionCode: { required: true, message: '区域编码不能为空', trigger: 'blur' },\r\n        RegionLevel: { required: true, message: '区域级别不能为空', trigger: 'blur' }\r\n      },\r\n      propslist: {\r\n        value: \"RegionCode\",\r\n        label: \"RegionName\",\r\n        children: \"Children\",\r\n        checkStrictly: true,\r\n        emitPath: false,\r\n        lazy: true,\r\n        lazyLoad: this.lazyLoad\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    async getReg_RegionCodeData () {\r\n      let res = await getList({ Reg_RegionCode: '', PageNumber: 1, PageSize: 9999, RegionLevel: 1 })\r\n      this.Reg_RegionCodeData = res.Response.items\r\n    },\r\n    async lazyLoad (node, resolve) {\r\n      let { level } = node;\r\n      let params = node.value\r\n      getList({ Reg_RegionCode: params, PageNumber: 1, PageSize: 9999 }).then(res => {//接口\r\n        if (res && res.StatusCode == 200) {\r\n          let data = [res.Response]\r\n          if (level > 0) {\r\n            data = res.Response.items\r\n          }\r\n          // if (level == 3) {\r\n          //   data.forEach(item => {\r\n          //     item.leaf = level >= 3\r\n          //   });\r\n          // }\r\n          resolve(data);\r\n        } else {\r\n          this.$message.error('获取区划数据失败')\r\n        }\r\n      })\r\n    },\r\n    //关闭弹框\r\n    handleClose () {\r\n      this.$refs.refForm.resetFields();\r\n      this.formConfig.visible = false\r\n    },\r\n    // 提交\r\n    submit () {\r\n      let that = this\r\n      this.$refs.refForm.validate(async (valid) => {\r\n        if (valid) {\r\n          if (that.formConfig.opt == 'add') {\r\n            await addRegions(that.formData);\r\n            this.$message.success(\"新增成功\");\r\n            that.$emit(\"submit\")\r\n            that.handleClose()\r\n          }\r\n          if (that.formConfig.opt == 'edit') {\r\n            let arr = that.$utilsFun.compareObj(that.formData, that.formDataCopy)\r\n            await Editregions({\r\n              RegionCode: that.formData.RegionCode,\r\n              data: arr\r\n            })\r\n            this.$message.success(\"编辑成功\");\r\n            that.$emit(\"submit\")\r\n            that.handleClose()\r\n          }\r\n        }\r\n      });\r\n    },\r\n    // 初始化弹框，获取详情\r\n    async getDetail (param) {\r\n      if (param.opt == '' || param.opt == null) {\r\n        return this.$message.error('未知操作');\r\n      }\r\n      this.getReg_RegionCodeData()\r\n      this.$nextTick(() => {\r\n        this.formData = { ...{} }\r\n      })\r\n      this.formConfig = Object.assign(this.formConfig, param);\r\n      //编辑直接取列表数据，不调接口\r\n      if (param.opt == 'edit') {\r\n        let res = await regionsDetail(param.RegionCode);\r\n        this.$nextTick(() => {\r\n          this.formData = { ...res.Response }\r\n        })\r\n        this.formDataCopy = res.Response\r\n      };\r\n    }\r\n  }\r\n};\r\n</script>"]}]}