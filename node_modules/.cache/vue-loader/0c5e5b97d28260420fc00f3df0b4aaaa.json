{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\src\\views\\systemManagement\\announcementManagement\\edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\src\\views\\systemManagement\\announcementManagement\\edit.vue","mtime":1678931188719},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678931310818},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\babel-loader\\lib\\index.js","mtime":1678931314285},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678931310818},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\vue-loader\\lib\\index.js","mtime":1678931316857}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyB1c2VkaWN0aW9uYXJ5ZGV0YWlscyB9IGZyb20gJ0AvYXBpL2RpY3QuanMnDQppbXBvcnQgeyBnZXRBbm5vdW5jZW1lbnRzLCBhZGRPclVwZGF0YUFubm91bmNlbWVudHMsIGRlbEFubm91bmNlbWVudHMsIHVwZGF0YUFubm91bmNlIH0gZnJvbSAnQC9hcGkvYW5ub3VjZW1lbnQnDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdBbm5vdW5jZW1lbnRNYW5hZ2VtZW50JywNCiAgZGF0YSAoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHRpdGxlOiAiIiwNCiAgICAgIGtleXdvcmQ6ICcnLA0KICAgICAgZmxhZzogJycsDQogICAgICBBMDAzMjogW10sDQogICAgICBBMDAzMzogW10sDQogICAgICBhbm5vdW5jZW1lbnRMaXN0OiBbXSwNCiAgICAgIGFubm91bmNlbWVudHRhYmxlOiBbXSwNCiAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlOiBmYWxzZSwNCiAgICAgIGZvcm06IHsNCiAgICAgICAgLy8g55m75b2V57yT5a2Y5Lit6I635Y+W55qE5rS+5Y+R5Y+C5pWwDQogICAgICAgIEFubm91bmNlbWVudElkOiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VySW5mbycpKS51c2VySWQsDQogICAgICAgIEN1cnJlbnRQYWdlOiAxLA0KICAgICAgICBQYWdlU2l6ZTogMTAsDQogICAgICAgIFRvdGFsUGFnZXM6IDAsDQogICAgICAgIFJlbWFya3M6ICcnLA0KCQlBbm5vdW5jZW1lbnRUeXBlOicxJywNCiAgICAgIH0sDQogICAgICB0YWJsZUhlaWdodDogIjMwMCIsIC8vdGFibGXpq5jluqYNCiAgICAgIHNlYXJjaFJlc3VsdDogW10NCiAgICB9DQogIH0sDQogIGNyZWF0ZWQgKCkgew0KICAgIGxldCBvcHRpb24gPSB7IENhdGVnb3J5Q29kZTogJ0EwMDMyJyB9DQogICAgdXNlZGljdGlvbmFyeWRldGFpbHMob3B0aW9uKS50aGVuKHJlcyA9PiB0aGlzLkEwMDMyID0gcmVzLlJlc3BvbnNlLml0ZW1zKQ0KICAgIGxldCBvcHRpb25zID0geyBDYXRlZ29yeUNvZGU6ICdBMDAzMycgfQ0KICAgIHVzZWRpY3Rpb25hcnlkZXRhaWxzKG9wdGlvbnMpLnRoZW4ocmVzID0+IHRoaXMuQTAwMzMgPSByZXMuUmVzcG9uc2UuaXRlbXMpDQogIH0sDQogIG1vdW50ZWQgKCkgew0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLy8g6I635Y+W5pWw5o2uDQogICAgZ2V0QW5ub3VuY2VtZW50c0xpc3QgKCkgew0KICAgICAgZ2V0QW5ub3VuY2VtZW50cyh0aGlzLmZvcm0pLnRoZW4oKHJlcykgPT4geyB0aGlzLmFubm91bmNlbWVudExpc3QgPSBbLi4ucmVzLlJlc3BvbnNlLml0ZW1zXTsgdGhpcy5zZWFyY2hSZXN1bHQgPSBbLi4ucmVzLlJlc3BvbnNlLml0ZW1zXTsgT2JqZWN0LmFzc2lnbih0aGlzLmZvcm0sIHJlcy5SZXNwb25zZSk7IH0pDQogICAgfSwNCiAgICBzaG93RGlhbG9nIChmbGFnLCBkYXRhKSB7DQogICAgICBpZiAoZmxhZyA9PSAnbmV3YW5uJykgew0KICAgICAgICB0aGlzLnRpdGxlID0gJ+aWsOWinuWFrOWRiicNCiAgICAgICAgdGhpcy5mb3JtID0gdGhpcy4kb3B0aW9ucy5kYXRhKCkuZm9ybTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMudGl0bGUgPSAn5L+u5pS55YWs5ZGKJw0KICAgICAgICB0aGlzLmZvcm0gPSB7IC4uLmRhdGEgfQ0KICAgICAgfQ0KICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IHRydWU7DQogICAgfSwNCiAgICBjbG9zZSAoKSB7DQogICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2U7DQogICAgICB0aGlzLmZvcm0gPSB0aGlzLiRvcHRpb25zLmRhdGEoKS5mb3JtOw0KICAgIH0sDQogICAgLy8g5Yig6ZmkDQogICAgYXN5bmMgZGVsQW5ub3VuY2VtZW50IChkYXRhKSB7DQogICAgICB0aGlzLiRjb25maXJtKGDkvaDnoa7lrprliKDpmaQ/YCwgIuaPkOekuiIsIHsNCiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICLnoa7lrpoiLA0KICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAi5Y+W5raIIiwNCiAgICAgICAgdHlwZTogIndhcm5pbmciLA0KICAgICAgfSkudGhlbihhc3luYyAoKSA9PiB7DQogICAgICAgIGxldCBvcCA9IFtkYXRhLkFubm91bmNlbWVudElkXQ0KICAgICAgICBsZXQgcmVzID0gYXdhaXQgZGVsQW5ub3VuY2VtZW50cyhvcCkNCiAgICAgICAgaWYgKHJlcy5TdGF0dXNDb2RlID09IDIwMCkgew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLA0KICAgICAgICAgICAgbWVzc2FnZTogIuWIoOmZpOWFrOWRiuaIkOWKnyIsDQogICAgICAgICAgfSk7DQogICAgICAgICAgdGhpcy5nZXRBbm5vdW5jZW1lbnRzTGlzdCgpDQogICAgICAgIH0NCiAgICAgIH0pLmNhdGNoKCgpID0+IHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgdHlwZTogJ2luZm8nLA0KICAgICAgICAgIG1lc3NhZ2U6ICflt7Llj5bmtojliKDpmaQnDQogICAgICAgIH0pOw0KICAgICAgfSkNCiAgICB9LA0KICAgIC8vIOehruiupA0KICAgIGFzeW5jIGhhbmRsZUNsaWNrICgpIHsNCiAgICAgIGlmICh0aGlzLmZvcm0uX1hJRCkgew0KICAgICAgICBsZXQgb3AgPSBbdGhpcy5mb3JtLkFubm91bmNlbWVudElkXQ0KICAgICAgICBsZXQgcmVzID0gYXdhaXQgZGVsQW5ub3VuY2VtZW50cyhvcCkNCiAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IGFkZE9yVXBkYXRhQW5ub3VuY2VtZW50cyh0aGlzLmZvcm0pDQogICAgICAgIGlmIChyZXN1bHQuU3RhdHVzQ29kZSA9PSAyMDApIHsNCiAgICAgICAgICB0aGlzLiRlbWl0KCdzdWltdGUnKQ0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLA0KICAgICAgICAgICAgbWVzc2FnZTogIuS/ruaUueWFrOWRiuaIkOWKnyIsDQogICAgICAgICAgfSk7DQoNCiAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2U7DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCBhZGRPclVwZGF0YUFubm91bmNlbWVudHModGhpcy5mb3JtKQ0KICAgICAgICBpZiAocmVzdWx0LlN0YXR1c0NvZGUgPT0gMjAwKSB7DQogICAgICAgICAgdGhpcy4kZW1pdCgnc3VpbXRlJykNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwNCiAgICAgICAgICAgIG1lc3NhZ2U6ICLmt7vliqDlhazlkYrmiJDlip8iLA0KICAgICAgICAgIH0pOw0KICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogIH0sDQoNCg0KDQp9DQo="},{"version":3,"sources":["edit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA","file":"edit.vue","sourceRoot":"src/views/systemManagement/announcementManagement","sourcesContent":["<template>\r\n  <el-dialog width=\"50%\" :visible.sync=\"dialogFormVisible\">\r\n    <div slot=\"title\" class=\"dialog-title\">\r\n      <div class=\"sectionstly\"></div>\r\n      <span class=\"title-text\">{{ title }}</span>\r\n      <div class=\"button-right\">\r\n        <span class=\"title-close\" @click=\"close\"></span>\r\n      </div>\r\n    </div>\r\n    <el-form :model=\"form\" size=\"small\" label-width=\"70px\" ref=\"fromroule\">\r\n      <!-- <el-row>\r\n        <el-col :span=\"24\">\r\n          <el-form-item label=\"公告类型\">\r\n            <el-select v-model=\"form.AnnouncementType\" placeholder=\"请选择\" clearable>\r\n              <el-option v-for=\"item in A0032\" :key=\"item.DetailsCode\" :label=\"item.DetailsName\" :value=\"item.DetailsCode\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row> -->\r\n      <el-row>\r\n        <el-col :span=\"24\">\r\n          <el-form-item label=\"公告时间\" prop=\"OperateTimeFirst\">\r\n            <el-date-picker\r\n              align=\"center\"\r\n              v-model=\"form.AnnouncementDate\"\r\n              value-format=\"yyyy-MM-dd\"\r\n              type=\"date\"\r\n              placeholder=\"选择日期\"\r\n            ></el-date-picker>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row>\r\n        <el-col :span=\"24\">\r\n          <el-form-item label=\"公告标题\" prop=\"Remarks\">\r\n            <el-input v-model=\"form.Title\" type=\"input\" :rows=\"8\" placeholder=\"请输入内容\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n\r\n      <el-row>\r\n        <el-col :span=\"24\">\r\n          <el-form-item label=\"公告内容\" prop=\"Remarks\">\r\n            <el-input v-model=\"form.Content\" type=\"textarea\" maxlength=\"1000\" :rows=\"8\" placeholder=\"请输入内容\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row>\r\n        <el-col :span=\"24\">\r\n          <el-form-item label=\"备注\">\r\n            <el-input v-model=\"form.Remarks\" type=\"input\" :rows=\"8\" placeholder=\"请输入备注\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row>\r\n        <el-col :span=\"24\">\r\n          <el-form-item label=\"查看范围\" prop=\"ViewRange\">\r\n            <el-select v-model=\"form.ViewRange\" placeholder=\"请选择\" clearable>\r\n              <el-option v-for=\"item in A0033\" :key=\"item.DetailsCode\" :label=\"item.DetailsName\" :value=\"item.DetailsCode\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n    </el-form>\r\n\r\n    <div slot=\"footer\">\r\n      <el-button @click=\"close\" class=\"cancelbtn\">取 消</el-button>\r\n      <el-button type=\"primary\" class=\"savebtn\" @click=\"handleClick\">确 定</el-button>\r\n    </div>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport { usedictionarydetails } from '@/api/dict.js'\r\nimport { getAnnouncements, addOrUpdataAnnouncements, delAnnouncements, updataAnnounce } from '@/api/annoucement'\r\nexport default {\r\n  name: 'AnnouncementManagement',\r\n  data () {\r\n    return {\r\n      title: \"\",\r\n      keyword: '',\r\n      flag: '',\r\n      A0032: [],\r\n      A0033: [],\r\n      announcementList: [],\r\n      announcementtable: [],\r\n      dialogFormVisible: false,\r\n      form: {\r\n        // 登录缓存中获取的派发参数\r\n        AnnouncementId: JSON.parse(localStorage.getItem('userInfo')).userId,\r\n        CurrentPage: 1,\r\n        PageSize: 10,\r\n        TotalPages: 0,\r\n        Remarks: '',\r\n\t\tAnnouncementType:'1',\r\n      },\r\n      tableHeight: \"300\", //table高度\r\n      searchResult: []\r\n    }\r\n  },\r\n  created () {\r\n    let option = { CategoryCode: 'A0032' }\r\n    usedictionarydetails(option).then(res => this.A0032 = res.Response.items)\r\n    let options = { CategoryCode: 'A0033' }\r\n    usedictionarydetails(options).then(res => this.A0033 = res.Response.items)\r\n  },\r\n  mounted () {\r\n  },\r\n  methods: {\r\n    // 获取数据\r\n    getAnnouncementsList () {\r\n      getAnnouncements(this.form).then((res) => { this.announcementList = [...res.Response.items]; this.searchResult = [...res.Response.items]; Object.assign(this.form, res.Response); })\r\n    },\r\n    showDialog (flag, data) {\r\n      if (flag == 'newann') {\r\n        this.title = '新增公告'\r\n        this.form = this.$options.data().form;\r\n      } else {\r\n        this.title = '修改公告'\r\n        this.form = { ...data }\r\n      }\r\n      this.dialogFormVisible = true;\r\n    },\r\n    close () {\r\n      this.dialogFormVisible = false;\r\n      this.form = this.$options.data().form;\r\n    },\r\n    // 删除\r\n    async delAnnouncement (data) {\r\n      this.$confirm(`你确定删除?`, \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      }).then(async () => {\r\n        let op = [data.AnnouncementId]\r\n        let res = await delAnnouncements(op)\r\n        if (res.StatusCode == 200) {\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"删除公告成功\",\r\n          });\r\n          this.getAnnouncementsList()\r\n        }\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消删除'\r\n        });\r\n      })\r\n    },\r\n    // 确认\r\n    async handleClick () {\r\n      if (this.form._XID) {\r\n        let op = [this.form.AnnouncementId]\r\n        let res = await delAnnouncements(op)\r\n        let result = await addOrUpdataAnnouncements(this.form)\r\n        if (result.StatusCode == 200) {\r\n          this.$emit('suimte')\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"修改公告成功\",\r\n          });\r\n\r\n          this.dialogFormVisible = false;\r\n        }\r\n      } else {\r\n        let result = await addOrUpdataAnnouncements(this.form)\r\n        if (result.StatusCode == 200) {\r\n          this.$emit('suimte')\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"添加公告成功\",\r\n          });\r\n          this.dialogFormVisible = false;\r\n        } else {\r\n        }\r\n      }\r\n    },\r\n  },\r\n\r\n\r\n\r\n}\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}