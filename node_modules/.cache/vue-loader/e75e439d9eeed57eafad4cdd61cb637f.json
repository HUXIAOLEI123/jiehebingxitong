{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\src\\components\\MyCascader\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\src\\components\\MyCascader\\index.vue","mtime":1678931188507},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678931310818},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\babel-loader\\lib\\index.js","mtime":1678931314285},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678931310818},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\vue-loader\\lib\\index.js","mtime":1678931316857}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyByZWdpb25zLCBnZXRSZWdpb25zIH0gZnJvbSAiQC9hcGkvaW5wdXRzZWxlY3QuanMiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiTXlDYXNjYWRlciIsDQogIG1vZGVsOiB7DQogICAgcHJvcDogInZhbHVlIiwNCiAgICBldmVudDogImNhcy1jaGFuZ2UiLA0KICB9LA0KICBwcm9wczogew0KICAgIHZhbHVlOiBbU3RyaW5nLCBBcnJheV0sDQogICAgZGlzYWJsZWQ6IHsNCiAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICBkZWZhdWx0OiBmYWxzZSwNCiAgICB9LA0KICAgIGNsZWFyYWJsZTogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIGRlZmF1bHQ6IGZhbHNlLA0KICAgIH0sDQogICAgc2hvd0FsbExldmVsczogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIGRlZmF1bHQ6IGZhbHNlLA0KICAgIH0sDQogICAgcGxhY2Vob2xkZXI6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIGRlZmF1bHQ6ICIiLA0KICAgIH0sDQogICAgcHJvcHM6IHsNCiAgICAgIHR5cGU6IE9iamVjdCwNCiAgICAgIGRlZmF1bHQgKCkgew0KICAgICAgICByZXR1cm4ge307DQogICAgICB9LA0KICAgIH0sDQogICAgLy/mmK/lkKbmnYPpmZDmjqfliLYNCiAgICBpc0FjY2Vzc0NvbnRyb2w6IHsNCiAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICBkZWZhdWx0OiBmYWxzZQ0KICAgIH0NCg0KICB9LA0KICBjb21wdXRlZDogew0KICAgIGJpbmRWYWx1ZTogew0KICAgICAgZ2V0ICgpIHsNCiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWU7DQogICAgICB9LA0KICAgICAgc2V0ICh2YWx1ZSkgew0KICAgICAgICB0aGlzLiRlbWl0KCJjYXMtY2hhbmdlIiwgdmFsdWUpOw0KICAgICAgfSwNCiAgICB9LA0KICAgIGJpbmRQcm9wcyAoKSB7DQogICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih0aGlzLnByb3BzLCB7IGxhenlMb2FkOiB0aGlzLmxhenlMb2FkTWV0aG9kIH0pOw0KICAgIH0sDQogIH0sDQogIHdhdGNoOiB7DQogICAgYXN5bmMgYmluZFZhbHVlIChuLCBvKSB7DQogICAgICBpZiAobikgew0KICAgICAgICBhd2FpdCByZWdpb25zKG4pLnRoZW4oYXN5bmMgKHJlcykgPT4gew0KICAgICAgICAgIGlmICh0aGlzLmlzQWNjZXNzQ29udHJvbCkgew0KICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gWy4uLmF3YWl0IHRoaXMuZmlsdGVyT25lSG9zcERhdGEocmVzLlJlc3BvbnNlKV0NCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gcmVzLlJlc3BvbnNlOw0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICB9DQogICAgfSwNCiAgfSwNCiAgYXN5bmMgY3JlYXRlZCAoKSB7DQogICAgbGV0IGF1dGhSZWdpb25Db2RlID0gdGhpcy4kdXRpbHNGdW4uZ2V0VXNlckluZm8oKS5hdXRoUmVnaW9uQ29kZTsNCiAgICBhd2FpdCByZWdpb25zKGF1dGhSZWdpb25Db2RlKS50aGVuKGFzeW5jIChyZXMpID0+IHsNCiAgICAgIGlmICh0aGlzLmlzQWNjZXNzQ29udHJvbCkgew0KICAgICAgICB0aGlzLm9wdGlvbnMgPSBbLi4uYXdhaXQgdGhpcy5maWx0ZXJPbmVIb3NwRGF0YShyZXMuUmVzcG9uc2UpXQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5vcHRpb25zID0gcmVzLlJlc3BvbnNlOw0KICAgICAgfQ0KICAgIH0pOw0KICB9LA0KICBtb3VudGVkICgpIHsNCiAgICB0aGlzLmJpbmRWYWx1ZSA9ICcnDQogIH0sDQogIGRhdGEgKCkgew0KICAgIHJldHVybiB7DQogICAgICBvcHRpb25zOiBbXSwNCiAgICB9Ow0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLy/lpITnkIbmnLrmnoTku47lk6rkuIDnuqflvIDlp4sNCiAgICBmaWx0ZXJPbmVIb3NwRGF0YSAobGlzdCkgew0KICAgICAgaWYgKCFsaXN0ICYmIGxpc3QubGVuZ3RoKSB7DQogICAgICAgIHJldHVybiBbXTsNCiAgICAgIH0NCiAgICAgIGxldCBuZXdSZWdpb24gPSBbXTsgLy/nu4Too4XmlrDmlbDmja4NCiAgICAgIGxldCBhdXRoUmVnaW9uQ29kZSA9IHRoaXMuJHV0aWxzRnVuLmdldFVzZXJJbmZvKCkuYXV0aFJlZ2lvbkNvZGUNCiAgICAgIGZuKGxpc3QpOw0KICAgICAgZnVuY3Rpb24gZm4gKGRhdGEpIHsNCiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IGRhdGEubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsNCiAgICAgICAgICBpZiAoZGF0YVtpXS5SZWdpb25Db2RlID09PSBhdXRoUmVnaW9uQ29kZSkgew0KICAgICAgICAgICAgbmV3UmVnaW9uLnB1c2goZGF0YVtpXSk7DQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGFbaV0/LkNoaWxkcmVuKSB7DQogICAgICAgICAgICBmbihkYXRhW2ldLkNoaWxkcmVuKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHJldHVybiBuZXdSZWdpb247DQogICAgfSwNCiAgICBoYW5kbGVDaGFuZ2UgKG5vZGUpIHsNCiAgICAgIGlmICh0aGlzLmJpbmRWYWx1ZS5sZW5ndGggIT0gMCkgew0KICAgICAgICBsZXQgYXJyID0gdGhpcy4kcmVmc1snY2FzY2FkZXJNYWxsQ2F0ZXJnb3J5J10uZ2V0Q2hlY2tlZE5vZGVzKClbMF0ucGF0aExhYmVscw0KICAgICAgICB0aGlzLiRlbWl0KCdjYWxsYmFja2JpbmRWYWx1ZScsIHRoaXMuYmluZFZhbHVlKQ0KICAgICAgICB0aGlzLiRlbWl0KCdjYWxsYmFja2xhYmxlJywgYXJyKQ0KICAgICAgfQ0KICAgIH0sDQogICAgbGF6eUxvYWRNZXRob2QgKG5vZGUsIHJlc29sdmUpIHsNCiAgICAgIGlmIChub2RlLmxldmVsID09IDApIHJldHVybg0KICAgICAgZ2V0UmVnaW9ucyh7IFJlZ19SZWdpb25Db2RlOiBub2RlLnZhbHVlLCBQYWdlU2l6ZTogOTk5IH0pLnRoZW4oKHJlcykgPT4gew0KICAgICAgICByZXNvbHZlKHJlcy5SZXNwb25zZS5pdGVtcyk7DQogICAgICB9KTsNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/MyCascader","sourcesContent":["<template>\r\n  <div class=\"index\">\r\n    <el-cascader\r\n      style=\"width: 100%\"\r\n      ref=\"cascaderMallCatergory\"\r\n      v-model=\"bindValue\"\r\n      :options=\"options\"\r\n      :show-all-levels=\"showAllLevels\"\r\n      :props=\"bindProps\"\r\n      @change=\"handleChange\"\r\n      :placeholder=\"placeholder\"\r\n      :clearable=\"clearable\"\r\n    ></el-cascader>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { regions, getRegions } from \"@/api/inputselect.js\";\r\nexport default {\r\n  name: \"MyCascader\",\r\n  model: {\r\n    prop: \"value\",\r\n    event: \"cas-change\",\r\n  },\r\n  props: {\r\n    value: [String, Array],\r\n    disabled: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    clearable: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    showAllLevels: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    placeholder: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    props: {\r\n      type: Object,\r\n      default () {\r\n        return {};\r\n      },\r\n    },\r\n    //是否权限控制\r\n    isAccessControl: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n\r\n  },\r\n  computed: {\r\n    bindValue: {\r\n      get () {\r\n        return this.value;\r\n      },\r\n      set (value) {\r\n        this.$emit(\"cas-change\", value);\r\n      },\r\n    },\r\n    bindProps () {\r\n      return Object.assign(this.props, { lazyLoad: this.lazyLoadMethod });\r\n    },\r\n  },\r\n  watch: {\r\n    async bindValue (n, o) {\r\n      if (n) {\r\n        await regions(n).then(async (res) => {\r\n          if (this.isAccessControl) {\r\n            this.options = [...await this.filterOneHospData(res.Response)]\r\n          } else {\r\n            this.options = res.Response;\r\n          }\r\n        });\r\n      }\r\n    },\r\n  },\r\n  async created () {\r\n    let authRegionCode = this.$utilsFun.getUserInfo().authRegionCode;\r\n    await regions(authRegionCode).then(async (res) => {\r\n      if (this.isAccessControl) {\r\n        this.options = [...await this.filterOneHospData(res.Response)]\r\n      } else {\r\n        this.options = res.Response;\r\n      }\r\n    });\r\n  },\r\n  mounted () {\r\n    this.bindValue = ''\r\n  },\r\n  data () {\r\n    return {\r\n      options: [],\r\n    };\r\n  },\r\n  methods: {\r\n    //处理机构从哪一级开始\r\n    filterOneHospData (list) {\r\n      if (!list && list.length) {\r\n        return [];\r\n      }\r\n      let newRegion = []; //组装新数据\r\n      let authRegionCode = this.$utilsFun.getUserInfo().authRegionCode\r\n      fn(list);\r\n      function fn (data) {\r\n        for (let i = 0, len = data.length; i < len; i++) {\r\n          if (data[i].RegionCode === authRegionCode) {\r\n            newRegion.push(data[i]);\r\n            break;\r\n          } else if (data[i]?.Children) {\r\n            fn(data[i].Children);\r\n          }\r\n        }\r\n      }\r\n      return newRegion;\r\n    },\r\n    handleChange (node) {\r\n      if (this.bindValue.length != 0) {\r\n        let arr = this.$refs['cascaderMallCatergory'].getCheckedNodes()[0].pathLabels\r\n        this.$emit('callbackbindValue', this.bindValue)\r\n        this.$emit('callbacklable', arr)\r\n      }\r\n    },\r\n    lazyLoadMethod (node, resolve) {\r\n      if (node.level == 0) return\r\n      getRegions({ Reg_RegionCode: node.value, PageSize: 999 }).then((res) => {\r\n        resolve(res.Response.items);\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n</style>"]}]}