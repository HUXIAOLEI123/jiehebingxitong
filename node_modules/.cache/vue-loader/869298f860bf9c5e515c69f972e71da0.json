{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\src\\layout\\components\\AppSystem.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\src\\layout\\components\\AppSystem.vue","mtime":1678931188546},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678931310818},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\babel-loader\\lib\\index.js","mtime":1678931314285},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678931310818},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\vue-loader\\lib\\index.js","mtime":1678931316857}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQ3J5cHRvSlMgZnJvbSAiY3J5cHRvLWpzIjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIkFwcFN5c3RlbSIsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGJpZ1RpdGxlOiB0aGlzLiRiaWdUaXRsZSwNCiAgICAgIHVzZXJJbmZvOiB7fSwNCiAgICAgIHN5c3RlbUxpc3Q6IFtdLA0KICAgIH07DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5nZXRTeXNUZW1EYXRhKCk7DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvL+iOt+WPluezu+e7n+aVsOaNrg0KICAgIGdldFN5c1RlbURhdGEoKSB7DQogICAgICB0aGlzLnN5c3RlbUxpc3QgPSBKU09OLnBhcnNlKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgic2VsZWN0U3lzdGVtIikpOw0KICAgICAgaWYodGhpcy5zeXN0ZW1MaXN0LmZpbHRlcigoaXRlbSk9Pml0ZW0uaXNBY3RpdmUgPT09dHJ1ZSkubGVuZ3RoPT0wKXsNCiAgICAgICAgdGhpcy5zeXN0ZW1MaXN0WzBdLmlzQWN0aXZlID0gdHJ1ZTsNCiAgICAgIH0NCiAgICB9LA0KICAgIC8v5YiH5o2i57O757ufDQogICAgY2hhbmdlU3lzdGVtKGl0ZW0pIHsNCiAgICAgIC8v5YmN5b6A56ys5LiJ5pa557O757ufDQogICAgICBpZihpdGVtLmV4dGVybmFsTGlua3Mpew0KICAgICAgICB0aGlzLmdvdG9OZXdTeXMoaXRlbSk7DQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgdGhpcy5zeXN0ZW1MaXN0LmZvckVhY2goKGkpID0+IHsNCiAgICAgICAgaWYgKGkucGVybWlzc2lvbklkID09PSBpdGVtLnBlcm1pc3Npb25JZCkgew0KICAgICAgICAgIGkuaXNBY3RpdmUgPSB0cnVlOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGkuaXNBY3RpdmUgPSBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oInNlbGVjdFN5c3RlbSIsSlNPTi5zdHJpbmdpZnkodGhpcy5zeXN0ZW1MaXN0KSk7DQogICAgICBsZXQgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7DQogICAgICB1cmwgPSB1cmwuc2xpY2UoMCwgdXJsLmluZGV4T2YoIiMiKSk7DQogICAgICB3aW5kb3cub3Blbih1cmwsICJfc2VsZiIpOw0KICAgIH0sDQogICAgLy/liY3lvoDnrKzkuInmlrnns7vnu58NCiAgICBnb3RvTmV3U3lzKGl0ZW0pew0KICAgICAgbGV0IHVzZXJMb2dpbkluZm8gPSBKU09OLnBhcnNlKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlckxvZ2luSW5mbyIpKQ0KICAgICAgdmFyIF91cmwgPSBpdGVtLmNvZGU7DQogICAgICB2YXIgdXNlck5hbWUgPSB1c2VyTG9naW5JbmZvLmxvZ2luQ29kZTsNCiAgICAgIHZhciBwYXNzd2QgPSB1c2VyTG9naW5JbmZvLnBhc3N3b3JkOw0KDQogICAgICANCiAgICAgIC8vIHZhciB1c2VyTmFtZSA9ICd5aDEnOw0KICAgICAgLy8gdmFyIHBhc3N3ZCA9ICdhZG1pbjEyMyc7DQogICAgICAvL+WvhumSpQ0KICAgICAgdmFyIHNlY3JldD0gQ3J5cHRvSlMuZW5jLlV0ZjgucGFyc2UoIkJCbkZXUW94IikNCiAgICAgIC8va2V5DQogICAgICB2YXIga2V5PSJSV1ZoZmFvRUNEOW1pVk9aenlwcW1WS3IiDQogICAgICAvL+aXtumXtA0KICAgICAgdmFyIHN5c3RpbWUgPSB0aGlzLiR1dGlsc0Z1bi5kYXRlRm9ybWF0KG5ldyBEYXRlKCksJ1lZWVltbWRkSEhNTVNTJyk7DQoNCiAgICAgIC8v5Yqg5a+G6LSm5Y+3IERFU+WKoOWvhuaWueW8jw0KICAgICAgdmFyIHVuYW1lID0gZW5jb2RlVVJJQ29tcG9uZW50KENyeXB0b0pTLlRyaXBsZURFUy5lbmNyeXB0KHVzZXJOYW1lLCBzZWNyZXQsIHsNCiAgICAgICAgbW9kZTogQ3J5cHRvSlMubW9kZS5FQ0IsDQogICAgICAgIHBhZGRpbmc6IENyeXB0b0pTLnBhZC5Qa2NzNw0KICAgICAgfSkudG9TdHJpbmcoKSk7DQoNCiAgICAgIC8v5Yqg5a+G6LSm5Y+35a+G56CBDQogICAgICB2YXIgcHdkPWVuY29kZVVSSUNvbXBvbmVudChDcnlwdG9KUy5UcmlwbGVERVMuZW5jcnlwdChwYXNzd2QsIHNlY3JldCwgew0KICAgICAgICBtb2RlOiBDcnlwdG9KUy5tb2RlLkVDQiwNCiAgICAgICAgcGFkZGluZzogQ3J5cHRvSlMucGFkLlBrY3M3DQogICAgICB9KS50b1N0cmluZygpKTsNCg0KICAgICAgLy/liqDlr4bml7bpl7QNCiAgICAgIHZhciB0aW1lID0gZW5jb2RlVVJJQ29tcG9uZW50KENyeXB0b0pTLlRyaXBsZURFUy5lbmNyeXB0KHN5c3RpbWUsIHNlY3JldCwgew0KICAgICAgICBtb2RlOiBDcnlwdG9KUy5tb2RlLkVDQiwNCiAgICAgICAgcGFkZGluZzogQ3J5cHRvSlMucGFkLlBrY3M3DQogICAgICB9KS50b1N0cmluZygpKTsNCg0KICAgICAgLy/mi7zmjqUg5piO5paH6LSm5Y+3K+WvhueggStrZXkr5pe26Ze0DQogICAgICB2YXIgX3ZlcmlmeT1gJHt1c2VyTmFtZX0ke3Bhc3N3ZH0ke2tleX0ke3N5c3RpbWV9YDsNCiAgICAgIC8v55Sf5oiQ562+5ZCNDQogICAgICB2YXIgdmVyaWZ5ID0gZW5jb2RlVVJJQ29tcG9uZW50KENyeXB0b0pTLk1ENShfdmVyaWZ5KS50b1N0cmluZygpKTsNCiAgICAgIC8v5p6E6YCg5Zyw5Z2ADQogICAgICB2YXIgaF91cmwgPSBfdXJsKyc/dXNlcm5hbWU9Jyt1bmFtZSsnJnBhc3N3b3JkPScrcHdkKycmdmVyaWZ5PScrdmVyaWZ5Kycmc3lzdGltZT0nK3RpbWU7DQogICAgICAvLyDot7PovazliLDnrKzkuInmlrnns7vnu58NCiAgICAgIC8vIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gaF91cmw7DQogICAgICB3aW5kb3cub3BlbihoX3VybCwgIl9ibGFuayIpOw0KICAgIH0NCiAgfSwNCn07DQo="},{"version":3,"sources":["AppSystem.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AppSystem.vue","sourceRoot":"src/layout/components","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"header-system\">\r\n      <span\r\n        v-for=\"(item, index) in systemList\"\r\n        :key=\"index\"\r\n        class=\"systemName\"\r\n        @click=\"changeSystem(item)\"\r\n      >\r\n        <div v-if=\"item.isActive\" class=\"active\">{{ item.permissionName }}</div>\r\n        <div v-else>{{ item.permissionName }}</div>\r\n      </span>\r\n      <div class=\"header-bottom\"></div>\r\n    </div>\r\n    \r\n  </div>\r\n</template>\r\n<script>\r\nimport CryptoJS from \"crypto-js\";\r\nexport default {\r\n  name: \"AppSystem\",\r\n  data() {\r\n    return {\r\n      bigTitle: this.$bigTitle,\r\n      userInfo: {},\r\n      systemList: [],\r\n    };\r\n  },\r\n  created() {\r\n    this.getSysTemData();\r\n  },\r\n  methods: {\r\n    //获取系统数据\r\n    getSysTemData() {\r\n      this.systemList = JSON.parse(window.localStorage.getItem(\"selectSystem\"));\r\n      if(this.systemList.filter((item)=>item.isActive ===true).length==0){\r\n        this.systemList[0].isActive = true;\r\n      }\r\n    },\r\n    //切换系统\r\n    changeSystem(item) {\r\n      //前往第三方系统\r\n      if(item.externalLinks){\r\n        this.gotoNewSys(item);\r\n        return\r\n      }\r\n      this.systemList.forEach((i) => {\r\n        if (i.permissionId === item.permissionId) {\r\n          i.isActive = true;\r\n        } else {\r\n          i.isActive = false;\r\n        }\r\n      });\r\n      window.localStorage.setItem(\"selectSystem\",JSON.stringify(this.systemList));\r\n      let url = window.location.href;\r\n      url = url.slice(0, url.indexOf(\"#\"));\r\n      window.open(url, \"_self\");\r\n    },\r\n    //前往第三方系统\r\n    gotoNewSys(item){\r\n      let userLoginInfo = JSON.parse(window.localStorage.getItem(\"userLoginInfo\"))\r\n      var _url = item.code;\r\n      var userName = userLoginInfo.loginCode;\r\n      var passwd = userLoginInfo.password;\r\n\r\n      \r\n      // var userName = 'yh1';\r\n      // var passwd = 'admin123';\r\n      //密钥\r\n      var secret= CryptoJS.enc.Utf8.parse(\"BBnFWQox\")\r\n      //key\r\n      var key=\"RWVhfaoECD9miVOZzypqmVKr\"\r\n      //时间\r\n      var systime = this.$utilsFun.dateFormat(new Date(),'YYYYmmddHHMMSS');\r\n\r\n      //加密账号 DES加密方式\r\n      var uname = encodeURIComponent(CryptoJS.TripleDES.encrypt(userName, secret, {\r\n        mode: CryptoJS.mode.ECB,\r\n        padding: CryptoJS.pad.Pkcs7\r\n      }).toString());\r\n\r\n      //加密账号密码\r\n      var pwd=encodeURIComponent(CryptoJS.TripleDES.encrypt(passwd, secret, {\r\n        mode: CryptoJS.mode.ECB,\r\n        padding: CryptoJS.pad.Pkcs7\r\n      }).toString());\r\n\r\n      //加密时间\r\n      var time = encodeURIComponent(CryptoJS.TripleDES.encrypt(systime, secret, {\r\n        mode: CryptoJS.mode.ECB,\r\n        padding: CryptoJS.pad.Pkcs7\r\n      }).toString());\r\n\r\n      //拼接 明文账号+密码+key+时间\r\n      var _verify=`${userName}${passwd}${key}${systime}`;\r\n      //生成签名\r\n      var verify = encodeURIComponent(CryptoJS.MD5(_verify).toString());\r\n      //构造地址\r\n      var h_url = _url+'?username='+uname+'&password='+pwd+'&verify='+verify+'&systime='+time;\r\n      // 跳转到第三方系统\r\n      // window.location.href = h_url;\r\n      window.open(h_url, \"_blank\");\r\n    }\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.header-bottom{\r\n  height: 8px;\r\n  width: calc(100% + 20px);\r\n  margin-left: -20px!important;\r\n  display: flex;\r\n  background: #eff3f9 ;\r\n}\r\n.header-system {\r\n  position: fixed !important;\r\n  top: 60px;\r\n  height: 50px;\r\n  width: 100%;\r\n  z-index: 2000;\r\n  line-height: 50px;\r\n  background: #ffffff;\r\n  padding-left: 20px;\r\n  .systemName {\r\n    cursor:pointer;\r\n    color: #666666;\r\n    line-height: 40px;\r\n    font-size: 16px;\r\n    font-weight: 400;\r\n    font-family: Microsoft YaHei;\r\n    div {\r\n      float: left;\r\n      margin-left: 3px;\r\n      margin-right: 42px;\r\n    }\r\n    .active {\r\n      color: #2d78ff;\r\n      font-weight: bold;\r\n      border-bottom: 3px solid #2d78ff;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}