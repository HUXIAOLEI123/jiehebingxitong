{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\src\\layout\\components\\AppSystem.vue?vue&type=style&index=0&id=e6dc7b5a&lang=scss&scoped=true&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\src\\layout\\components\\AppSystem.vue","mtime":1678931188546},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\css-loader\\dist\\cjs.js","mtime":1678931311747},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1678931317953},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\postcss-loader\\src\\index.js","mtime":1678931314216},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1678931310798},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678931310818},{"path":"C:\\Users\\Administrator\\Desktop\\tuberculosis-fe\\node_modules\\vue-loader\\lib\\index.js","mtime":1678931316857}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmhlYWRlci1ib3R0b217DQogIGhlaWdodDogOHB4Ow0KICB3aWR0aDogY2FsYygxMDAlICsgMjBweCk7DQogIG1hcmdpbi1sZWZ0OiAtMjBweCFpbXBvcnRhbnQ7DQogIGRpc3BsYXk6IGZsZXg7DQogIGJhY2tncm91bmQ6ICNlZmYzZjkgOw0KfQ0KLmhlYWRlci1zeXN0ZW0gew0KICBwb3NpdGlvbjogZml4ZWQgIWltcG9ydGFudDsNCiAgdG9wOiA2MHB4Ow0KICBoZWlnaHQ6IDUwcHg7DQogIHdpZHRoOiAxMDAlOw0KICB6LWluZGV4OiAyMDAwOw0KICBsaW5lLWhlaWdodDogNTBweDsNCiAgYmFja2dyb3VuZDogI2ZmZmZmZjsNCiAgcGFkZGluZy1sZWZ0OiAyMHB4Ow0KICAuc3lzdGVtTmFtZSB7DQogICAgY3Vyc29yOnBvaW50ZXI7DQogICAgY29sb3I6ICM2NjY2NjY7DQogICAgbGluZS1oZWlnaHQ6IDQwcHg7DQogICAgZm9udC1zaXplOiAxNnB4Ow0KICAgIGZvbnQtd2VpZ2h0OiA0MDA7DQogICAgZm9udC1mYW1pbHk6IE1pY3Jvc29mdCBZYUhlaTsNCiAgICBkaXYgew0KICAgICAgZmxvYXQ6IGxlZnQ7DQogICAgICBtYXJnaW4tbGVmdDogM3B4Ow0KICAgICAgbWFyZ2luLXJpZ2h0OiA0MnB4Ow0KICAgIH0NCiAgICAuYWN0aXZlIHsNCiAgICAgIGNvbG9yOiAjMmQ3OGZmOw0KICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICBib3JkZXItYm90dG9tOiAzcHggc29saWQgIzJkNzhmZjsNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["AppSystem.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AppSystem.vue","sourceRoot":"src/layout/components","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"header-system\">\r\n      <span\r\n        v-for=\"(item, index) in systemList\"\r\n        :key=\"index\"\r\n        class=\"systemName\"\r\n        @click=\"changeSystem(item)\"\r\n      >\r\n        <div v-if=\"item.isActive\" class=\"active\">{{ item.permissionName }}</div>\r\n        <div v-else>{{ item.permissionName }}</div>\r\n      </span>\r\n      <div class=\"header-bottom\"></div>\r\n    </div>\r\n    \r\n  </div>\r\n</template>\r\n<script>\r\nimport CryptoJS from \"crypto-js\";\r\nexport default {\r\n  name: \"AppSystem\",\r\n  data() {\r\n    return {\r\n      bigTitle: this.$bigTitle,\r\n      userInfo: {},\r\n      systemList: [],\r\n    };\r\n  },\r\n  created() {\r\n    this.getSysTemData();\r\n  },\r\n  methods: {\r\n    //获取系统数据\r\n    getSysTemData() {\r\n      this.systemList = JSON.parse(window.localStorage.getItem(\"selectSystem\"));\r\n      if(this.systemList.filter((item)=>item.isActive ===true).length==0){\r\n        this.systemList[0].isActive = true;\r\n      }\r\n    },\r\n    //切换系统\r\n    changeSystem(item) {\r\n      //前往第三方系统\r\n      if(item.externalLinks){\r\n        this.gotoNewSys(item);\r\n        return\r\n      }\r\n      this.systemList.forEach((i) => {\r\n        if (i.permissionId === item.permissionId) {\r\n          i.isActive = true;\r\n        } else {\r\n          i.isActive = false;\r\n        }\r\n      });\r\n      window.localStorage.setItem(\"selectSystem\",JSON.stringify(this.systemList));\r\n      let url = window.location.href;\r\n      url = url.slice(0, url.indexOf(\"#\"));\r\n      window.open(url, \"_self\");\r\n    },\r\n    //前往第三方系统\r\n    gotoNewSys(item){\r\n      let userLoginInfo = JSON.parse(window.localStorage.getItem(\"userLoginInfo\"))\r\n      var _url = item.code;\r\n      var userName = userLoginInfo.loginCode;\r\n      var passwd = userLoginInfo.password;\r\n\r\n      \r\n      // var userName = 'yh1';\r\n      // var passwd = 'admin123';\r\n      //密钥\r\n      var secret= CryptoJS.enc.Utf8.parse(\"BBnFWQox\")\r\n      //key\r\n      var key=\"RWVhfaoECD9miVOZzypqmVKr\"\r\n      //时间\r\n      var systime = this.$utilsFun.dateFormat(new Date(),'YYYYmmddHHMMSS');\r\n\r\n      //加密账号 DES加密方式\r\n      var uname = encodeURIComponent(CryptoJS.TripleDES.encrypt(userName, secret, {\r\n        mode: CryptoJS.mode.ECB,\r\n        padding: CryptoJS.pad.Pkcs7\r\n      }).toString());\r\n\r\n      //加密账号密码\r\n      var pwd=encodeURIComponent(CryptoJS.TripleDES.encrypt(passwd, secret, {\r\n        mode: CryptoJS.mode.ECB,\r\n        padding: CryptoJS.pad.Pkcs7\r\n      }).toString());\r\n\r\n      //加密时间\r\n      var time = encodeURIComponent(CryptoJS.TripleDES.encrypt(systime, secret, {\r\n        mode: CryptoJS.mode.ECB,\r\n        padding: CryptoJS.pad.Pkcs7\r\n      }).toString());\r\n\r\n      //拼接 明文账号+密码+key+时间\r\n      var _verify=`${userName}${passwd}${key}${systime}`;\r\n      //生成签名\r\n      var verify = encodeURIComponent(CryptoJS.MD5(_verify).toString());\r\n      //构造地址\r\n      var h_url = _url+'?username='+uname+'&password='+pwd+'&verify='+verify+'&systime='+time;\r\n      // 跳转到第三方系统\r\n      // window.location.href = h_url;\r\n      window.open(h_url, \"_blank\");\r\n    }\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.header-bottom{\r\n  height: 8px;\r\n  width: calc(100% + 20px);\r\n  margin-left: -20px!important;\r\n  display: flex;\r\n  background: #eff3f9 ;\r\n}\r\n.header-system {\r\n  position: fixed !important;\r\n  top: 60px;\r\n  height: 50px;\r\n  width: 100%;\r\n  z-index: 2000;\r\n  line-height: 50px;\r\n  background: #ffffff;\r\n  padding-left: 20px;\r\n  .systemName {\r\n    cursor:pointer;\r\n    color: #666666;\r\n    line-height: 40px;\r\n    font-size: 16px;\r\n    font-weight: 400;\r\n    font-family: Microsoft YaHei;\r\n    div {\r\n      float: left;\r\n      margin-left: 3px;\r\n      margin-right: 42px;\r\n    }\r\n    .active {\r\n      color: #2d78ff;\r\n      font-weight: bold;\r\n      border-bottom: 3px solid #2d78ff;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}