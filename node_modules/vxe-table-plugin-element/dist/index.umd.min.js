!function(e,t){"function"==typeof define&&define.amd?define("vxe-table-plugin-element",["exports","vue","xe-utils","dayjs"],t):"undefined"!=typeof exports?t(exports,require("vue"),require("xe-utils"),require("dayjs")):(t(t={},e.Vue,e.XEUtils,e.dayjs),e.VXETablePluginElement=t)}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(e,p,v,r){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}function o(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach(function(e){a(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l;function m(e){return null==e||""===e}function d(e){return"on"+e.substring(0,1).toLocaleUpperCase()+e.substring(1)}function u(){return"modelValue"}function i(e,t){return(0,r.default)(e).format(t)}function f(e,t){return e&&t.valueFormat?(n=e,t=t.valueFormat,(0,r.default)(n,t).date):e;var n}function c(e,t,n){return e&&i(f(e,t),t.format||n)}function b(e,t,n,r){return v.default.map(e,function(e){return c(e,t,r)}).join(n)}function h(e,t,n,r){return(e=c(e,n,r))>=c(t[0],n,r)&&e<=c(t[1],n,r)}function g(e,t,n,r){return v.default.assign({},r,e.props,a({},u(),n))}function y(e,t,n,r){return v.default.assign({},r,e.props,a({},u(),n))}function w(e){return""+(m(e)?"":e)}function Y(e,t,n){e=e.placeholder;return[(0,p.h)("span",{class:"vxe-cell--label"},e&&m(n)?[(0,p.h)("span",{class:"vxe-cell--placeholder"},w(l._t(e)))]:w(n))]}function E(e,o,t,r){var a=e.events,n="update:modelValue",l=function(e){var t="change";switch(e.name){case"ElAutocomplete":t="select";break;case"ElInput":case"ElInputNumber":t="input"}return t}(e),u=l===n,i={};return v.default.objectEach(a,function(r,e){i[d(e)]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(void 0,[o].concat(t))}}),t&&(i[d(n)]=function(e){t(e),a&&a[n]&&a[n](o,e),u&&r&&r(e)}),!u&&r&&(i[d(l)]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(void 0,t),a&&a[l]&&a[l].apply(a,[o].concat(t))}),i}function C(e,t){var n=t.$table,r=t.row,o=t.column;return E(e,t,function(e){v.default.set(r,o.property,e)},function(){n.updateStatus(t)})}function M(e,t,n,r){return E(e,t,function(e){n.data=e},r)}function D(e,t){var n=t.$form,r=t.data,o=t.property;return E(e,t,function(e){v.default.set(r,o,e)},function(){n.updateStatus(t)})}function k(e,t){var n,r=e.options,o=void 0===r?[]:r,a=e.optionGroups,l=e.props,u=void 0===l?{}:l,i=e.optionProps,d=void 0===i?{}:i,f=e.optionGroupProps,r=t.$table,l=t.rowid,i=t.row,e=t.column,t=u.filterable,u=u.multiple,c=d.label||"label",p=d.value||"value",s=(void 0===f?{}:f).options||"options",i=v.default.get(i,e.property),e=e.id;if(t){l=r.internalData.fullAllDataRowIdData[l];if(l&&(n=(n=l.cellData)||(l.cellData={})),l&&n[e]&&n[e].value===i)return n[e].label}if(m(i))return"";u=v.default.map(u?i:[i],a?function(t){for(var e,n=0;n<a.length&&!(e=v.default.find(a[n][s],function(e){return e[p]===t}));n++);return e?e[c]:t}:function(t){var e=v.default.find(o,function(e){return e[p]===t});return e?e[c]:t}).join(", ");return n&&o&&o.length&&(n[e]={value:i,label:u}),u}function P(e,t){var n=e.props,e=void 0===n?{}:n,n=t.row,t=t.column,n=v.default.get(n,t.property),t=[];return function t(n,e,r,o){var a=r[n];e&&r.length>n&&v.default.each(e,function(e){e.value===a&&(o.push(e.label),t(++n,e.children,r,o))})}(0,e.options,n||[],t),(!1===e.showAllLevels?t.slice(t.length-1,t.length):t).join(" ".concat(e.separator||"/"," "))}function O(e,t){var n=e.props,r=void 0===n?{}:n,e=t.row,n=t.column,t=r.rangeSeparator,o=void 0===t?"-":t,a=v.default.get(e,n.property);switch(r.type){case"week":a=c(a,r,"YYYYwWW");break;case"month":a=c(a,r,"YYYY-MM");break;case"year":a=c(a,r,"YYYY");break;case"dates":a=b(a,r,", ","YYYY-MM-DD");break;case"daterange":a=b(a,r," ".concat(o," "),"YYYY-MM-DD");break;case"datetimerange":a=b(a,r," ".concat(o," "),"YYYY-MM-DD HH:ss:mm");break;case"monthrange":a=b(a,r," ".concat(o," "),"YYYY-MM");break;default:a=c(a,r,"YYYY-MM-DD")}return a}function j(e,t){var n=e.props,r=void 0===n?{}:n,o=t.row,e=t.column,n=r.isRange,t=r.format,a=void 0===t?"hh:mm:ss":t,t=r.rangeSeparator,t=void 0===t?"-":t,e=v.default.get(o,e.property);return e&&n&&(e=v.default.map(e,function(e){return i(f(e,r),a)}).join(" ".concat(t," "))),i(f(e,r),a)}function x(l){return function(e,t){var n=t.row,r=t.column,o=e.name,a=e.attrs,r=v.default.get(n,r.property);return[(0,p.h)((0,p.resolveComponent)(o),s(s(s({},a),g(e,0,r,l)),C(e,t)))]}}function I(e,t){var n=e.attrs;return[(0,p.h)((0,p.resolveComponent)("el-button"),s(s(s({},n),g(e,0,null)),E(e,t)),G(e.content))]}function F(e,t){e=e.children;return e?e.map(function(e){return I(e,t)[0]}):[]}function _(u){return function(r,o){var e=o.column,a=r.name,l=r.attrs;return[(0,p.h)("div",{class:"vxe-table--filter-element-wrapper"},e.filters.map(function(e,t){var n=e.data;return(0,p.h)((0,p.resolveComponent)(a),s(s(s({key:t},l),g(r,0,n,u)),M(r,o,e,function(){S(o,!!e.data,e)})))}))]}}function S(e,t,n){e.$panel.changeOption(null,t,n)}function T(e){var t=e.option,n=e.row,e=e.column,t=t.data,e=v.default.get(n,e.property);return-1<v.default.toValueString(e).indexOf(t)}function A(e){var t=e.option,n=e.row,e=e.column,t=t.data;return v.default.get(n,e.property)===t}function V(e,t){var n=t.label||"label",r=t.value||"value";return v.default.map(e,function(e,t){return(0,p.h)((0,p.resolveComponent)("el-option"),{key:t,value:e[r],label:e[n],disabled:e.disabled})})}function G(e){return[w(e)]}function N(l){return function(e,t){var n=t.data,r=t.property,o=e.name,a=e.attrs,r=v.default.get(n,r);return[(0,p.h)((0,p.resolveComponent)(o),s(s(s({},a),y(e,0,r,l)),D(e,t)))]}}function R(e,t){var n=e.attrs,r=y(e,0,null);return[(0,p.h)((0,p.resolveComponent)("el-button"),s(s(s({},n),r),E(e,t)),{default:function(){return G(e.content||r.content)}})]}function X(e,t){e=e.children;return e?e.map(function(e){return R(e,t)[0]}):[]}function q(o){return function(e){var t=e.row,n=e.column,r=e.options;return r&&r.original?v.default.get(t,n.property):o(n.editRender||n.cellRender,e)}}function $(){return function(e,t){var n=e.name,r=e.options,o=void 0===r?[]:r,a=e.optionProps,l=void 0===a?{}:a,u=e.attrs,r=t.data,a=t.property,i=l.label||"label",d=l.value||"value",a=v.default.get(r,a);return[(0,p.h)((0,p.resolveComponent)("".concat(n,"Group")),s(s(s({},u),y(e,0,a)),D(e,t)),{default:function(){return o.map(function(e,t){return(0,p.h)((0,p.resolveComponent)(n),{key:t,label:e[d],disabled:e.disabled},{default:function(){return G(e[i])}})})}})]}}function n(e,t,n){for(var r,o=e.target;o&&o.nodeType&&o!==document;){if(n&&o.className&&o.className.split&&-1<o.className.split(" ").indexOf(n))r=o;else if(o===t)return{flag:!n||!!r,container:t,targetElem:r};o=o.parentNode}return{flag:!1}}function H(e){var t=e.$event,e=document.body;if(n(t,e,"el-autocomplete-suggestion").flag||n(t,e,"el-select-dropdown").flag||n(t,e,"el-cascader__dropdown").flag||n(t,e,"el-cascader-menus").flag||n(t,e,"el-time-panel").flag||n(t,e,"el-picker-panel").flag||n(t,e,"el-color-dropdown").flag)return!1}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.VXETablePluginElement=void 0,v=t(v),r=t(r);var B={install:function(e){var t=e.interceptor,n=e.renderer;l=e,n.mixin({ElAutocomplete:{autofocus:"input.el-input__inner",renderDefault:x(),renderEdit:x(),renderFilter:_(),defaultFilterMethod:A,renderItemContent:N()},ElInput:{autofocus:"input.el-input__inner",renderDefault:x(),renderEdit:x(),renderFilter:_(),defaultFilterMethod:T,renderItemContent:N()},ElInputNumber:{autofocus:"input.el-input__inner",renderDefault:x(),renderEdit:x(),renderFilter:_(),defaultFilterMethod:T,renderItemContent:N()},ElSelect:{renderEdit:function(e,t){var n=e.options,r=void 0===n?[]:n,o=e.optionGroups,a=e.optionProps,l=void 0===a?{}:a,u=e.optionGroupProps,i=void 0===u?{}:u,n=t.row,a=t.column,u=e.attrs,a=g(e,0,v.default.get(n,a.property)),t=C(e,t);if(o){var d=i.options||"options",f=i.label||"label";return[(0,p.h)((0,p.resolveComponent)("el-select"),s(s(s({},u),a),t),{default:function(){return v.default.map(o,function(e,t){return(0,p.h)((0,p.resolveComponent)("el-option-group"),{key:t,label:e[f]},{default:function(){return V(e[d],l)}})})}})]}return[(0,p.h)((0,p.resolveComponent)("el-select"),s(s(s({},a),u),t),{default:function(){return V(r,l)}})]},renderCell:function(e,t){return Y(e,0,k(e,t))},renderFilter:function(o,a){var e=o.options,l=void 0===e?[]:e,u=o.optionGroups,e=o.optionProps,i=void 0===e?{}:e,e=o.optionGroupProps,e=void 0===e?{}:e,d=e.options||"options",f=e.label||"label",e=a.column,c=o.attrs;return[(0,p.h)("div",{class:"vxe-table--filter-element-wrapper"},u?e.filters.map(function(e,t){var n=e.data,r=g(o,0,n);return(0,p.h)((0,p.resolveComponent)("el-select"),s(s(s({key:t},c),r),M(o,a,e,function(){S(a,r.multiple?e.data&&0<e.data.length:!v.default.eqNull(e.data),e)})),{default:function(){return v.default.map(u,function(e,t){return(0,p.h)((0,p.resolveComponent)("el-option-group"),{key:t,label:e[f]},{default:function(){return V(e[d],i)}})})}})}):e.filters.map(function(e,t){var n=e.data,r=g(o,0,n);return(0,p.h)((0,p.resolveComponent)("el-select"),s(s(s({key:t},c),r),M(o,a,e,function(){S(a,r.multiple?e.data&&0<e.data.length:!v.default.eqNull(e.data),e)})),{default:function(){return V(l,i)}})}))]},defaultFilterMethod:function(e){var t=e.option,n=e.row,r=e.column,e=t.data,t=r.property,r=r.filterRender.props,r=void 0===r?{}:r,t=v.default.get(n,t);return r.multiple?v.default.isArray(t)?v.default.includeArrays(t,e):-1<e.indexOf(t):t==e},renderItemContent:function(e,t){var n=e.options,r=void 0===n?[]:n,o=e.optionGroups,a=e.optionProps,l=void 0===a?{}:a,u=e.optionGroupProps,i=void 0===u?{}:u,n=t.data,a=t.property,u=e.attrs,a=y(e,0,v.default.get(n,a)),t=D(e,t);if(o){var d=i.options||"options",f=i.label||"label";return[(0,p.h)((0,p.resolveComponent)("el-select"),s(s(s({},u),a),t),{default:function(){return v.default.map(o,function(e,t){return(0,p.h)((0,p.resolveComponent)("el-option-group"),{label:e[f],key:t},{default:function(){return V(e[d],l)}})})}})]}return[(0,p.h)((0,p.resolveComponent)("el-select"),s(s(s({},u),a),t),{default:function(){return V(r,l)}})]},exportMethod:q(k)},ElCascader:{renderEdit:x(),renderCell:function(e,t){return Y(e,0,P(e,t))},renderItemContent:N(),exportMethod:q(P)},ElDatePicker:{renderEdit:x(),renderCell:function(e,t){return Y(e,0,O(e,t))},renderFilter:function(r,o){var e=o.column,a=r.name,l=r.attrs;return[(0,p.h)("div",{class:"vxe-table--filter-element-wrapper"},e.filters.map(function(e,t){var n=e.data;return(0,p.h)((0,p.resolveComponent)(a),s(s(s({key:t},l),g(r,0,n)),M(r,o,e,function(){S(o,!!e.data,e)})))}))]},defaultFilterMethod:function(e){var t=e.option,n=e.row,e=e.column,r=t.data,t=e.filterRender.props,o=void 0===t?{}:t,a=v.default.get(n,e.property);if(r)switch(o.type){case"daterange":return h(a,r,o,"YYYY-MM-DD");case"datetimerange":return h(a,r,o,"YYYY-MM-DD HH:ss:mm");case"monthrange":return h(a,r,o,"YYYY-MM");default:return a===r}return!1},renderItemContent:N(),exportMethod:q(O)},ElTimePicker:{renderEdit:x(),renderCell:function(e,t){return Y(e,0,j(e,t))},renderItemContent:N(),exportMethod:q(j)},ElTimeSelect:{renderEdit:x(),renderItemContent:N()},ElRate:{renderDefault:x(),renderEdit:x(),renderFilter:_(),defaultFilterMethod:A,renderItemContent:N()},ElSwitch:{renderDefault:x(),renderEdit:x(),renderFilter:function(r,o){var e=o.column,a=r.name,l=r.attrs;return[(0,p.h)("div",{class:"vxe-table--filter-element-wrapper"},e.filters.map(function(e,t){var n=e.data;return(0,p.h)((0,p.resolveComponent)(a),s(s(s({key:t},l),g(r,0,n)),M(r,o,e,function(){S(o,v.default.isBoolean(e.data),e)})))}))]},defaultFilterMethod:A,renderItemContent:N()},ElSlider:{renderDefault:x(),renderEdit:x(),renderFilter:_(),defaultFilterMethod:A,renderItemContent:N()},ElRadio:{renderItemContent:$()},ElCheckbox:{renderItemContent:$()},ElButton:{renderDefault:I,renderItemContent:R},ElButtons:{renderDefault:F,renderItemContent:X}}),t.add("event.clearFilter",H),t.add("event.clearActived",H),t.add("event.clearAreas",H)}};e.VXETablePluginElement=B,"undefined"!=typeof window&&window.VXETable&&window.VXETable.use&&window.VXETable.use(B),e.default=B});