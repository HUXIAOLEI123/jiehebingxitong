"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.VXETablePluginElement = void 0;

var _vue = require("vue");

var _xeUtils = _interopRequireDefault(require("xe-utils"));

var _dayjs = _interopRequireDefault(require("dayjs"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var vxetable;

function isEmptyValue(cellValue) {
  return cellValue === null || cellValue === undefined || cellValue === '';
}

function getOnName(type) {
  return 'on' + type.substring(0, 1).toLocaleUpperCase() + type.substring(1);
}

function getModelProp(renderOpts) {
  return 'modelValue';
}

function getModelEvent(renderOpts) {
  return 'update:modelValue';
}

function getChangeEvent(renderOpts) {
  var type = 'change';

  switch (renderOpts.name) {
    case 'ElAutocomplete':
      type = 'select';
      break;

    case 'ElInput':
    case 'ElInputNumber':
      type = 'input';
      break;
  }

  return type;
}

function toDayStringDate(value, format) {
  return (0, _dayjs["default"])(value, format).date;
}

function toDayDateString(date, format) {
  return (0, _dayjs["default"])(date).format(format);
}

function parseDate(value, props) {
  return value && props.valueFormat ? toDayStringDate(value, props.valueFormat) : value;
}

function getFormatDate(value, props, defaultFormat) {
  return value ? toDayDateString(parseDate(value, props), props.format || defaultFormat) : value;
}

function getFormatDates(values, props, separator, defaultFormat) {
  return _xeUtils["default"].map(values, function (date) {
    return getFormatDate(date, props, defaultFormat);
  }).join(separator);
}

function equalDaterange(cellValue, data, props, defaultFormat) {
  cellValue = getFormatDate(cellValue, props, defaultFormat);
  return cellValue >= getFormatDate(data[0], props, defaultFormat) && cellValue <= getFormatDate(data[1], props, defaultFormat);
}

function getCellEditFilterProps(renderOpts, params, value, defaultProps) {
  return _xeUtils["default"].assign({}, defaultProps, renderOpts.props, _defineProperty({}, getModelProp(renderOpts), value));
}

function getItemProps(renderOpts, params, value, defaultProps) {
  return _xeUtils["default"].assign({}, defaultProps, renderOpts.props, _defineProperty({}, getModelProp(renderOpts), value));
}

function formatText(cellValue) {
  return '' + (isEmptyValue(cellValue) ? '' : cellValue);
}

function getCellLabelVNs(renderOpts, params, cellLabel) {
  var placeholder = renderOpts.placeholder;
  return [(0, _vue.h)('span', {
    "class": 'vxe-cell--label'
  }, placeholder && isEmptyValue(cellLabel) ? [(0, _vue.h)('span', {
    "class": 'vxe-cell--placeholder'
  }, formatText(vxetable._t(placeholder)))] : formatText(cellLabel))];
}

function getOns(renderOpts, params, inputFunc, changeFunc) {
  var events = renderOpts.events;
  var modelEvent = getModelEvent(renderOpts);
  var changeEvent = getChangeEvent(renderOpts);
  var isSameEvent = changeEvent === modelEvent;
  var ons = {};

  _xeUtils["default"].objectEach(events, function (func, key) {
    ons[getOnName(key)] = function () {
      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }

      func.apply(void 0, [params].concat(args));
    };
  });

  if (inputFunc) {
    ons[getOnName(modelEvent)] = function (targetEvnt) {
      inputFunc(targetEvnt);

      if (events && events[modelEvent]) {
        events[modelEvent](params, targetEvnt);
      }

      if (isSameEvent && changeFunc) {
        changeFunc(targetEvnt);
      }
    };
  }

  if (!isSameEvent && changeFunc) {
    ons[getOnName(changeEvent)] = function () {
      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
        args[_key2] = arguments[_key2];
      }

      changeFunc.apply(void 0, args);

      if (events && events[changeEvent]) {
        events[changeEvent].apply(events, [params].concat(args));
      }
    };
  }

  return ons;
}

function getEditOns(renderOpts, params) {
  var $table = params.$table,
      row = params.row,
      column = params.column;
  return getOns(renderOpts, params, function (value) {
    // 处理 model 值双向绑定
    _xeUtils["default"].set(row, column.property, value);
  }, function () {
    // 处理 change 事件相关逻辑
    $table.updateStatus(params);
  });
}

function getFilterOns(renderOpts, params, option, changeFunc) {
  return getOns(renderOpts, params, function (value) {
    // 处理 model 值双向绑定
    option.data = value;
  }, changeFunc);
}

function getItemOns(renderOpts, params) {
  var $form = params.$form,
      data = params.data,
      property = params.property;
  return getOns(renderOpts, params, function (value) {
    // 处理 model 值双向绑定
    _xeUtils["default"].set(data, property, value);
  }, function () {
    // 处理 change 事件相关逻辑
    $form.updateStatus(params);
  });
}

function matchCascaderData(index, list, values, labels) {
  var val = values[index];

  if (list && values.length > index) {
    _xeUtils["default"].each(list, function (item) {
      if (item.value === val) {
        labels.push(item.label);
        matchCascaderData(++index, item.children, values, labels);
      }
    });
  }
}

function getSelectCellValue(renderOpts, params) {
  var _renderOpts$options = renderOpts.options,
      options = _renderOpts$options === void 0 ? [] : _renderOpts$options,
      optionGroups = renderOpts.optionGroups,
      _renderOpts$props = renderOpts.props,
      props = _renderOpts$props === void 0 ? {} : _renderOpts$props,
      _renderOpts$optionPro = renderOpts.optionProps,
      optionProps = _renderOpts$optionPro === void 0 ? {} : _renderOpts$optionPro,
      _renderOpts$optionGro = renderOpts.optionGroupProps,
      optionGroupProps = _renderOpts$optionGro === void 0 ? {} : _renderOpts$optionGro;
  var $table = params.$table,
      rowid = params.rowid,
      row = params.row,
      column = params.column;
  var filterable = props.filterable,
      multiple = props.multiple;
  var labelProp = optionProps.label || 'label';
  var valueProp = optionProps.value || 'value';
  var groupOptions = optionGroupProps.options || 'options';

  var cellValue = _xeUtils["default"].get(row, column.property);

  var colid = column.id;
  var cellData;

  if (filterable) {
    var internalData = $table.internalData;
    var fullAllDataRowIdData = internalData.fullAllDataRowIdData;
    var rest = fullAllDataRowIdData[rowid];

    if (rest) {
      cellData = rest.cellData;

      if (!cellData) {
        cellData = rest.cellData = {};
      }
    }

    if (rest && cellData[colid] && cellData[colid].value === cellValue) {
      return cellData[colid].label;
    }
  }

  if (!isEmptyValue(cellValue)) {
    var selectlabel = _xeUtils["default"].map(multiple ? cellValue : [cellValue], optionGroups ? function (value) {
      var selectItem;

      for (var index = 0; index < optionGroups.length; index++) {
        selectItem = _xeUtils["default"].find(optionGroups[index][groupOptions], function (item) {
          return item[valueProp] === value;
        });

        if (selectItem) {
          break;
        }
      }

      return selectItem ? selectItem[labelProp] : value;
    } : function (value) {
      var selectItem = _xeUtils["default"].find(options, function (item) {
        return item[valueProp] === value;
      });

      return selectItem ? selectItem[labelProp] : value;
    }).join(', ');

    if (cellData && options && options.length) {
      cellData[colid] = {
        value: cellValue,
        label: selectlabel
      };
    }

    return selectlabel;
  }

  return '';
}

function getCascaderCellValue(renderOpts, params) {
  var _renderOpts$props2 = renderOpts.props,
      props = _renderOpts$props2 === void 0 ? {} : _renderOpts$props2;
  var row = params.row,
      column = params.column;

  var cellValue = _xeUtils["default"].get(row, column.property);

  var values = cellValue || [];
  var labels = [];
  matchCascaderData(0, props.options, values, labels);
  return (props.showAllLevels === false ? labels.slice(labels.length - 1, labels.length) : labels).join(" ".concat(props.separator || '/', " "));
}

function getDatePickerCellValue(renderOpts, params) {
  var _renderOpts$props3 = renderOpts.props,
      props = _renderOpts$props3 === void 0 ? {} : _renderOpts$props3;
  var row = params.row,
      column = params.column;
  var _props$rangeSeparator = props.rangeSeparator,
      rangeSeparator = _props$rangeSeparator === void 0 ? '-' : _props$rangeSeparator;

  var cellValue = _xeUtils["default"].get(row, column.property);

  switch (props.type) {
    case 'week':
      cellValue = getFormatDate(cellValue, props, 'YYYYwWW');
      break;

    case 'month':
      cellValue = getFormatDate(cellValue, props, 'YYYY-MM');
      break;

    case 'year':
      cellValue = getFormatDate(cellValue, props, 'YYYY');
      break;

    case 'dates':
      cellValue = getFormatDates(cellValue, props, ', ', 'YYYY-MM-DD');
      break;

    case 'daterange':
      cellValue = getFormatDates(cellValue, props, " ".concat(rangeSeparator, " "), 'YYYY-MM-DD');
      break;

    case 'datetimerange':
      cellValue = getFormatDates(cellValue, props, " ".concat(rangeSeparator, " "), 'YYYY-MM-DD HH:ss:mm');
      break;

    case 'monthrange':
      cellValue = getFormatDates(cellValue, props, " ".concat(rangeSeparator, " "), 'YYYY-MM');
      break;

    default:
      cellValue = getFormatDate(cellValue, props, 'YYYY-MM-DD');
  }

  return cellValue;
}

function getTimePickerCellValue(renderOpts, params) {
  var _renderOpts$props4 = renderOpts.props,
      props = _renderOpts$props4 === void 0 ? {} : _renderOpts$props4;
  var row = params.row,
      column = params.column;
  var isRange = props.isRange,
      _props$format = props.format,
      format = _props$format === void 0 ? 'hh:mm:ss' : _props$format,
      _props$rangeSeparator2 = props.rangeSeparator,
      rangeSeparator = _props$rangeSeparator2 === void 0 ? '-' : _props$rangeSeparator2;

  var cellValue = _xeUtils["default"].get(row, column.property);

  if (cellValue && isRange) {
    cellValue = _xeUtils["default"].map(cellValue, function (date) {
      return toDayDateString(parseDate(date, props), format);
    }).join(" ".concat(rangeSeparator, " "));
  }

  return toDayDateString(parseDate(cellValue, props), format);
}

function createEditRender(defaultProps) {
  return function (renderOpts, params) {
    var row = params.row,
        column = params.column;
    var name = renderOpts.name,
        attrs = renderOpts.attrs;

    var cellValue = _xeUtils["default"].get(row, column.property);

    return [(0, _vue.h)((0, _vue.resolveComponent)(name), _objectSpread(_objectSpread(_objectSpread({}, attrs), getCellEditFilterProps(renderOpts, params, cellValue, defaultProps)), getEditOns(renderOpts, params)))];
  };
}

function defaultButtonEditRender(renderOpts, params) {
  var attrs = renderOpts.attrs;
  return [(0, _vue.h)((0, _vue.resolveComponent)('el-button'), _objectSpread(_objectSpread(_objectSpread({}, attrs), getCellEditFilterProps(renderOpts, params, null)), getOns(renderOpts, params)), cellText(renderOpts.content))];
}

function defaultButtonsEditRender(renderOpts, params) {
  var children = renderOpts.children;

  if (children) {
    return children.map(function (childRenderOpts) {
      return defaultButtonEditRender(childRenderOpts, params)[0];
    });
  }

  return [];
}

function createFilterRender(defaultProps) {
  return function (renderOpts, params) {
    var column = params.column;
    var name = renderOpts.name,
        attrs = renderOpts.attrs;
    return [(0, _vue.h)('div', {
      "class": 'vxe-table--filter-element-wrapper'
    }, column.filters.map(function (option, oIndex) {
      var optionValue = option.data;
      return (0, _vue.h)((0, _vue.resolveComponent)(name), _objectSpread(_objectSpread(_objectSpread({
        key: oIndex
      }, attrs), getCellEditFilterProps(renderOpts, params, optionValue, defaultProps)), getFilterOns(renderOpts, params, option, function () {
        // 处理 change 事件相关逻辑
        handleConfirmFilter(params, !!option.data, option);
      })));
    }))];
  };
}

function handleConfirmFilter(params, checked, option) {
  var $panel = params.$panel;
  $panel.changeOption(null, checked, option);
}
/**
 * 模糊匹配
 * @param params
 */


function defaultFuzzyFilterMethod(params) {
  var option = params.option,
      row = params.row,
      column = params.column;
  var data = option.data;

  var cellValue = _xeUtils["default"].get(row, column.property);

  return _xeUtils["default"].toValueString(cellValue).indexOf(data) > -1;
}
/**
 * 精确匹配
 * @param params
 */


function defaultExactFilterMethod(params) {
  var option = params.option,
      row = params.row,
      column = params.column;
  var data = option.data;

  var cellValue = _xeUtils["default"].get(row, column.property);
  /* eslint-disable eqeqeq */


  return cellValue === data;
}

function renderOptions(options, optionProps) {
  var labelProp = optionProps.label || 'label';
  var valueProp = optionProps.value || 'value';
  return _xeUtils["default"].map(options, function (item, oIndex) {
    return (0, _vue.h)((0, _vue.resolveComponent)('el-option'), {
      key: oIndex,
      value: item[valueProp],
      label: item[labelProp],
      disabled: item.disabled
    });
  });
}

function cellText(cellValue) {
  return [formatText(cellValue)];
}

function createFormItemRender(defaultProps) {
  return function (renderOpts, params) {
    var data = params.data,
        property = params.property;
    var name = renderOpts.name;
    var attrs = renderOpts.attrs;

    var itemValue = _xeUtils["default"].get(data, property);

    return [(0, _vue.h)((0, _vue.resolveComponent)(name), _objectSpread(_objectSpread(_objectSpread({}, attrs), getItemProps(renderOpts, params, itemValue, defaultProps)), getItemOns(renderOpts, params)))];
  };
}

function defaultButtonItemRender(renderOpts, params) {
  var attrs = renderOpts.attrs;
  var props = getItemProps(renderOpts, params, null);
  return [(0, _vue.h)((0, _vue.resolveComponent)('el-button'), _objectSpread(_objectSpread(_objectSpread({}, attrs), props), getOns(renderOpts, params)), {
    "default": function _default() {
      return cellText(renderOpts.content || props.content);
    }
  })];
}

function defaultButtonsItemRender(renderOpts, params) {
  var children = renderOpts.children;

  if (children) {
    return children.map(function (childRenderOpts) {
      return defaultButtonItemRender(childRenderOpts, params)[0];
    });
  }

  return [];
}

function createExportMethod(getExportCellValue) {
  return function (params) {
    var row = params.row,
        column = params.column,
        options = params.options;
    return options && options.original ? _xeUtils["default"].get(row, column.property) : getExportCellValue(column.editRender || column.cellRender, params);
  };
}

function createFormItemRadioAndCheckboxRender() {
  return function (renderOpts, params) {
    var name = renderOpts.name,
        _renderOpts$options2 = renderOpts.options,
        options = _renderOpts$options2 === void 0 ? [] : _renderOpts$options2,
        _renderOpts$optionPro2 = renderOpts.optionProps,
        optionProps = _renderOpts$optionPro2 === void 0 ? {} : _renderOpts$optionPro2,
        attrs = renderOpts.attrs;
    var data = params.data,
        property = params.property;
    var labelProp = optionProps.label || 'label';
    var valueProp = optionProps.value || 'value';

    var itemValue = _xeUtils["default"].get(data, property);

    return [(0, _vue.h)((0, _vue.resolveComponent)("".concat(name, "Group")), _objectSpread(_objectSpread(_objectSpread({}, attrs), getItemProps(renderOpts, params, itemValue)), getItemOns(renderOpts, params)), {
      "default": function _default() {
        return options.map(function (option, oIndex) {
          return (0, _vue.h)((0, _vue.resolveComponent)(name), {
            key: oIndex,
            label: option[valueProp],
            disabled: option.disabled
          }, {
            "default": function _default() {
              return cellText(option[labelProp]);
            }
          });
        });
      }
    })];
  };
}
/**
 * 检查触发源是否属于目标节点
 */


function getEventTargetNode(evnt, container, className) {
  var targetElem;
  var target = evnt.target;

  while (target && target.nodeType && target !== document) {
    if (className && target.className && target.className.split && target.className.split(' ').indexOf(className) > -1) {
      targetElem = target;
    } else if (target === container) {
      return {
        flag: className ? !!targetElem : true,
        container: container,
        targetElem: targetElem
      };
    }

    target = target.parentNode;
  }

  return {
    flag: false
  };
}
/**
 * 事件兼容性处理
 */


function handleClearEvent(params) {
  var $event = params.$event;
  var bodyElem = document.body;

  if ( // 远程搜索
  getEventTargetNode($event, bodyElem, 'el-autocomplete-suggestion').flag || // 下拉框
  getEventTargetNode($event, bodyElem, 'el-select-dropdown').flag || // 级联
  getEventTargetNode($event, bodyElem, 'el-cascader__dropdown').flag || getEventTargetNode($event, bodyElem, 'el-cascader-menus').flag || // 日期
  getEventTargetNode($event, bodyElem, 'el-time-panel').flag || getEventTargetNode($event, bodyElem, 'el-picker-panel').flag || // 颜色
  getEventTargetNode($event, bodyElem, 'el-color-dropdown').flag) {
    return false;
  }
}
/**
 * 基于 vxe-table 表格的适配插件，用于兼容 element-ui 组件库
 */


var VXETablePluginElement = {
  install: function install(vxetablecore) {
    var interceptor = vxetablecore.interceptor,
        renderer = vxetablecore.renderer;
    vxetable = vxetablecore;
    renderer.mixin({
      ElAutocomplete: {
        autofocus: 'input.el-input__inner',
        renderDefault: createEditRender(),
        renderEdit: createEditRender(),
        renderFilter: createFilterRender(),
        defaultFilterMethod: defaultExactFilterMethod,
        renderItemContent: createFormItemRender()
      },
      ElInput: {
        autofocus: 'input.el-input__inner',
        renderDefault: createEditRender(),
        renderEdit: createEditRender(),
        renderFilter: createFilterRender(),
        defaultFilterMethod: defaultFuzzyFilterMethod,
        renderItemContent: createFormItemRender()
      },
      ElInputNumber: {
        autofocus: 'input.el-input__inner',
        renderDefault: createEditRender(),
        renderEdit: createEditRender(),
        renderFilter: createFilterRender(),
        defaultFilterMethod: defaultFuzzyFilterMethod,
        renderItemContent: createFormItemRender()
      },
      ElSelect: {
        renderEdit: function renderEdit(renderOpts, params) {
          var _renderOpts$options3 = renderOpts.options,
              options = _renderOpts$options3 === void 0 ? [] : _renderOpts$options3,
              optionGroups = renderOpts.optionGroups,
              _renderOpts$optionPro3 = renderOpts.optionProps,
              optionProps = _renderOpts$optionPro3 === void 0 ? {} : _renderOpts$optionPro3,
              _renderOpts$optionGro2 = renderOpts.optionGroupProps,
              optionGroupProps = _renderOpts$optionGro2 === void 0 ? {} : _renderOpts$optionGro2;
          var row = params.row,
              column = params.column;
          var attrs = renderOpts.attrs;

          var cellValue = _xeUtils["default"].get(row, column.property);

          var props = getCellEditFilterProps(renderOpts, params, cellValue);
          var ons = getEditOns(renderOpts, params);

          if (optionGroups) {
            var groupOptions = optionGroupProps.options || 'options';
            var groupLabel = optionGroupProps.label || 'label';
            return [(0, _vue.h)((0, _vue.resolveComponent)('el-select'), _objectSpread(_objectSpread(_objectSpread({}, attrs), props), ons), {
              "default": function _default() {
                return _xeUtils["default"].map(optionGroups, function (group, gIndex) {
                  return (0, _vue.h)((0, _vue.resolveComponent)('el-option-group'), {
                    key: gIndex,
                    label: group[groupLabel]
                  }, {
                    "default": function _default() {
                      return renderOptions(group[groupOptions], optionProps);
                    }
                  });
                });
              }
            })];
          }

          return [(0, _vue.h)((0, _vue.resolveComponent)('el-select'), _objectSpread(_objectSpread(_objectSpread({}, props), attrs), ons), {
            "default": function _default() {
              return renderOptions(options, optionProps);
            }
          })];
        },
        renderCell: function renderCell(renderOpts, params) {
          return getCellLabelVNs(renderOpts, params, getSelectCellValue(renderOpts, params));
        },
        renderFilter: function renderFilter(renderOpts, params) {
          var _renderOpts$options4 = renderOpts.options,
              options = _renderOpts$options4 === void 0 ? [] : _renderOpts$options4,
              optionGroups = renderOpts.optionGroups,
              _renderOpts$optionPro4 = renderOpts.optionProps,
              optionProps = _renderOpts$optionPro4 === void 0 ? {} : _renderOpts$optionPro4,
              _renderOpts$optionGro3 = renderOpts.optionGroupProps,
              optionGroupProps = _renderOpts$optionGro3 === void 0 ? {} : _renderOpts$optionGro3;
          var groupOptions = optionGroupProps.options || 'options';
          var groupLabel = optionGroupProps.label || 'label';
          var column = params.column;
          var attrs = renderOpts.attrs;
          return [(0, _vue.h)('div', {
            "class": 'vxe-table--filter-element-wrapper'
          }, optionGroups ? column.filters.map(function (option, oIndex) {
            var optionValue = option.data;
            var props = getCellEditFilterProps(renderOpts, params, optionValue);
            return (0, _vue.h)((0, _vue.resolveComponent)('el-select'), _objectSpread(_objectSpread(_objectSpread({
              key: oIndex
            }, attrs), props), getFilterOns(renderOpts, params, option, function () {
              // 处理 change 事件相关逻辑
              handleConfirmFilter(params, props.multiple ? option.data && option.data.length > 0 : !_xeUtils["default"].eqNull(option.data), option);
            })), {
              "default": function _default() {
                return _xeUtils["default"].map(optionGroups, function (group, gIndex) {
                  return (0, _vue.h)((0, _vue.resolveComponent)('el-option-group'), {
                    key: gIndex,
                    label: group[groupLabel]
                  }, {
                    "default": function _default() {
                      return renderOptions(group[groupOptions], optionProps);
                    }
                  });
                });
              }
            });
          }) : column.filters.map(function (option, oIndex) {
            var optionValue = option.data;
            var props = getCellEditFilterProps(renderOpts, params, optionValue);
            return (0, _vue.h)((0, _vue.resolveComponent)('el-select'), _objectSpread(_objectSpread(_objectSpread({
              key: oIndex
            }, attrs), props), getFilterOns(renderOpts, params, option, function () {
              // 处理 change 事件相关逻辑
              handleConfirmFilter(params, props.multiple ? option.data && option.data.length > 0 : !_xeUtils["default"].eqNull(option.data), option);
            })), {
              "default": function _default() {
                return renderOptions(options, optionProps);
              }
            });
          }))];
        },
        defaultFilterMethod: function defaultFilterMethod(params) {
          var option = params.option,
              row = params.row,
              column = params.column;
          var data = option.data;
          var property = column.property,
              renderOpts = column.filterRender;
          var _renderOpts$props5 = renderOpts.props,
              props = _renderOpts$props5 === void 0 ? {} : _renderOpts$props5;

          var cellValue = _xeUtils["default"].get(row, property);

          if (props.multiple) {
            if (_xeUtils["default"].isArray(cellValue)) {
              return _xeUtils["default"].includeArrays(cellValue, data);
            }

            return data.indexOf(cellValue) > -1;
          }
          /* eslint-disable eqeqeq */


          return cellValue == data;
        },
        renderItemContent: function renderItemContent(renderOpts, params) {
          var _renderOpts$options5 = renderOpts.options,
              options = _renderOpts$options5 === void 0 ? [] : _renderOpts$options5,
              optionGroups = renderOpts.optionGroups,
              _renderOpts$optionPro5 = renderOpts.optionProps,
              optionProps = _renderOpts$optionPro5 === void 0 ? {} : _renderOpts$optionPro5,
              _renderOpts$optionGro4 = renderOpts.optionGroupProps,
              optionGroupProps = _renderOpts$optionGro4 === void 0 ? {} : _renderOpts$optionGro4;
          var data = params.data,
              property = params.property;
          var attrs = renderOpts.attrs;

          var itemValue = _xeUtils["default"].get(data, property);

          var props = getItemProps(renderOpts, params, itemValue);
          var ons = getItemOns(renderOpts, params);

          if (optionGroups) {
            var groupOptions = optionGroupProps.options || 'options';
            var groupLabel = optionGroupProps.label || 'label';
            return [(0, _vue.h)((0, _vue.resolveComponent)('el-select'), _objectSpread(_objectSpread(_objectSpread({}, attrs), props), ons), {
              "default": function _default() {
                return _xeUtils["default"].map(optionGroups, function (group, gIndex) {
                  return (0, _vue.h)((0, _vue.resolveComponent)('el-option-group'), {
                    label: group[groupLabel],
                    key: gIndex
                  }, {
                    "default": function _default() {
                      return renderOptions(group[groupOptions], optionProps);
                    }
                  });
                });
              }
            })];
          }

          return [(0, _vue.h)((0, _vue.resolveComponent)('el-select'), _objectSpread(_objectSpread(_objectSpread({}, attrs), props), ons), {
            "default": function _default() {
              return renderOptions(options, optionProps);
            }
          })];
        },
        exportMethod: createExportMethod(getSelectCellValue)
      },
      ElCascader: {
        renderEdit: createEditRender(),
        renderCell: function renderCell(renderOpts, params) {
          return getCellLabelVNs(renderOpts, params, getCascaderCellValue(renderOpts, params));
        },
        renderItemContent: createFormItemRender(),
        exportMethod: createExportMethod(getCascaderCellValue)
      },
      ElDatePicker: {
        renderEdit: createEditRender(),
        renderCell: function renderCell(renderOpts, params) {
          return getCellLabelVNs(renderOpts, params, getDatePickerCellValue(renderOpts, params));
        },
        renderFilter: function renderFilter(renderOpts, params) {
          var column = params.column;
          var name = renderOpts.name,
              attrs = renderOpts.attrs;
          return [(0, _vue.h)('div', {
            "class": 'vxe-table--filter-element-wrapper'
          }, column.filters.map(function (option, oIndex) {
            var optionValue = option.data;
            return (0, _vue.h)((0, _vue.resolveComponent)(name), _objectSpread(_objectSpread(_objectSpread({
              key: oIndex
            }, attrs), getCellEditFilterProps(renderOpts, params, optionValue)), getFilterOns(renderOpts, params, option, function () {
              // 处理 change 事件相关逻辑
              handleConfirmFilter(params, !!option.data, option);
            })));
          }))];
        },
        defaultFilterMethod: function defaultFilterMethod(params) {
          var option = params.option,
              row = params.row,
              column = params.column;
          var data = option.data;
          var renderOpts = column.filterRender;
          var _renderOpts$props6 = renderOpts.props,
              props = _renderOpts$props6 === void 0 ? {} : _renderOpts$props6;

          var cellValue = _xeUtils["default"].get(row, column.property);

          if (data) {
            switch (props.type) {
              case 'daterange':
                return equalDaterange(cellValue, data, props, 'YYYY-MM-DD');

              case 'datetimerange':
                return equalDaterange(cellValue, data, props, 'YYYY-MM-DD HH:ss:mm');

              case 'monthrange':
                return equalDaterange(cellValue, data, props, 'YYYY-MM');

              default:
                return cellValue === data;
            }
          }

          return false;
        },
        renderItemContent: createFormItemRender(),
        exportMethod: createExportMethod(getDatePickerCellValue)
      },
      ElTimePicker: {
        renderEdit: createEditRender(),
        renderCell: function renderCell(renderOpts, params) {
          return getCellLabelVNs(renderOpts, params, getTimePickerCellValue(renderOpts, params));
        },
        renderItemContent: createFormItemRender(),
        exportMethod: createExportMethod(getTimePickerCellValue)
      },
      ElTimeSelect: {
        renderEdit: createEditRender(),
        renderItemContent: createFormItemRender()
      },
      ElRate: {
        renderDefault: createEditRender(),
        renderEdit: createEditRender(),
        renderFilter: createFilterRender(),
        defaultFilterMethod: defaultExactFilterMethod,
        renderItemContent: createFormItemRender()
      },
      ElSwitch: {
        renderDefault: createEditRender(),
        renderEdit: createEditRender(),
        renderFilter: function renderFilter(renderOpts, params) {
          var column = params.column;
          var name = renderOpts.name,
              attrs = renderOpts.attrs;
          return [(0, _vue.h)('div', {
            "class": 'vxe-table--filter-element-wrapper'
          }, column.filters.map(function (option, oIndex) {
            var optionValue = option.data;
            return (0, _vue.h)((0, _vue.resolveComponent)(name), _objectSpread(_objectSpread(_objectSpread({
              key: oIndex
            }, attrs), getCellEditFilterProps(renderOpts, params, optionValue)), getFilterOns(renderOpts, params, option, function () {
              // 处理 change 事件相关逻辑
              handleConfirmFilter(params, _xeUtils["default"].isBoolean(option.data), option);
            })));
          }))];
        },
        defaultFilterMethod: defaultExactFilterMethod,
        renderItemContent: createFormItemRender()
      },
      ElSlider: {
        renderDefault: createEditRender(),
        renderEdit: createEditRender(),
        renderFilter: createFilterRender(),
        defaultFilterMethod: defaultExactFilterMethod,
        renderItemContent: createFormItemRender()
      },
      ElRadio: {
        renderItemContent: createFormItemRadioAndCheckboxRender()
      },
      ElCheckbox: {
        renderItemContent: createFormItemRadioAndCheckboxRender()
      },
      ElButton: {
        renderDefault: defaultButtonEditRender,
        renderItemContent: defaultButtonItemRender
      },
      ElButtons: {
        renderDefault: defaultButtonsEditRender,
        renderItemContent: defaultButtonsItemRender
      }
    });
    interceptor.add('event.clearFilter', handleClearEvent);
    interceptor.add('event.clearActived', handleClearEvent);
    interceptor.add('event.clearAreas', handleClearEvent);
  }
};
exports.VXETablePluginElement = VXETablePluginElement;

if (typeof window !== 'undefined' && window.VXETable && window.VXETable.use) {
  window.VXETable.use(VXETablePluginElement);
}

var _default2 = VXETablePluginElement;
exports["default"] = _default2;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzIiwiaW5kZXguanMiXSwibmFtZXMiOlsidnhldGFibGUiLCJpc0VtcHR5VmFsdWUiLCJjZWxsVmFsdWUiLCJ1bmRlZmluZWQiLCJnZXRPbk5hbWUiLCJ0eXBlIiwic3Vic3RyaW5nIiwidG9Mb2NhbGVVcHBlckNhc2UiLCJnZXRNb2RlbFByb3AiLCJyZW5kZXJPcHRzIiwiZ2V0TW9kZWxFdmVudCIsImdldENoYW5nZUV2ZW50IiwibmFtZSIsInRvRGF5U3RyaW5nRGF0ZSIsInZhbHVlIiwiZm9ybWF0IiwiZGF0ZSIsInRvRGF5RGF0ZVN0cmluZyIsInBhcnNlRGF0ZSIsInByb3BzIiwidmFsdWVGb3JtYXQiLCJnZXRGb3JtYXREYXRlIiwiZGVmYXVsdEZvcm1hdCIsImdldEZvcm1hdERhdGVzIiwidmFsdWVzIiwic2VwYXJhdG9yIiwiWEVVdGlscyIsIm1hcCIsImpvaW4iLCJlcXVhbERhdGVyYW5nZSIsImRhdGEiLCJnZXRDZWxsRWRpdEZpbHRlclByb3BzIiwicGFyYW1zIiwiZGVmYXVsdFByb3BzIiwiYXNzaWduIiwiZ2V0SXRlbVByb3BzIiwiZm9ybWF0VGV4dCIsImdldENlbGxMYWJlbFZOcyIsImNlbGxMYWJlbCIsInBsYWNlaG9sZGVyIiwiX3QiLCJnZXRPbnMiLCJpbnB1dEZ1bmMiLCJjaGFuZ2VGdW5jIiwiZXZlbnRzIiwibW9kZWxFdmVudCIsImNoYW5nZUV2ZW50IiwiaXNTYW1lRXZlbnQiLCJvbnMiLCJvYmplY3RFYWNoIiwiZnVuYyIsImtleSIsImFyZ3MiLCJ0YXJnZXRFdm50IiwiZ2V0RWRpdE9ucyIsIiR0YWJsZSIsInJvdyIsImNvbHVtbiIsInNldCIsInByb3BlcnR5IiwidXBkYXRlU3RhdHVzIiwiZ2V0RmlsdGVyT25zIiwib3B0aW9uIiwiZ2V0SXRlbU9ucyIsIiRmb3JtIiwibWF0Y2hDYXNjYWRlckRhdGEiLCJpbmRleCIsImxpc3QiLCJsYWJlbHMiLCJ2YWwiLCJsZW5ndGgiLCJlYWNoIiwiaXRlbSIsInB1c2giLCJsYWJlbCIsImNoaWxkcmVuIiwiZ2V0U2VsZWN0Q2VsbFZhbHVlIiwib3B0aW9ucyIsIm9wdGlvbkdyb3VwcyIsIm9wdGlvblByb3BzIiwib3B0aW9uR3JvdXBQcm9wcyIsInJvd2lkIiwiZmlsdGVyYWJsZSIsIm11bHRpcGxlIiwibGFiZWxQcm9wIiwidmFsdWVQcm9wIiwiZ3JvdXBPcHRpb25zIiwiZ2V0IiwiY29saWQiLCJpZCIsImNlbGxEYXRhIiwiaW50ZXJuYWxEYXRhIiwiZnVsbEFsbERhdGFSb3dJZERhdGEiLCJyZXN0Iiwic2VsZWN0bGFiZWwiLCJzZWxlY3RJdGVtIiwiZmluZCIsImdldENhc2NhZGVyQ2VsbFZhbHVlIiwic2hvd0FsbExldmVscyIsInNsaWNlIiwiZ2V0RGF0ZVBpY2tlckNlbGxWYWx1ZSIsInJhbmdlU2VwYXJhdG9yIiwiZ2V0VGltZVBpY2tlckNlbGxWYWx1ZSIsImlzUmFuZ2UiLCJjcmVhdGVFZGl0UmVuZGVyIiwiYXR0cnMiLCJkZWZhdWx0QnV0dG9uRWRpdFJlbmRlciIsImNlbGxUZXh0IiwiY29udGVudCIsImRlZmF1bHRCdXR0b25zRWRpdFJlbmRlciIsImNoaWxkUmVuZGVyT3B0cyIsImNyZWF0ZUZpbHRlclJlbmRlciIsImZpbHRlcnMiLCJvSW5kZXgiLCJvcHRpb25WYWx1ZSIsImhhbmRsZUNvbmZpcm1GaWx0ZXIiLCJjaGVja2VkIiwiJHBhbmVsIiwiY2hhbmdlT3B0aW9uIiwiZGVmYXVsdEZ1enp5RmlsdGVyTWV0aG9kIiwidG9WYWx1ZVN0cmluZyIsImluZGV4T2YiLCJkZWZhdWx0RXhhY3RGaWx0ZXJNZXRob2QiLCJyZW5kZXJPcHRpb25zIiwiZGlzYWJsZWQiLCJjcmVhdGVGb3JtSXRlbVJlbmRlciIsIml0ZW1WYWx1ZSIsImRlZmF1bHRCdXR0b25JdGVtUmVuZGVyIiwiZGVmYXVsdEJ1dHRvbnNJdGVtUmVuZGVyIiwiY3JlYXRlRXhwb3J0TWV0aG9kIiwiZ2V0RXhwb3J0Q2VsbFZhbHVlIiwib3JpZ2luYWwiLCJlZGl0UmVuZGVyIiwiY2VsbFJlbmRlciIsImNyZWF0ZUZvcm1JdGVtUmFkaW9BbmRDaGVja2JveFJlbmRlciIsImdldEV2ZW50VGFyZ2V0Tm9kZSIsImV2bnQiLCJjb250YWluZXIiLCJjbGFzc05hbWUiLCJ0YXJnZXRFbGVtIiwidGFyZ2V0Iiwibm9kZVR5cGUiLCJkb2N1bWVudCIsInNwbGl0IiwiZmxhZyIsInBhcmVudE5vZGUiLCJoYW5kbGVDbGVhckV2ZW50IiwiJGV2ZW50IiwiYm9keUVsZW0iLCJib2R5IiwiVlhFVGFibGVQbHVnaW5FbGVtZW50IiwiaW5zdGFsbCIsInZ4ZXRhYmxlY29yZSIsImludGVyY2VwdG9yIiwicmVuZGVyZXIiLCJtaXhpbiIsIkVsQXV0b2NvbXBsZXRlIiwiYXV0b2ZvY3VzIiwicmVuZGVyRGVmYXVsdCIsInJlbmRlckVkaXQiLCJyZW5kZXJGaWx0ZXIiLCJkZWZhdWx0RmlsdGVyTWV0aG9kIiwicmVuZGVySXRlbUNvbnRlbnQiLCJFbElucHV0IiwiRWxJbnB1dE51bWJlciIsIkVsU2VsZWN0IiwiZ3JvdXBMYWJlbCIsImdyb3VwIiwiZ0luZGV4IiwicmVuZGVyQ2VsbCIsImVxTnVsbCIsImZpbHRlclJlbmRlciIsImlzQXJyYXkiLCJpbmNsdWRlQXJyYXlzIiwiZXhwb3J0TWV0aG9kIiwiRWxDYXNjYWRlciIsIkVsRGF0ZVBpY2tlciIsIkVsVGltZVBpY2tlciIsIkVsVGltZVNlbGVjdCIsIkVsUmF0ZSIsIkVsU3dpdGNoIiwiaXNCb29sZWFuIiwiRWxTbGlkZXIiLCJFbFJhZGlvIiwiRWxDaGVja2JveCIsIkVsQnV0dG9uIiwiRWxCdXR0b25zIiwiYWRkIiwid2luZG93IiwiVlhFVGFibGUiLCJ1c2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFFQTs7Ozs7Ozs7OztBQUVBLElBQUlBLFFBQUo7O0FBRUEsU0FBU0MsWUFBVCxDQUF1QkMsU0FBdkIsRUFBcUM7QUFDbkMsU0FBT0EsU0FBUyxLQUFLLElBQWQsSUFBc0JBLFNBQVMsS0FBS0MsU0FBcEMsSUFBaURELFNBQVMsS0FB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QTJTQXlCLElBQUFBLFdBQVcsQ0FBQ2tDLEdBQVosQ0FBZ0IsbUJBQWhCLEVBQXFDekMsZ0JBQXJDO0FBQ0FPLElBQUFBLFdBQVcsQ0FBQ2tDLEdBQVosQ0FBZ0Isb0JBQWhCLEVBQXNDekMsZ0JBQXRDO0FBQ0FPLElBQUFBLFdBQVcsQ0FBQ2tDLEdBQVosQ0FBZ0Isa0JBQWhCLEVBQW9DekMsZ0JBQXBDO0FBQ0Q7QUFwVGtDLENBQTlCOzs7QUF1VFAsSUFBSSxPQUFPMEMsTUFBUCxLQUFrQixXQUFsQixJQUFpQ0EsTUFBTSxDQUFDQyxRQUF4QyxJQUFvREQsTUFBTSxDQUFDQyxRQUFQLENBQWdCQyxHQUF4RSxFQUE2RTtBQUMzRUYsRUFBQUEsTUFBTSxDQUFDQyxRQUFQLENBQWdCQyxHQUFoQixDQUFvQnhDLHFCQUFwQjtBQUNEOztnQkFFY0EscUIiLCJmaWxlIjoiaW5kZXguY29tbW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaCwgcmVzb2x2ZUNvbXBvbmVudCwgQ29tcG9uZW50T3B0aW9ucyB9IGZyb20gJ3Z1ZSdcclxuaW1wb3J0IFhFVXRpbHMgZnJvbSAneGUtdXRpbHMnXHJcbmltcG9ydCB7IFZYRVRhYmxlQ29yZSwgVnhlVGFibGVEZWZpbmVzLCBWeGVDb2x1bW5Qcm9wVHlwZXMsIFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcywgVnhlR2xvYmFsSW50ZXJjZXB0b3JIYW5kbGVzLCBGb3JtSXRlbVJlbmRlck9wdGlvbnMsIEZvcm1JdGVtQ29udGVudFJlbmRlclBhcmFtcyB9IGZyb20gJ3Z4ZS10YWJsZSdcclxuaW1wb3J0IGRheWpzIGZyb20gJ2RheWpzJ1xyXG5cclxubGV0IHZ4ZXRhYmxlOiBWWEVUYWJsZUNvcmVcclxuXHJcbmZ1bmN0aW9uIGlzRW1wdHlWYWx1ZSAoY2VsbFZhbHVlOiBhbnkpIHtcclxuICByZXR1cm4gY2VsbFZhbHVlID09PSBudWxsIHx8IGNlbGxWYWx1ZSA9PT0gdW5kZWZpbmVkIHx8IGNlbGxWYWx1ZSA9PT0gJydcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0T25OYW1lICh0eXBlOiBzdHJpbmcpIHtcclxuICByZXR1cm4gJ29uJyArIHR5cGUuc3Vic3RyaW5nKDAsIDEpLnRvTG9jYWxlVXBwZXJDYXNlKCkgKyB0eXBlLnN1YnN0cmluZygxKVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRNb2RlbFByb3AgKHJlbmRlck9wdHM6IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5SZW5kZXJPcHRpb25zKSB7XHJcbiAgcmV0dXJuICdtb2RlbFZhbHVlJ1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRNb2RlbEV2ZW50IChyZW5kZXJPcHRzOiBWeGVHbG9iYWxSZW5kZXJlckhhbmRsZXMuUmVuZGVyT3B0aW9ucykge1xyXG4gIHJldHVybiAndXBkYXRlOm1vZGVsVmFsdWUnXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldENoYW5nZUV2ZW50IChyZW5kZXJPcHRzOiBWeGVHbG9iYWxSZW5kZXJlckhhbmRsZXMuUmVuZGVyT3B0aW9ucykge1xyXG4gIGxldCB0eXBlID0gJ2NoYW5nZSdcclxuICBzd2l0Y2ggKHJlbmRlck9wdHMubmFtZSkge1xyXG4gICAgY2FzZSAnRWxBdXRvY29tcGxldGUnOlxyXG4gICAgICB0eXBlID0gJ3NlbGVjdCdcclxuICAgICAgYnJlYWtcclxuICAgIGNhc2UgJ0VsSW5wdXQnOlxyXG4gICAgY2FzZSAnRWxJbnB1dE51bWJlcic6XHJcbiAgICAgIHR5cGUgPSAnaW5wdXQnXHJcbiAgICAgIGJyZWFrXHJcbiAgfVxyXG4gIHJldHVybiB0eXBlXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRvRGF5U3RyaW5nRGF0ZSAodmFsdWU6IGFueSwgZm9ybWF0OiBzdHJpbmcpIHtcclxuICByZXR1cm4gZGF5anModmFsdWUsIGZvcm1hdCkuZGF0ZVxyXG59XHJcblxyXG5mdW5jdGlvbiB0b0RheURhdGVTdHJpbmcgKGRhdGU6IGFueSwgZm9ybWF0OiBzdHJpbmcpIHtcclxuICByZXR1cm4gZGF5anMoZGF0ZSkuZm9ybWF0KGZvcm1hdClcclxufVxyXG5cclxuZnVuY3Rpb24gcGFyc2VEYXRlICh2YWx1ZTogYW55LCBwcm9wczogeyBba2V5OiBzdHJpbmddOiBhbnkgfSkge1xyXG4gIHJldHVybiB2YWx1ZSAmJiBwcm9wcy52YWx1ZUZvcm1hdCA/IHRvRGF5U3RyaW5nRGF0ZSh2YWx1ZSwgcHJvcHMudmFsdWVGb3JtYXQpIDogdmFsdWVcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0Rm9ybWF0RGF0ZSAodmFsdWU6IGFueSwgcHJvcHM6IHsgW2tleTogc3RyaW5nXTogYW55IH0sIGRlZmF1bHRGb3JtYXQ6IHN0cmluZykge1xyXG4gIHJldHVybiB2YWx1ZSA/IHRvRGF5RGF0ZVN0cmluZyhwYXJzZURhdGUodmFsdWUsIHByb3BzKSwgcHJvcHMuZm9ybWF0IHx8IGRlZmF1bHRGb3JtYXQpIDogdmFsdWVcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0Rm9ybWF0RGF0ZXMgKHZhbHVlczogYW55W10sIHByb3BzOiB7IFtrZXk6IHN0cmluZ106IGFueSB9LCBzZXBhcmF0b3I6IHN0cmluZywgZGVmYXVsdEZvcm1hdDogc3RyaW5nKSB7XHJcbiAgcmV0dXJuIFhFVXRpbHMubWFwKHZhbHVlcywgKGRhdGU6IGFueSkgPT4gZ2V0Rm9ybWF0RGF0ZShkYXRlLCBwcm9wcywgZGVmYXVsdEZvcm1hdCkpLmpvaW4oc2VwYXJhdG9yKVxyXG59XHJcblxyXG5mdW5jdGlvbiBlcXVhbERhdGVyYW5nZSAoY2VsbFZhbHVlOiBhbnksIGRhdGE6IGFueSwgcHJvcHM6IHsgW2tleTogc3RyaW5nXTogYW55IH0sIGRlZmF1bHRGb3JtYXQ6IHN0cmluZykge1xyXG4gIGNlbGxWYWx1ZSA9IGdldEZvcm1hdERhdGUoY2VsbFZhbHVlLCBwcm9wcywgZGVmYXVsdEZvcm1hdClcclxuICByZXR1cm4gY2VsbFZhbHVlID49IGdldEZvcm1hdERhdGUoZGF0YVswXSwgcHJvcHMsIGRlZmF1bHRGb3JtYXQpICYmIGNlbGxWYWx1ZSA8PSBnZXRGb3JtYXREYXRlKGRhdGFbMV0sIHByb3BzLCBkZWZhdWx0Rm9ybWF0KVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRDZWxsRWRpdEZpbHRlclByb3BzIChyZW5kZXJPcHRzOiBWeGVHbG9iYWxSZW5kZXJlckhhbmRsZXMuUmVuZGVyT3B0aW9ucywgcGFyYW1zOiBWeGVHbG9iYWxSZW5kZXJlckhhbmRsZXMuUmVuZGVyRWRpdFBhcmFtcyB8IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5SZW5kZXJGaWx0ZXJQYXJhbXMsIHZhbHVlOiBhbnksIGRlZmF1bHRQcm9wcz86IHsgW3Byb3A6IHN0cmluZ106IGFueSB9KSB7XHJcbiAgcmV0dXJuIFhFVXRpbHMuYXNzaWduKHt9LCBkZWZhdWx0UHJvcHMsIHJlbmRlck9wdHMucHJvcHMsIHsgW2dldE1vZGVsUHJvcChyZW5kZXJPcHRzKV06IHZhbHVlIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEl0ZW1Qcm9wcyAocmVuZGVyT3B0czogVnhlR2xvYmFsUmVuZGVyZXJIYW5kbGVzLlJlbmRlck9wdGlvbnMsIHBhcmFtczogRm9ybUl0ZW1Db250ZW50UmVuZGVyUGFyYW1zLCB2YWx1ZTogYW55LCBkZWZhdWx0UHJvcHM/OiB7IFtwcm9wOiBzdHJpbmddOiBhbnkgfSkge1xyXG4gIHJldHVybiBYRVV0aWxzLmFzc2lnbih7fSwgZGVmYXVsdFByb3BzLCByZW5kZXJPcHRzLnByb3BzLCB7IFtnZXRNb2RlbFByb3AocmVuZGVyT3B0cyldOiB2YWx1ZSB9KVxyXG59XHJcblxyXG5mdW5jdGlvbiBmb3JtYXRUZXh0IChjZWxsVmFsdWU6IGFueSkge1xyXG4gIHJldHVybiAnJyArIChpc0VtcHR5VmFsdWUoY2VsbFZhbHVlKSA/ICcnIDogY2VsbFZhbHVlKVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRDZWxsTGFiZWxWTnMgKHJlbmRlck9wdHM6IFZ4ZUNvbHVtblByb3BUeXBlcy5FZGl0UmVuZGVyLCBwYXJhbXM6IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5SZW5kZXJDZWxsUGFyYW1zLCBjZWxsTGFiZWw6IGFueSkge1xyXG4gIGNvbnN0IHsgcGxhY2Vob2xkZXIgfSA9IHJlbmRlck9wdHNcclxuICByZXR1cm4gW1xyXG4gICAgaCgnc3BhbicsIHtcclxuICAgICAgY2xhc3M6ICd2eGUtY2VsbC0tbGFiZWwnXHJcbiAgICB9LCBwbGFjZWhvbGRlciAmJiBpc0VtcHR5VmFsdWUoY2VsbExhYmVsKVxyXG4gICAgICA/IFtcclxuICAgICAgICAgIGgoJ3NwYW4nLCB7XHJcbiAgICAgICAgICAgIGNsYXNzOiAndnhlLWNlbGwtLXBsYWNlaG9sZGVyJ1xyXG4gICAgICAgICAgfSwgZm9ybWF0VGV4dCh2eGV0YWJsZS5fdChwbGFjZWhvbGRlcikpKVxyXG4gICAgICAgIF1cclxuICAgICAgOiBmb3JtYXRUZXh0KGNlbGxMYWJlbCkpXHJcbiAgXVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRPbnMgKHJlbmRlck9wdHM6IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5SZW5kZXJPcHRpb25zLCBwYXJhbXM6IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5SZW5kZXJQYXJhbXMsIGlucHV0RnVuYz86IEZ1bmN0aW9uLCBjaGFuZ2VGdW5jPzogRnVuY3Rpb24pIHtcclxuICBjb25zdCB7IGV2ZW50cyB9ID0gcmVuZGVyT3B0c1xyXG4gIGNvbnN0IG1vZGVsRXZlbnQgPSBnZXRNb2RlbEV2ZW50KHJlbmRlck9wdHMpXHJcbiAgY29uc3QgY2hhbmdlRXZlbnQgPSBnZXRDaGFuZ2VFdmVudChyZW5kZXJPcHRzKVxyXG4gIGNvbnN0IGlzU2FtZUV2ZW50ID0gY2hhbmdlRXZlbnQgPT09IG1vZGVsRXZlbnRcclxuICBjb25zdCBvbnM6IHsgW3R5cGU6IHN0cmluZ106IEZ1bmN0aW9uIH0gPSB7fVxyXG4gIFhFVXRpbHMub2JqZWN0RWFjaChldmVudHMsIChmdW5jOiBGdW5jdGlvbiwga2V5OiBzdHJpbmcpID0+IHtcclxuICAgIG9uc1tnZXRPbk5hbWUoa2V5KV0gPSBmdW5jdGlvbiAoLi4uYXJnczogYW55W10pIHtcclxuICAgICAgZnVuYyhwYXJhbXMsIC4uLmFyZ3MpXHJcbiAgICB9XHJcbiAgfSlcclxuICBpZiAoaW5wdXRGdW5jKSB7XHJcbiAgICBvbnNbZ2V0T25OYW1lKG1vZGVsRXZlbnQpXSA9IGZ1bmN0aW9uICh0YXJnZXRFdm50OiBhbnkpIHtcclxuICAgICAgaW5wdXRGdW5jKHRhcmdldEV2bnQpXHJcbiAgICAgIGlmIChldmVudHMgJiYgZXZlbnRzW21vZGVsRXZlbnRdKSB7XHJcbiAgICAgICAgZXZlbnRzW21vZGVsRXZlbnRdKHBhcmFtcywgdGFyZ2V0RXZudClcclxuICAgICAgfVxyXG4gICAgICBpZiAoaXNTYW1lRXZlbnQgJiYgY2hhbmdlRnVuYykge1xyXG4gICAgICAgIGNoYW5nZUZ1bmModGFyZ2V0RXZudClcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICBpZiAoIWlzU2FtZUV2ZW50ICYmIGNoYW5nZUZ1bmMpIHtcclxuICAgIG9uc1tnZXRPbk5hbWUoY2hhbmdlRXZlbnQpXSA9IGZ1bmN0aW9uICguLi5hcmdzOiBhbnlbXSkge1xyXG4gICAgICBjaGFuZ2VGdW5jKC4uLmFyZ3MpXHJcbiAgICAgIGlmIChldmVudHMgJiYgZXZlbnRzW2NoYW5nZUV2ZW50XSkge1xyXG4gICAgICAgIGV2ZW50c1tjaGFuZ2VFdmVudF0ocGFyYW1zLCAuLi5hcmdzKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBvbnNcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0RWRpdE9ucyAocmVuZGVyT3B0czogVnhlR2xvYmFsUmVuZGVyZXJIYW5kbGVzLlJlbmRlck9wdGlvbnMsIHBhcmFtczogVnhlR2xvYmFsUmVuZGVyZXJIYW5kbGVzLlJlbmRlckVkaXRQYXJhbXMpIHtcclxuICBjb25zdCB7ICR0YWJsZSwgcm93LCBjb2x1bW4gfSA9IHBhcmFtc1xyXG4gIHJldHVybiBnZXRPbnMocmVuZGVyT3B0cywgcGFyYW1zLCAodmFsdWU6IGFueSkgPT4ge1xyXG4gICAgLy8g5aSE55CGIG1vZGVsIOWAvOWPjOWQkee7keWumlxyXG4gICAgWEVVdGlscy5zZXQocm93LCBjb2x1bW4ucHJvcGVydHksIHZhbHVlKVxyXG4gIH0sICgpID0+IHtcclxuICAgIC8vIOWkhOeQhiBjaGFuZ2Ug5LqL5Lu255u45YWz6YC76L6RXHJcbiAgICAkdGFibGUudXBkYXRlU3RhdHVzKHBhcmFtcylcclxuICB9KVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRGaWx0ZXJPbnMgKHJlbmRlck9wdHM6IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5SZW5kZXJPcHRpb25zLCBwYXJhbXM6IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5SZW5kZXJGaWx0ZXJQYXJhbXMsIG9wdGlvbjogVnhlVGFibGVEZWZpbmVzLkZpbHRlck9wdGlvbiwgY2hhbmdlRnVuYzogRnVuY3Rpb24pIHtcclxuICByZXR1cm4gZ2V0T25zKHJlbmRlck9wdHMsIHBhcmFtcywgKHZhbHVlOiBhbnkpID0+IHtcclxuICAgIC8vIOWkhOeQhiBtb2RlbCDlgLzlj4zlkJHnu5HlrppcclxuICAgIG9wdGlvbi5kYXRhID0gdmFsdWVcclxuICB9LCBjaGFuZ2VGdW5jKVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRJdGVtT25zIChyZW5kZXJPcHRzOiBWeGVHbG9iYWxSZW5kZXJlckhhbmRsZXMuUmVuZGVyT3B0aW9ucywgcGFyYW1zOiBGb3JtSXRlbUNvbnRlbnRSZW5kZXJQYXJhbXMpIHtcclxuICBjb25zdCB7ICRmb3JtLCBkYXRhLCBwcm9wZXJ0eSB9ID0gcGFyYW1zXHJcbiAgcmV0dXJuIGdldE9ucyhyZW5kZXJPcHRzLCBwYXJhbXMsICh2YWx1ZTogYW55KSA9PiB7XHJcbiAgICAvLyDlpITnkIYgbW9kZWwg5YC85Y+M5ZCR57uR5a6aXHJcbiAgICBYRVV0aWxzLnNldChkYXRhLCBwcm9wZXJ0eSwgdmFsdWUpXHJcbiAgfSwgKCkgPT4ge1xyXG4gICAgLy8g5aSE55CGIGNoYW5nZSDkuovku7bnm7jlhbPpgLvovpFcclxuICAgICRmb3JtLnVwZGF0ZVN0YXR1cyhwYXJhbXMpXHJcbiAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gbWF0Y2hDYXNjYWRlckRhdGEgKGluZGV4OiBudW1iZXIsIGxpc3Q6IGFueVtdLCB2YWx1ZXM6IGFueVtdLCBsYWJlbHM6IGFueVtdKSB7XHJcbiAgY29uc3QgdmFsID0gdmFsdWVzW2luZGV4XVxyXG4gIGlmIChsaXN0ICYmIHZhbHVlcy5sZW5ndGggPiBpbmRleCkge1xyXG4gICAgWEVVdGlscy5lYWNoKGxpc3QsIChpdGVtKSA9PiB7XHJcbiAgICAgIGlmIChpdGVtLnZhbHVlID09PSB2YWwpIHtcclxuICAgICAgICBsYWJlbHMucHVzaChpdGVtLmxhYmVsKVxyXG4gICAgICAgIG1hdGNoQ2FzY2FkZXJEYXRhKCsraW5kZXgsIGl0ZW0uY2hpbGRyZW4sIHZhbHVlcywgbGFiZWxzKVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0U2VsZWN0Q2VsbFZhbHVlIChyZW5kZXJPcHRzOiBWeGVDb2x1bW5Qcm9wVHlwZXMuRWRpdFJlbmRlciwgcGFyYW1zOiBWeGVHbG9iYWxSZW5kZXJlckhhbmRsZXMuUmVuZGVyQ2VsbFBhcmFtcykge1xyXG4gIGNvbnN0IHsgb3B0aW9ucyA9IFtdLCBvcHRpb25Hcm91cHMsIHByb3BzID0ge30sIG9wdGlvblByb3BzID0ge30sIG9wdGlvbkdyb3VwUHJvcHMgPSB7fSB9ID0gcmVuZGVyT3B0c1xyXG4gIGNvbnN0IHsgJHRhYmxlLCByb3dpZCwgcm93LCBjb2x1bW4gfSA9IHBhcmFtc1xyXG4gIGNvbnN0IHsgZmlsdGVyYWJsZSwgbXVsdGlwbGUgfSA9IHByb3BzXHJcbiAgY29uc3QgbGFiZWxQcm9wID0gb3B0aW9uUHJvcHMubGFiZWwgfHwgJ2xhYmVsJ1xyXG4gIGNvbnN0IHZhbHVlUHJvcCA9IG9wdGlvblByb3BzLnZhbHVlIHx8ICd2YWx1ZSdcclxuICBjb25zdCBncm91cE9wdGlvbnMgPSBvcHRpb25Hcm91cFByb3BzLm9wdGlvbnMgfHwgJ29wdGlvbnMnXHJcbiAgY29uc3QgY2VsbFZhbHVlID0gWEVVdGlscy5nZXQocm93LCBjb2x1bW4ucHJvcGVydHkpXHJcbiAgY29uc3QgY29saWQgPSBjb2x1bW4uaWRcclxuICBsZXQgY2VsbERhdGE6IGFueVxyXG4gIGlmIChmaWx0ZXJhYmxlKSB7XHJcbiAgICBjb25zdCB7IGludGVybmFsRGF0YSB9ID0gJHRhYmxlXHJcbiAgICBjb25zdCB7IGZ1bGxBbGxEYXRhUm93SWREYXRhIH0gPSBpbnRlcm5hbERhdGFcclxuICAgIGNvbnN0IHJlc3Q6IGFueSA9IGZ1bGxBbGxEYXRhUm93SWREYXRhW3Jvd2lkXVxyXG4gICAgaWYgKHJlc3QpIHtcclxuICAgICAgY2VsbERhdGEgPSByZXN0LmNlbGxEYXRhXHJcbiAgICAgIGlmICghY2VsbERhdGEpIHtcclxuICAgICAgICBjZWxsRGF0YSA9IHJlc3QuY2VsbERhdGEgPSB7fVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAocmVzdCAmJiBjZWxsRGF0YVtjb2xpZF0gJiYgY2VsbERhdGFbY29saWRdLnZhbHVlID09PSBjZWxsVmFsdWUpIHtcclxuICAgICAgcmV0dXJuIGNlbGxEYXRhW2NvbGlkXS5sYWJlbFxyXG4gICAgfVxyXG4gIH1cclxuICBpZiAoIWlzRW1wdHlWYWx1ZShjZWxsVmFsdWUpKSB7XHJcbiAgICBjb25zdCBzZWxlY3RsYWJlbCA9IFhFVXRpbHMubWFwKG11bHRpcGxlID8gY2VsbFZhbHVlIDogW2NlbGxWYWx1ZV0sIG9wdGlvbkdyb3Vwc1xyXG4gICAgICA/ICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgbGV0IHNlbGVjdEl0ZW06IGFueVxyXG4gICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IG9wdGlvbkdyb3Vwcy5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgc2VsZWN0SXRlbSA9IFhFVXRpbHMuZmluZChvcHRpb25Hcm91cHNbaW5kZXhdW2dyb3VwT3B0aW9uc10sIChpdGVtKSA9PiBpdGVtW3ZhbHVlUHJvcF0gPT09IHZhbHVlKVxyXG4gICAgICAgICAgICBpZiAoc2VsZWN0SXRlbSkge1xyXG4gICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiBzZWxlY3RJdGVtID8gc2VsZWN0SXRlbVtsYWJlbFByb3BdIDogdmFsdWVcclxuICAgICAgICB9XHJcbiAgICAgIDogKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBzZWxlY3RJdGVtID0gWEVVdGlscy5maW5kKG9wdGlvbnMsIChpdGVtKSA9PiBpdGVtW3ZhbHVlUHJvcF0gPT09IHZhbHVlKVxyXG4gICAgICAgICAgcmV0dXJuIHNlbGVjdEl0ZW0gPyBzZWxlY3RJdGVtW2xhYmVsUHJvcF0gOiB2YWx1ZVxyXG4gICAgICAgIH0pLmpvaW4oJywgJylcclxuICAgIGlmIChjZWxsRGF0YSAmJiBvcHRpb25zICYmIG9wdGlvbnMubGVuZ3RoKSB7XHJcbiAgICAgIGNlbGxEYXRhW2NvbGlkXSA9IHsgdmFsdWU6IGNlbGxWYWx1ZSwgbGFiZWw6IHNlbGVjdGxhYmVsIH1cclxuICAgIH1cclxuICAgIHJldHVybiBzZWxlY3RsYWJlbFxyXG4gIH1cclxuICByZXR1cm4gJydcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0Q2FzY2FkZXJDZWxsVmFsdWUgKHJlbmRlck9wdHM6IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5SZW5kZXJPcHRpb25zLCBwYXJhbXM6IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5SZW5kZXJDZWxsUGFyYW1zKSB7XHJcbiAgY29uc3QgeyBwcm9wcyA9IHt9IH0gPSByZW5kZXJPcHRzXHJcbiAgY29uc3QgeyByb3csIGNvbHVtbiB9ID0gcGFyYW1zXHJcbiAgY29uc3QgY2VsbFZhbHVlID0gWEVVdGlscy5nZXQocm93LCBjb2x1bW4ucHJvcGVydHkpXHJcbiAgY29uc3QgdmFsdWVzOiBhbnlbXSA9IGNlbGxWYWx1ZSB8fCBbXVxyXG4gIGNvbnN0IGxhYmVsczogYW55W10gPSBbXVxyXG4gIG1hdGNoQ2FzY2FkZXJEYXRhKDAsIHByb3BzLm9wdGlvbnMsIHZhbHVlcywgbGFiZWxzKVxyXG4gIHJldHVybiAocHJvcHMuc2hvd0FsbExldmVscyA9PT0gZmFsc2UgPyBsYWJlbHMuc2xpY2UobGFiZWxzLmxlbmd0aCAtIDEsIGxhYmVscy5sZW5ndGgpIDogbGFiZWxzKS5qb2luKGAgJHtwcm9wcy5zZXBhcmF0b3IgfHwgJy8nfSBgKVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXREYXRlUGlja2VyQ2VsbFZhbHVlIChyZW5kZXJPcHRzOiBWeGVHbG9iYWxSZW5kZXJlckhhbmRsZXMuUmVuZGVyT3B0aW9ucywgcGFyYW1zOiBWeGVHbG9iYWxSZW5kZXJlckhhbmRsZXMuUmVuZGVyQ2VsbFBhcmFtcyB8IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5FeHBvcnRNZXRob2RQYXJhbXMpIHtcclxuICBjb25zdCB7IHByb3BzID0ge30gfSA9IHJlbmRlck9wdHNcclxuICBjb25zdCB7IHJvdywgY29sdW1uIH0gPSBwYXJhbXNcclxuICBjb25zdCB7IHJhbmdlU2VwYXJhdG9yID0gJy0nIH0gPSBwcm9wc1xyXG4gIGxldCBjZWxsVmFsdWUgPSBYRVV0aWxzLmdldChyb3csIGNvbHVtbi5wcm9wZXJ0eSlcclxuICBzd2l0Y2ggKHByb3BzLnR5cGUpIHtcclxuICAgIGNhc2UgJ3dlZWsnOlxyXG4gICAgICBjZWxsVmFsdWUgPSBnZXRGb3JtYXREYXRlKGNlbGxWYWx1ZSwgcHJvcHMsICdZWVlZd1dXJylcclxuICAgICAgYnJlYWtcclxuICAgIGNhc2UgJ21vbnRoJzpcclxuICAgICAgY2VsbFZhbHVlID0gZ2V0Rm9ybWF0RGF0ZShjZWxsVmFsdWUsIHByb3BzLCAnWVlZWS1NTScpXHJcbiAgICAgIGJyZWFrXHJcbiAgICBjYXNlICd5ZWFyJzpcclxuICAgICAgY2VsbFZhbHVlID0gZ2V0Rm9ybWF0RGF0ZShjZWxsVmFsdWUsIHByb3BzLCAnWVlZWScpXHJcbiAgICAgIGJyZWFrXHJcbiAgICBjYXNlICdkYXRlcyc6XHJcbiAgICAgIGNlbGxWYWx1ZSA9IGdldEZvcm1hdERhdGVzKGNlbGxWYWx1ZSwgcHJvcHMsICcsICcsICdZWVlZLU1NLUREJylcclxuICAgICAgYnJlYWtcclxuICAgIGNhc2UgJ2RhdGVyYW5nZSc6XHJcbiAgICAgIGNlbGxWYWx1ZSA9IGdldEZvcm1hdERhdGVzKGNlbGxWYWx1ZSwgcHJvcHMsIGAgJHtyYW5nZVNlcGFyYXRvcn0gYCwgJ1lZWVktTU0tREQnKVxyXG4gICAgICBicmVha1xyXG4gICAgY2FzZSAnZGF0ZXRpbWVyYW5nZSc6XHJcbiAgICAgIGNlbGxWYWx1ZSA9IGdldEZvcm1hdERhdGVzKGNlbGxWYWx1ZSwgcHJvcHMsIGAgJHtyYW5nZVNlcGFyYXRvcn0gYCwgJ1lZWVktTU0tREQgSEg6c3M6bW0nKVxyXG4gICAgICBicmVha1xyXG4gICAgY2FzZSAnbW9udGhyYW5nZSc6XHJcbiAgICAgIGNlbGxWYWx1ZSA9IGdldEZvcm1hdERhdGVzKGNlbGxWYWx1ZSwgcHJvcHMsIGAgJHtyYW5nZVNlcGFyYXRvcn0gYCwgJ1lZWVktTU0nKVxyXG4gICAgICBicmVha1xyXG4gICAgZGVmYXVsdDpcclxuICAgICAgY2VsbFZhbHVlID0gZ2V0Rm9ybWF0RGF0ZShjZWxsVmFsdWUsIHByb3BzLCAnWVlZWS1NTS1ERCcpXHJcbiAgfVxyXG4gIHJldHVybiBjZWxsVmFsdWVcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0VGltZVBpY2tlckNlbGxWYWx1ZSAocmVuZGVyT3B0czogVnhlR2xvYmFsUmVuZGVyZXJIYW5kbGVzLlJlbmRlck9wdGlvbnMsIHBhcmFtczogVnhlR2xvYmFsUmVuZGVyZXJIYW5kbGVzLlJlbmRlckNlbGxQYXJhbXMgfCBWeGVHbG9iYWxSZW5kZXJlckhhbmRsZXMuUmVuZGVyRWRpdFBhcmFtcykge1xyXG4gIGNvbnN0IHsgcHJvcHMgPSB7fSB9ID0gcmVuZGVyT3B0c1xyXG4gIGNvbnN0IHsgcm93LCBjb2x1bW4gfSA9IHBhcmFtc1xyXG4gIGNvbnN0IHsgaXNSYW5nZSwgZm9ybWF0ID0gJ2hoOm1tOnNzJywgcmFuZ2VTZXBhcmF0b3IgPSAnLScgfSA9IHByb3BzXHJcbiAgbGV0IGNlbGxWYWx1ZSA9IFhFVXRpbHMuZ2V0KHJvdywgY29sdW1uLnByb3BlcnR5KVxyXG4gIGlmIChjZWxsVmFsdWUgJiYgaXNSYW5nZSkge1xyXG4gICAgY2VsbFZhbHVlID0gWEVVdGlscy5tYXAoY2VsbFZhbHVlLCAoZGF0ZSkgPT4gdG9EYXlEYXRlU3RyaW5nKHBhcnNlRGF0ZShkYXRlLCBwcm9wcyksIGZvcm1hdCkpLmpvaW4oYCAke3JhbmdlU2VwYXJhdG9yfSBgKVxyXG4gIH1cclxuICByZXR1cm4gdG9EYXlEYXRlU3RyaW5nKHBhcnNlRGF0ZShjZWxsVmFsdWUsIHByb3BzKSwgZm9ybWF0KVxyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVFZGl0UmVuZGVyIChkZWZhdWx0UHJvcHM/OiB7IFtrZXk6IHN0cmluZ106IGFueSB9KSB7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uIChyZW5kZXJPcHRzOiBWeGVDb2x1bW5Qcm9wVHlwZXMuRWRpdFJlbmRlciwgcGFyYW1zOiBWeGVHbG9iYWxSZW5kZXJlckhhbmRsZXMuUmVuZGVyRWRpdFBhcmFtcykge1xyXG4gICAgY29uc3QgeyByb3csIGNvbHVtbiB9ID0gcGFyYW1zXHJcbiAgICBjb25zdCB7IG5hbWUsIGF0dHJzIH0gPSByZW5kZXJPcHRzXHJcbiAgICBjb25zdCBjZWxsVmFsdWUgPSBYRVV0aWxzLmdldChyb3csIGNvbHVtbi5wcm9wZXJ0eSlcclxuICAgIHJldHVybiBbXHJcbiAgICAgIGgocmVzb2x2ZUNvbXBvbmVudChuYW1lKSwge1xyXG4gICAgICAgIC4uLmF0dHJzLFxyXG4gICAgICAgIC4uLmdldENlbGxFZGl0RmlsdGVyUHJvcHMocmVuZGVyT3B0cywgcGFyYW1zLCBjZWxsVmFsdWUsIGRlZmF1bHRQcm9wcyksXHJcbiAgICAgICAgLi4uZ2V0RWRpdE9ucyhyZW5kZXJPcHRzLCBwYXJhbXMpXHJcbiAgICAgIH0pXHJcbiAgICBdXHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBkZWZhdWx0QnV0dG9uRWRpdFJlbmRlciAocmVuZGVyT3B0czogVnhlQ29sdW1uUHJvcFR5cGVzLkVkaXRSZW5kZXIsIHBhcmFtczogVnhlR2xvYmFsUmVuZGVyZXJIYW5kbGVzLlJlbmRlckVkaXRQYXJhbXMpIHtcclxuICBjb25zdCB7IGF0dHJzIH0gPSByZW5kZXJPcHRzXHJcbiAgcmV0dXJuIFtcclxuICAgIGgocmVzb2x2ZUNvbXBvbmVudCgnZWwtYnV0dG9uJyksIHtcclxuICAgICAgLi4uYXR0cnMsXHJcbiAgICAgIC4uLmdldENlbGxFZGl0RmlsdGVyUHJvcHMocmVuZGVyT3B0cywgcGFyYW1zLCBudWxsKSxcclxuICAgICAgLi4uZ2V0T25zKHJlbmRlck9wdHMsIHBhcmFtcylcclxuICAgIH0sIGNlbGxUZXh0KHJlbmRlck9wdHMuY29udGVudCkpXHJcbiAgXVxyXG59XHJcblxyXG5mdW5jdGlvbiBkZWZhdWx0QnV0dG9uc0VkaXRSZW5kZXIgKHJlbmRlck9wdHM6IFZ4ZUNvbHVtblByb3BUeXBlcy5FZGl0UmVuZGVyLCBwYXJhbXM6IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5SZW5kZXJFZGl0UGFyYW1zKSB7XHJcbiAgY29uc3QgeyBjaGlsZHJlbiB9ID0gcmVuZGVyT3B0c1xyXG4gIGlmIChjaGlsZHJlbikge1xyXG4gICAgcmV0dXJuIGNoaWxkcmVuLm1hcCgoY2hpbGRSZW5kZXJPcHRzOiBWeGVDb2x1bW5Qcm9wVHlwZXMuRWRpdFJlbmRlcikgPT4gZGVmYXVsdEJ1dHRvbkVkaXRSZW5kZXIoY2hpbGRSZW5kZXJPcHRzLCBwYXJhbXMpWzBdKVxyXG4gIH1cclxuICByZXR1cm4gW11cclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlRmlsdGVyUmVuZGVyIChkZWZhdWx0UHJvcHM/OiB7IFtrZXk6IHN0cmluZ106IGFueSB9KSB7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uIChyZW5kZXJPcHRzOiBWeGVDb2x1bW5Qcm9wVHlwZXMuRmlsdGVyUmVuZGVyLCBwYXJhbXM6IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5SZW5kZXJGaWx0ZXJQYXJhbXMpIHtcclxuICAgIGNvbnN0IHsgY29sdW1uIH0gPSBwYXJhbXNcclxuICAgIGNvbnN0IHsgbmFtZSwgYXR0cnMgfSA9IHJlbmRlck9wdHNcclxuICAgIHJldHVybiBbXHJcbiAgICAgIGgoJ2RpdicsIHtcclxuICAgICAgICBjbGFzczogJ3Z4ZS10YWJsZS0tZmlsdGVyLWVsZW1lbnQtd3JhcHBlcidcclxuICAgICAgfSwgY29sdW1uLmZpbHRlcnMubWFwKChvcHRpb24sIG9JbmRleCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG9wdGlvblZhbHVlID0gb3B0aW9uLmRhdGFcclxuICAgICAgICByZXR1cm4gaChyZXNvbHZlQ29tcG9uZW50KG5hbWUpLCB7XHJcbiAgICAgICAgICBrZXk6IG9JbmRleCxcclxuICAgICAgICAgIC4uLmF0dHJzLFxyXG4gICAgICAgICAgLi4uZ2V0Q2VsbEVkaXRGaWx0ZXJQcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIG9wdGlvblZhbHVlLCBkZWZhdWx0UHJvcHMpLFxyXG4gICAgICAgICAgLi4uZ2V0RmlsdGVyT25zKHJlbmRlck9wdHMsIHBhcmFtcywgb3B0aW9uLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIOWkhOeQhiBjaGFuZ2Ug5LqL5Lu255u45YWz6YC76L6RXHJcbiAgICAgICAgICAgIGhhbmRsZUNvbmZpcm1GaWx0ZXIocGFyYW1zLCAhIW9wdGlvbi5kYXRhLCBvcHRpb24pXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pKVxyXG4gICAgXVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ29uZmlybUZpbHRlciAocGFyYW1zOiBWeGVHbG9iYWxSZW5kZXJlckhhbmRsZXMuUmVuZGVyRmlsdGVyUGFyYW1zLCBjaGVja2VkOiBib29sZWFuLCBvcHRpb246IFZ4ZVRhYmxlRGVmaW5lcy5GaWx0ZXJPcHRpb24pIHtcclxuICBjb25zdCB7ICRwYW5lbCB9ID0gcGFyYW1zXHJcbiAgJHBhbmVsLmNoYW5nZU9wdGlvbihudWxsLCBjaGVja2VkLCBvcHRpb24pXHJcbn1cclxuXHJcbi8qKlxyXG4gKiDmqKHns4rljLnphY1cclxuICogQHBhcmFtIHBhcmFtc1xyXG4gKi9cclxuZnVuY3Rpb24gZGVmYXVsdEZ1enp5RmlsdGVyTWV0aG9kIChwYXJhbXM6IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5GaWx0ZXJNZXRob2RQYXJhbXMpIHtcclxuICBjb25zdCB7IG9wdGlvbiwgcm93LCBjb2x1bW4gfSA9IHBhcmFtc1xyXG4gIGNvbnN0IHsgZGF0YSB9ID0gb3B0aW9uXHJcbiAgY29uc3QgY2VsbFZhbHVlID0gWEVVdGlscy5nZXQocm93LCBjb2x1bW4ucHJvcGVydHkpXHJcbiAgcmV0dXJuIFhFVXRpbHMudG9WYWx1ZVN0cmluZyhjZWxsVmFsdWUpLmluZGV4T2YoZGF0YSkgPiAtMVxyXG59XHJcblxyXG4vKipcclxuICog57K+56Gu5Yy56YWNXHJcbiAqIEBwYXJhbSBwYXJhbXNcclxuICovXHJcbmZ1bmN0aW9uIGRlZmF1bHRFeGFjdEZpbHRlck1ldGhvZCAocGFyYW1zOiBWeGVHbG9iYWxSZW5kZXJlckhhbmRsZXMuRmlsdGVyTWV0aG9kUGFyYW1zKSB7XHJcbiAgY29uc3QgeyBvcHRpb24sIHJvdywgY29sdW1uIH0gPSBwYXJhbXNcclxuICBjb25zdCB7IGRhdGEgfSA9IG9wdGlvblxyXG4gIGNvbnN0IGNlbGxWYWx1ZSA9IFhFVXRpbHMuZ2V0KHJvdywgY29sdW1uLnByb3BlcnR5KVxyXG4gIC8qIGVzbGludC1kaXNhYmxlIGVxZXFlcSAqL1xyXG4gIHJldHVybiBjZWxsVmFsdWUgPT09IGRhdGFcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyT3B0aW9ucyAob3B0aW9uczogYW55W10sIG9wdGlvblByb3BzOiBWeGVHbG9iYWxSZW5kZXJlckhhbmRsZXMuUmVuZGVyT3B0aW9uUHJvcHMpIHtcclxuICBjb25zdCBsYWJlbFByb3AgPSBvcHRpb25Qcm9wcy5sYWJlbCB8fCAnbGFiZWwnXHJcbiAgY29uc3QgdmFsdWVQcm9wID0gb3B0aW9uUHJvcHMudmFsdWUgfHwgJ3ZhbHVlJ1xyXG4gIHJldHVybiBYRVV0aWxzLm1hcChvcHRpb25zLCAoaXRlbSwgb0luZGV4KSA9PiB7XHJcbiAgICByZXR1cm4gaChyZXNvbHZlQ29tcG9uZW50KCdlbC1vcHRpb24nKSwge1xyXG4gICAgICBrZXk6IG9JbmRleCxcclxuICAgICAgdmFsdWU6IGl0ZW1bdmFsdWVQcm9wXSxcclxuICAgICAgbGFiZWw6IGl0ZW1bbGFiZWxQcm9wXSxcclxuICAgICAgZGlzYWJsZWQ6IGl0ZW0uZGlzYWJsZWRcclxuICAgIH0pXHJcbiAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gY2VsbFRleHQgKGNlbGxWYWx1ZTogYW55KTogc3RyaW5nW10ge1xyXG4gIHJldHVybiBbZm9ybWF0VGV4dChjZWxsVmFsdWUpXVxyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVGb3JtSXRlbVJlbmRlciAoZGVmYXVsdFByb3BzPzogeyBba2V5OiBzdHJpbmddOiBhbnkgfSkge1xyXG4gIHJldHVybiBmdW5jdGlvbiAocmVuZGVyT3B0czogRm9ybUl0ZW1SZW5kZXJPcHRpb25zLCBwYXJhbXM6IEZvcm1JdGVtQ29udGVudFJlbmRlclBhcmFtcykge1xyXG4gICAgY29uc3QgeyBkYXRhLCBwcm9wZXJ0eSB9ID0gcGFyYW1zXHJcbiAgICBjb25zdCB7IG5hbWUgfSA9IHJlbmRlck9wdHNcclxuICAgIGNvbnN0IHsgYXR0cnMgfSA9IHJlbmRlck9wdHNcclxuICAgIGNvbnN0IGl0ZW1WYWx1ZSA9IFhFVXRpbHMuZ2V0KGRhdGEsIHByb3BlcnR5KVxyXG4gICAgcmV0dXJuIFtcclxuICAgICAgaChyZXNvbHZlQ29tcG9uZW50KG5hbWUpLCB7XHJcbiAgICAgICAgLi4uYXR0cnMsXHJcbiAgICAgICAgLi4uZ2V0SXRlbVByb3BzKHJlbmRlck9wdHMsIHBhcmFtcywgaXRlbVZhbHVlLCBkZWZhdWx0UHJvcHMpLFxyXG4gICAgICAgIC4uLmdldEl0ZW1PbnMocmVuZGVyT3B0cywgcGFyYW1zKVxyXG4gICAgICB9KVxyXG4gICAgXVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZGVmYXVsdEJ1dHRvbkl0ZW1SZW5kZXIgKHJlbmRlck9wdHM6IEZvcm1JdGVtUmVuZGVyT3B0aW9ucywgcGFyYW1zOiBGb3JtSXRlbUNvbnRlbnRSZW5kZXJQYXJhbXMpIHtcclxuICBjb25zdCB7IGF0dHJzIH0gPSByZW5kZXJPcHRzXHJcbiAgY29uc3QgcHJvcHMgPSBnZXRJdGVtUHJvcHMocmVuZGVyT3B0cywgcGFyYW1zLCBudWxsKVxyXG4gIHJldHVybiBbXHJcbiAgICBoKHJlc29sdmVDb21wb25lbnQoJ2VsLWJ1dHRvbicpIGFzIENvbXBvbmVudE9wdGlvbnMsIHtcclxuICAgICAgLi4uYXR0cnMsXHJcbiAgICAgIC4uLnByb3BzLFxyXG4gICAgICAuLi5nZXRPbnMocmVuZGVyT3B0cywgcGFyYW1zKVxyXG4gICAgfSwge1xyXG4gICAgICBkZWZhdWx0OiAoKSA9PiBjZWxsVGV4dChyZW5kZXJPcHRzLmNvbnRlbnQgfHwgcHJvcHMuY29udGVudClcclxuICAgIH0pXHJcbiAgXVxyXG59XHJcblxyXG5mdW5jdGlvbiBkZWZhdWx0QnV0dG9uc0l0ZW1SZW5kZXIgKHJlbmRlck9wdHM6IEZvcm1JdGVtUmVuZGVyT3B0aW9ucywgcGFyYW1zOiBGb3JtSXRlbUNvbnRlbnRSZW5kZXJQYXJhbXMpIHtcclxuICBjb25zdCB7IGNoaWxkcmVuIH0gPSByZW5kZXJPcHRzXHJcbiAgaWYgKGNoaWxkcmVuKSB7XHJcbiAgICByZXR1cm4gY2hpbGRyZW4ubWFwKChjaGlsZFJlbmRlck9wdHM6IEZvcm1JdGVtUmVuZGVyT3B0aW9ucykgPT4gZGVmYXVsdEJ1dHRvbkl0ZW1SZW5kZXIoY2hpbGRSZW5kZXJPcHRzLCBwYXJhbXMpWzBdKVxyXG4gIH1cclxuICByZXR1cm4gW11cclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlRXhwb3J0TWV0aG9kIChnZXRFeHBvcnRDZWxsVmFsdWU6IEZ1bmN0aW9uKSB7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uIChwYXJhbXM6IFZ4ZUdsb2JhbFJlbmRlcmVySGFuZGxlcy5FeHBvcnRNZXRob2RQYXJhbXMpIHtcclxuICAgIGNvbnN0IHsgcm93LCBjb2x1bW4sIG9wdGlvbnMgfSA9IHBhcmFtc1xyXG4gICAgcmV0dXJuIG9wdGlvbnMgJiYgb3B0aW9ucy5vcmlnaW5hbCA/IFhFVXRpbHMuZ2V0KHJvdywgY29sdW1uLnByb3BlcnR5KSA6IGdldEV4cG9ydENlbGxWYWx1ZShjb2x1bW4uZWRpdFJlbmRlciB8fCBjb2x1bW4uY2VsbFJlbmRlciwgcGFyYW1zKVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlRm9ybUl0ZW1SYWRpb0FuZENoZWNrYm94UmVuZGVyICgpIHtcclxuICByZXR1cm4gZnVuY3Rpb24gKHJlbmRlck9wdHM6IEZvcm1JdGVtUmVuZGVyT3B0aW9ucywgcGFyYW1zOiBGb3JtSXRlbUNvbnRlbnRSZW5kZXJQYXJhbXMpIHtcclxuICAgIGNvbnN0IHsgbmFtZSwgb3B0aW9ucyA9IFtdLCBvcHRpb25Qcm9wcyA9IHt9LCBhdHRycyB9ID0gcmVuZGVyT3B0c1xyXG4gICAgY29uc3QgeyBkYXRhLCBwcm9wZXJ0eSB9ID0gcGFyYW1zXHJcbiAgICBjb25zdCBsYWJlbFByb3AgPSBvcHRpb25Qcm9wcy5sYWJlbCB8fCAnbGFiZWwnXHJcbiAgICBjb25zdCB2YWx1ZVByb3AgPSBvcHRpb25Qcm9wcy52YWx1ZSB8fCAndmFsdWUnXHJcbiAgICBjb25zdCBpdGVtVmFsdWUgPSBYRVV0aWxzLmdldChkYXRhLCBwcm9wZXJ0eSlcclxuICAgIHJldHVybiBbXHJcbiAgICAgIGgocmVzb2x2ZUNvbXBvbmVudChgJHtuYW1lfUdyb3VwYCkgYXMgQ29tcG9uZW50T3B0aW9ucywge1xyXG4gICAgICAgIC4uLmF0dHJzLFxyXG4gICAgICAgIC4uLmdldEl0ZW1Qcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIGl0ZW1WYWx1ZSksXHJcbiAgICAgICAgLi4uZ2V0SXRlbU9ucyhyZW5kZXJPcHRzLCBwYXJhbXMpXHJcbiAgICAgIH0sIHtcclxuICAgICAgICBkZWZhdWx0OiAoKSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4gb3B0aW9ucy5tYXAoKG9wdGlvbiwgb0luZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBoKHJlc29sdmVDb21wb25lbnQobmFtZSkgYXMgQ29tcG9uZW50T3B0aW9ucywge1xyXG4gICAgICAgICAgICAgIGtleTogb0luZGV4LFxyXG4gICAgICAgICAgICAgIGxhYmVsOiBvcHRpb25bdmFsdWVQcm9wXSxcclxuICAgICAgICAgICAgICBkaXNhYmxlZDogb3B0aW9uLmRpc2FibGVkXHJcbiAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiBjZWxsVGV4dChvcHRpb25bbGFiZWxQcm9wXSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgXVxyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIOajgOafpeinpuWPkea6kOaYr+WQpuWxnuS6juebruagh+iKgueCuVxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0RXZlbnRUYXJnZXROb2RlIChldm50OiBhbnksIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGNsYXNzTmFtZTogc3RyaW5nKSB7XHJcbiAgbGV0IHRhcmdldEVsZW1cclxuICBsZXQgdGFyZ2V0ID0gZXZudC50YXJnZXRcclxuICB3aGlsZSAodGFyZ2V0ICYmIHRhcmdldC5ub2RlVHlwZSAmJiB0YXJnZXQgIT09IGRvY3VtZW50KSB7XHJcbiAgICBpZiAoY2xhc3NOYW1lICYmIHRhcmdldC5jbGFzc05hbWUgJiYgdGFyZ2V0LmNsYXNzTmFtZS5zcGxpdCAmJiB0YXJnZXQuY2xhc3NOYW1lLnNwbGl0KCcgJykuaW5kZXhPZihjbGFzc05hbWUpID4gLTEpIHtcclxuICAgICAgdGFyZ2V0RWxlbSA9IHRhcmdldFxyXG4gICAgfSBlbHNlIGlmICh0YXJnZXQgPT09IGNvbnRhaW5lcikge1xyXG4gICAgICByZXR1cm4geyBmbGFnOiBjbGFzc05hbWUgPyAhIXRhcmdldEVsZW0gOiB0cnVlLCBjb250YWluZXIsIHRhcmdldEVsZW06IHRhcmdldEVsZW0gfVxyXG4gICAgfVxyXG4gICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGVcclxuICB9XHJcbiAgcmV0dXJuIHsgZmxhZzogZmFsc2UgfVxyXG59XHJcblxyXG4vKipcclxuICog5LqL5Lu25YW85a655oCn5aSE55CGXHJcbiAqL1xyXG5mdW5jdGlvbiBoYW5kbGVDbGVhckV2ZW50IChwYXJhbXM6IFZ4ZUdsb2JhbEludGVyY2VwdG9ySGFuZGxlcy5JbnRlcmNlcHRvckNsZWFyRmlsdGVyUGFyYW1zIHwgVnhlR2xvYmFsSW50ZXJjZXB0b3JIYW5kbGVzLkludGVyY2VwdG9yQ2xlYXJBY3RpdmVkUGFyYW1zIHwgVnhlR2xvYmFsSW50ZXJjZXB0b3JIYW5kbGVzLkludGVyY2VwdG9yQ2xlYXJBcmVhc1BhcmFtcykge1xyXG4gIGNvbnN0IHsgJGV2ZW50IH0gPSBwYXJhbXNcclxuICBjb25zdCBib2R5RWxlbSA9IGRvY3VtZW50LmJvZHlcclxuICBpZiAoXHJcbiAgICAvLyDov5znqIvmkJzntKJcclxuICAgIGdldEV2ZW50VGFyZ2V0Tm9kZSgkZXZlbnQsIGJvZHlFbGVtLCAnZWwtYXV0b2NvbXBsZXRlLXN1Z2dlc3Rpb24nKS5mbGFnIHx8XHJcbiAgICAvLyDkuIvmi4nmoYZcclxuICAgIGdldEV2ZW50VGFyZ2V0Tm9kZSgkZXZlbnQsIGJvZHlFbGVtLCAnZWwtc2VsZWN0LWRyb3Bkb3duJykuZmxhZyB8fFxyXG4gICAgLy8g57qn6IGUXHJcbiAgICBnZXRFdmVudFRhcmdldE5vZGUoJGV2ZW50LCBib2R5RWxlbSwgJ2VsLWNhc2NhZGVyX19kcm9wZG93bicpLmZsYWcgfHxcclxuICAgIGdldEV2ZW50VGFyZ2V0Tm9kZSgkZXZlbnQsIGJvZHlFbGVtLCAnZWwtY2FzY2FkZXItbWVudXMnKS5mbGFnIHx8XHJcbiAgICAvLyDml6XmnJ9cclxuICAgIGdldEV2ZW50VGFyZ2V0Tm9kZSgkZXZlbnQsIGJvZHlFbGVtLCAnZWwtdGltZS1wYW5lbCcpLmZsYWcgfHxcclxuICAgIGdldEV2ZW50VGFyZ2V0Tm9kZSgkZXZlbnQsIGJvZHlFbGVtLCAnZWwtcGlja2VyLXBhbmVsJykuZmxhZyB8fFxyXG4gICAgLy8g6aKc6ImyXHJcbiAgICBnZXRFdmVudFRhcmdldE5vZGUoJGV2ZW50LCBib2R5RWxlbSwgJ2VsLWNvbG9yLWRyb3Bkb3duJykuZmxhZ1xyXG4gICkge1xyXG4gICAgcmV0dXJuIGZhbHNlXHJcbiAgfVxyXG59XHJcblxyXG5kZWNsYXJlIG1vZHVsZSAndnhlLXRhYmxlJyB7XHJcbiAgaW50ZXJmYWNlIERlZmluZVJlbmRlcmVyT3B0aW9uPFQ+IHtcclxuICAgIGRlZmF1bHRGaWx0ZXJNZXRob2Q/KHBhcmFtczogVnhlR2xvYmFsUmVuZGVyZXJIYW5kbGVzLkZpbHRlck1ldGhvZFBhcmFtcyk6IGJvb2xlYW47XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICog5Z+65LqOIHZ4ZS10YWJsZSDooajmoLznmoTpgILphY3mj5Lku7bvvIznlKjkuo7lhbzlrrkgZWxlbWVudC11aSDnu4Tku7blupNcclxuICovXHJcbmV4cG9ydCBjb25zdCBWWEVUYWJsZVBsdWdpbkVsZW1lbnQgPSB7XHJcbiAgaW5zdGFsbCAodnhldGFibGVjb3JlOiBWWEVUYWJsZUNvcmUpIHtcclxuICAgIGNvbnN0IHsgaW50ZXJjZXB0b3IsIHJlbmRlcmVyIH0gPSB2eGV0YWJsZWNvcmVcclxuXHJcbiAgICB2eGV0YWJsZSA9IHZ4ZXRhYmxlY29yZVxyXG5cclxuICAgIHJlbmRlcmVyLm1peGluKHtcclxuICAgICAgRWxBdXRvY29tcGxldGU6IHtcclxuICAgICAgICBhdXRvZm9jdXM6ICdpbnB1dC5lbC1pbnB1dF9faW5uZXInLFxyXG4gICAgICAgIHJlbmRlckRlZmF1bHQ6IGNyZWF0ZUVkaXRSZW5kZXIoKSxcclxuICAgICAgICByZW5kZXJFZGl0OiBjcmVhdGVFZGl0UmVuZGVyKCksXHJcbiAgICAgICAgcmVuZGVyRmlsdGVyOiBjcmVhdGVGaWx0ZXJSZW5kZXIoKSxcclxuICAgICAgICBkZWZhdWx0RmlsdGVyTWV0aG9kOiBkZWZhdWx0RXhhY3RGaWx0ZXJNZXRob2QsXHJcbiAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKClcclxuICAgICAgfSxcclxuICAgICAgRWxJbnB1dDoge1xyXG4gICAgICAgIGF1dG9mb2N1czogJ2lucHV0LmVsLWlucHV0X19pbm5lcicsXHJcbiAgICAgICAgcmVuZGVyRGVmYXVsdDogY3JlYXRlRWRpdFJlbmRlcigpLFxyXG4gICAgICAgIHJlbmRlckVkaXQ6IGNyZWF0ZUVkaXRSZW5kZXIoKSxcclxuICAgICAgICByZW5kZXJGaWx0ZXI6IGNyZWF0ZUZpbHRlclJlbmRlcigpLFxyXG4gICAgICAgIGRlZmF1bHRGaWx0ZXJNZXRob2Q6IGRlZmF1bHRGdXp6eUZpbHRlck1ldGhvZCxcclxuICAgICAgICByZW5kZXJJdGVtQ29udGVudDogY3JlYXRlRm9ybUl0ZW1SZW5kZXIoKVxyXG4gICAgICB9LFxyXG4gICAgICBFbElucHV0TnVtYmVyOiB7XHJcbiAgICAgICAgYXV0b2ZvY3VzOiAnaW5wdXQuZWwtaW5wdXRfX2lubmVyJyxcclxuICAgICAgICByZW5kZXJEZWZhdWx0OiBjcmVhdGVFZGl0UmVuZGVyKCksXHJcbiAgICAgICAgcmVuZGVyRWRpdDogY3JlYXRlRWRpdFJlbmRlcigpLFxyXG4gICAgICAgIHJlbmRlckZpbHRlcjogY3JlYXRlRmlsdGVyUmVuZGVyKCksXHJcbiAgICAgICAgZGVmYXVsdEZpbHRlck1ldGhvZDogZGVmYXVsdEZ1enp5RmlsdGVyTWV0aG9kLFxyXG4gICAgICAgIHJlbmRlckl0ZW1Db250ZW50OiBjcmVhdGVGb3JtSXRlbVJlbmRlcigpXHJcbiAgICAgIH0sXHJcbiAgICAgIEVsU2VsZWN0OiB7XHJcbiAgICAgICAgcmVuZGVyRWRpdCAocmVuZGVyT3B0cywgcGFyYW1zKSB7XHJcbiAgICAgICAgICBjb25zdCB7IG9wdGlvbnMgPSBbXSwgb3B0aW9uR3JvdXBzLCBvcHRpb25Qcm9wcyA9IHt9LCBvcHRpb25Hcm91cFByb3BzID0ge30gfSA9IHJlbmRlck9wdHNcclxuICAgICAgICAgIGNvbnN0IHsgcm93LCBjb2x1bW4gfSA9IHBhcmFtc1xyXG4gICAgICAgICAgY29uc3QgeyBhdHRycyB9ID0gcmVuZGVyT3B0c1xyXG4gICAgICAgICAgY29uc3QgY2VsbFZhbHVlID0gWEVVdGlscy5nZXQocm93LCBjb2x1bW4ucHJvcGVydHkpXHJcbiAgICAgICAgICBjb25zdCBwcm9wcyA9IGdldENlbGxFZGl0RmlsdGVyUHJvcHMocmVuZGVyT3B0cywgcGFyYW1zLCBjZWxsVmFsdWUpXHJcbiAgICAgICAgICBjb25zdCBvbnMgPSBnZXRFZGl0T25zKHJlbmRlck9wdHMsIHBhcmFtcylcclxuICAgICAgICAgIGlmIChvcHRpb25Hcm91cHMpIHtcclxuICAgICAgICAgICAgY29uc3QgZ3JvdXBPcHRpb25zID0gb3B0aW9uR3JvdXBQcm9wcy5vcHRpb25zIHx8ICdvcHRpb25zJ1xyXG4gICAgICAgICAgICBjb25zdCBncm91cExhYmVsID0gb3B0aW9uR3JvdXBQcm9wcy5sYWJlbCB8fCAnbGFiZWwnXHJcbiAgICAgICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgICAgaChyZXNvbHZlQ29tcG9uZW50KCdlbC1zZWxlY3QnKSBhcyBDb21wb25lbnRPcHRpb25zLCB7XHJcbiAgICAgICAgICAgICAgICAuLi5hdHRycyxcclxuICAgICAgICAgICAgICAgIC4uLnByb3BzLFxyXG4gICAgICAgICAgICAgICAgLi4ub25zXHJcbiAgICAgICAgICAgICAgfSwge1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gWEVVdGlscy5tYXAob3B0aW9uR3JvdXBzLCAoZ3JvdXAsIGdJbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBoKHJlc29sdmVDb21wb25lbnQoJ2VsLW9wdGlvbi1ncm91cCcpIGFzIENvbXBvbmVudE9wdGlvbnMsIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGtleTogZ0luZGV4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGdyb3VwW2dyb3VwTGFiZWxdXHJcbiAgICAgICAgICAgICAgICAgICAgfSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4gcmVuZGVyT3B0aW9ucyhncm91cFtncm91cE9wdGlvbnNdLCBvcHRpb25Qcm9wcylcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIGgocmVzb2x2ZUNvbXBvbmVudCgnZWwtc2VsZWN0JykgYXMgQ29tcG9uZW50T3B0aW9ucywge1xyXG4gICAgICAgICAgICAgIC4uLnByb3BzLFxyXG4gICAgICAgICAgICAgIC4uLmF0dHJzLFxyXG4gICAgICAgICAgICAgIC4uLm9uc1xyXG4gICAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4gcmVuZGVyT3B0aW9ucyhvcHRpb25zLCBvcHRpb25Qcm9wcylcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlbmRlckNlbGwgKHJlbmRlck9wdHMsIHBhcmFtcykge1xyXG4gICAgICAgICAgcmV0dXJuIGdldENlbGxMYWJlbFZOcyhyZW5kZXJPcHRzLCBwYXJhbXMsIGdldFNlbGVjdENlbGxWYWx1ZShyZW5kZXJPcHRzLCBwYXJhbXMpKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVuZGVyRmlsdGVyIChyZW5kZXJPcHRzLCBwYXJhbXMpIHtcclxuICAgICAgICAgIGNvbnN0IHsgb3B0aW9ucyA9IFtdLCBvcHRpb25Hcm91cHMsIG9wdGlvblByb3BzID0ge30sIG9wdGlvbkdyb3VwUHJvcHMgPSB7fSB9ID0gcmVuZGVyT3B0c1xyXG4gICAgICAgICAgY29uc3QgZ3JvdXBPcHRpb25zID0gb3B0aW9uR3JvdXBQcm9wcy5vcHRpb25zIHx8ICdvcHRpb25zJ1xyXG4gICAgICAgICAgY29uc3QgZ3JvdXBMYWJlbCA9IG9wdGlvbkdyb3VwUHJvcHMubGFiZWwgfHwgJ2xhYmVsJ1xyXG4gICAgICAgICAgY29uc3QgeyBjb2x1bW4gfSA9IHBhcmFtc1xyXG4gICAgICAgICAgY29uc3QgeyBhdHRycyB9ID0gcmVuZGVyT3B0c1xyXG4gICAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgaCgnZGl2Jywge1xyXG4gICAgICAgICAgICAgIGNsYXNzOiAndnhlLXRhYmxlLS1maWx0ZXItZWxlbWVudC13cmFwcGVyJ1xyXG4gICAgICAgICAgICB9LCBvcHRpb25Hcm91cHNcclxuICAgICAgICAgICAgICA/IGNvbHVtbi5maWx0ZXJzLm1hcCgob3B0aW9uLCBvSW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvblZhbHVlID0gb3B0aW9uLmRhdGFcclxuICAgICAgICAgICAgICAgIGNvbnN0IHByb3BzID0gZ2V0Q2VsbEVkaXRGaWx0ZXJQcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIG9wdGlvblZhbHVlKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGgocmVzb2x2ZUNvbXBvbmVudCgnZWwtc2VsZWN0JykgYXMgQ29tcG9uZW50T3B0aW9ucywge1xyXG4gICAgICAgICAgICAgICAgICBrZXk6IG9JbmRleCxcclxuICAgICAgICAgICAgICAgICAgLi4uYXR0cnMsXHJcbiAgICAgICAgICAgICAgICAgIC4uLnByb3BzLFxyXG4gICAgICAgICAgICAgICAgICAuLi5nZXRGaWx0ZXJPbnMocmVuZGVyT3B0cywgcGFyYW1zLCBvcHRpb24sICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgLy8g5aSE55CGIGNoYW5nZSDkuovku7bnm7jlhbPpgLvovpFcclxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVDb25maXJtRmlsdGVyKHBhcmFtcywgcHJvcHMubXVsdGlwbGUgPyAob3B0aW9uLmRhdGEgJiYgb3B0aW9uLmRhdGEubGVuZ3RoID4gMCkgOiAhWEVVdGlscy5lcU51bGwob3B0aW9uLmRhdGEpLCBvcHRpb24pXHJcbiAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWEVVdGlscy5tYXAob3B0aW9uR3JvdXBzLCAoZ3JvdXAsIGdJbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGgocmVzb2x2ZUNvbXBvbmVudCgnZWwtb3B0aW9uLWdyb3VwJykgYXMgQ29tcG9uZW50T3B0aW9ucywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IGdJbmRleCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGdyb3VwW2dyb3VwTGFiZWxdXHJcbiAgICAgICAgICAgICAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IHJlbmRlck9wdGlvbnMoZ3JvdXBbZ3JvdXBPcHRpb25zXSwgb3B0aW9uUHJvcHMpXHJcbiAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICA6IGNvbHVtbi5maWx0ZXJzLm1hcCgob3B0aW9uLCBvSW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvblZhbHVlID0gb3B0aW9uLmRhdGFcclxuICAgICAgICAgICAgICAgIGNvbnN0IHByb3BzID0gZ2V0Q2VsbEVkaXRGaWx0ZXJQcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIG9wdGlvblZhbHVlKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGgocmVzb2x2ZUNvbXBvbmVudCgnZWwtc2VsZWN0JykgYXMgQ29tcG9uZW50T3B0aW9ucywge1xyXG4gICAgICAgICAgICAgICAgICBrZXk6IG9JbmRleCxcclxuICAgICAgICAgICAgICAgICAgLi4uYXR0cnMsXHJcbiAgICAgICAgICAgICAgICAgIC4uLnByb3BzLFxyXG4gICAgICAgICAgICAgICAgICAuLi5nZXRGaWx0ZXJPbnMocmVuZGVyT3B0cywgcGFyYW1zLCBvcHRpb24sICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDlpITnkIYgY2hhbmdlIOS6i+S7tuebuOWFs+mAu+i+kVxyXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZUNvbmZpcm1GaWx0ZXIocGFyYW1zLCBwcm9wcy5tdWx0aXBsZSA/IChvcHRpb24uZGF0YSAmJiBvcHRpb24uZGF0YS5sZW5ndGggPiAwKSA6ICFYRVV0aWxzLmVxTnVsbChvcHRpb24uZGF0YSksIG9wdGlvbilcclxuICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4gcmVuZGVyT3B0aW9ucyhvcHRpb25zLCBvcHRpb25Qcm9wcylcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICBkZWZhdWx0RmlsdGVyTWV0aG9kIChwYXJhbXMpIHtcclxuICAgICAgICAgIGNvbnN0IHsgb3B0aW9uLCByb3csIGNvbHVtbiB9ID0gcGFyYW1zXHJcbiAgICAgICAgICBjb25zdCB7IGRhdGEgfSA9IG9wdGlvblxyXG4gICAgICAgICAgY29uc3QgeyBwcm9wZXJ0eSwgZmlsdGVyUmVuZGVyOiByZW5kZXJPcHRzIH0gPSBjb2x1bW5cclxuICAgICAgICAgIGNvbnN0IHsgcHJvcHMgPSB7fSB9ID0gcmVuZGVyT3B0c1xyXG4gICAgICAgICAgY29uc3QgY2VsbFZhbHVlID0gWEVVdGlscy5nZXQocm93LCBwcm9wZXJ0eSlcclxuICAgICAgICAgIGlmIChwcm9wcy5tdWx0aXBsZSkge1xyXG4gICAgICAgICAgICBpZiAoWEVVdGlscy5pc0FycmF5KGNlbGxWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gWEVVdGlscy5pbmNsdWRlQXJyYXlzKGNlbGxWYWx1ZSwgZGF0YSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZGF0YS5pbmRleE9mKGNlbGxWYWx1ZSkgPiAtMVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgZXFlcWVxICovXHJcbiAgICAgICAgICByZXR1cm4gY2VsbFZhbHVlID09IGRhdGFcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlbmRlckl0ZW1Db250ZW50IChyZW5kZXJPcHRzLCBwYXJhbXMpIHtcclxuICAgICAgICAgIGNvbnN0IHsgb3B0aW9ucyA9IFtdLCBvcHRpb25Hcm91cHMsIG9wdGlvblByb3BzID0ge30sIG9wdGlvbkdyb3VwUHJvcHMgPSB7fSB9ID0gcmVuZGVyT3B0c1xyXG4gICAgICAgICAgY29uc3QgeyBkYXRhLCBwcm9wZXJ0eSB9ID0gcGFyYW1zXHJcbiAgICAgICAgICBjb25zdCB7IGF0dHJzIH0gPSByZW5kZXJPcHRzXHJcbiAgICAgICAgICBjb25zdCBpdGVtVmFsdWUgPSBYRVV0aWxzLmdldChkYXRhLCBwcm9wZXJ0eSlcclxuICAgICAgICAgIGNvbnN0IHByb3BzID0gZ2V0SXRlbVByb3BzKHJlbmRlck9wdHMsIHBhcmFtcywgaXRlbVZhbHVlKVxyXG4gICAgICAgICAgY29uc3Qgb25zID0gZ2V0SXRlbU9ucyhyZW5kZXJPcHRzLCBwYXJhbXMpXHJcbiAgICAgICAgICBpZiAob3B0aW9uR3JvdXBzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGdyb3VwT3B0aW9ucyA9IG9wdGlvbkdyb3VwUHJvcHMub3B0aW9ucyB8fCAnb3B0aW9ucydcclxuICAgICAgICAgICAgY29uc3QgZ3JvdXBMYWJlbCA9IG9wdGlvbkdyb3VwUHJvcHMubGFiZWwgfHwgJ2xhYmVsJ1xyXG4gICAgICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICAgIGgocmVzb2x2ZUNvbXBvbmVudCgnZWwtc2VsZWN0JykgYXMgQ29tcG9uZW50T3B0aW9ucywge1xyXG4gICAgICAgICAgICAgICAgLi4uYXR0cnMsXHJcbiAgICAgICAgICAgICAgICAuLi5wcm9wcyxcclxuICAgICAgICAgICAgICAgIC4uLm9uc1xyXG4gICAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIFhFVXRpbHMubWFwKG9wdGlvbkdyb3VwcywgKGdyb3VwLCBnSW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaChyZXNvbHZlQ29tcG9uZW50KCdlbC1vcHRpb24tZ3JvdXAnKSBhcyBDb21wb25lbnRPcHRpb25zLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogZ3JvdXBbZ3JvdXBMYWJlbF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICBrZXk6IGdJbmRleFxyXG4gICAgICAgICAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IHJlbmRlck9wdGlvbnMoZ3JvdXBbZ3JvdXBPcHRpb25zXSwgb3B0aW9uUHJvcHMpXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICBoKHJlc29sdmVDb21wb25lbnQoJ2VsLXNlbGVjdCcpIGFzIENvbXBvbmVudE9wdGlvbnMsIHtcclxuICAgICAgICAgICAgICAuLi5hdHRycyxcclxuICAgICAgICAgICAgICAuLi5wcm9wcyxcclxuICAgICAgICAgICAgICAuLi5vbnNcclxuICAgICAgICAgICAgfSwge1xyXG4gICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IHJlbmRlck9wdGlvbnMob3B0aW9ucywgb3B0aW9uUHJvcHMpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICBleHBvcnRNZXRob2Q6IGNyZWF0ZUV4cG9ydE1ldGhvZChnZXRTZWxlY3RDZWxsVmFsdWUpXHJcbiAgICAgIH0sXHJcbiAgICAgIEVsQ2FzY2FkZXI6IHtcclxuICAgICAgICByZW5kZXJFZGl0OiBjcmVhdGVFZGl0UmVuZGVyKCksXHJcbiAgICAgICAgcmVuZGVyQ2VsbCAocmVuZGVyT3B0cywgcGFyYW1zKSB7XHJcbiAgICAgICAgICByZXR1cm4gZ2V0Q2VsbExhYmVsVk5zKHJlbmRlck9wdHMsIHBhcmFtcywgZ2V0Q2FzY2FkZXJDZWxsVmFsdWUocmVuZGVyT3B0cywgcGFyYW1zKSlcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlbmRlckl0ZW1Db250ZW50OiBjcmVhdGVGb3JtSXRlbVJlbmRlcigpLFxyXG4gICAgICAgIGV4cG9ydE1ldGhvZDogY3JlYXRlRXhwb3J0TWV0aG9kKGdldENhc2NhZGVyQ2VsbFZhbHVlKVxyXG4gICAgICB9LFxyXG4gICAgICBFbERhdGVQaWNrZXI6IHtcclxuICAgICAgICByZW5kZXJFZGl0OiBjcmVhdGVFZGl0UmVuZGVyKCksXHJcbiAgICAgICAgcmVuZGVyQ2VsbCAocmVuZGVyT3B0cywgcGFyYW1zKSB7XHJcbiAgICAgICAgICByZXR1cm4gZ2V0Q2VsbExhYmVsVk5zKHJlbmRlck9wdHMsIHBhcmFtcywgZ2V0RGF0ZVBpY2tlckNlbGxWYWx1ZShyZW5kZXJPcHRzLCBwYXJhbXMpKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVuZGVyRmlsdGVyIChyZW5kZXJPcHRzLCBwYXJhbXMpIHtcclxuICAgICAgICAgIGNvbnN0IHsgY29sdW1uIH0gPSBwYXJhbXNcclxuICAgICAgICAgIGNvbnN0IHsgbmFtZSwgYXR0cnMgfSA9IHJlbmRlck9wdHNcclxuICAgICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIGgoJ2RpdicsIHtcclxuICAgICAgICAgICAgICBjbGFzczogJ3Z4ZS10YWJsZS0tZmlsdGVyLWVsZW1lbnQtd3JhcHBlcidcclxuICAgICAgICAgICAgfSwgY29sdW1uLmZpbHRlcnMubWFwKChvcHRpb24sIG9JbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnN0IG9wdGlvblZhbHVlID0gb3B0aW9uLmRhdGFcclxuICAgICAgICAgICAgICByZXR1cm4gaChyZXNvbHZlQ29tcG9uZW50KG5hbWUpLCB7XHJcbiAgICAgICAgICAgICAgICBrZXk6IG9JbmRleCxcclxuICAgICAgICAgICAgICAgIC4uLmF0dHJzLFxyXG4gICAgICAgICAgICAgICAgLi4uZ2V0Q2VsbEVkaXRGaWx0ZXJQcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIG9wdGlvblZhbHVlKSxcclxuICAgICAgICAgICAgICAgIC4uLmdldEZpbHRlck9ucyhyZW5kZXJPcHRzLCBwYXJhbXMsIG9wdGlvbiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAvLyDlpITnkIYgY2hhbmdlIOS6i+S7tuebuOWFs+mAu+i+kVxyXG4gICAgICAgICAgICAgICAgICBoYW5kbGVDb25maXJtRmlsdGVyKHBhcmFtcywgISFvcHRpb24uZGF0YSwgb3B0aW9uKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KSlcclxuICAgICAgICAgIF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGRlZmF1bHRGaWx0ZXJNZXRob2QgKHBhcmFtcykge1xyXG4gICAgICAgICAgY29uc3QgeyBvcHRpb24sIHJvdywgY29sdW1uIH0gPSBwYXJhbXNcclxuICAgICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gb3B0aW9uXHJcbiAgICAgICAgICBjb25zdCB7IGZpbHRlclJlbmRlcjogcmVuZGVyT3B0cyB9ID0gY29sdW1uXHJcbiAgICAgICAgICBjb25zdCB7IHByb3BzID0ge30gfSA9IHJlbmRlck9wdHNcclxuICAgICAgICAgIGNvbnN0IGNlbGxWYWx1ZSA9IFhFVXRpbHMuZ2V0KHJvdywgY29sdW1uLnByb3BlcnR5KVxyXG4gICAgICAgICAgaWYgKGRhdGEpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChwcm9wcy50eXBlKSB7XHJcbiAgICAgICAgICAgICAgY2FzZSAnZGF0ZXJhbmdlJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcXVhbERhdGVyYW5nZShjZWxsVmFsdWUsIGRhdGEsIHByb3BzLCAnWVlZWS1NTS1ERCcpXHJcbiAgICAgICAgICAgICAgY2FzZSAnZGF0ZXRpbWVyYW5nZSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXF1YWxEYXRlcmFuZ2UoY2VsbFZhbHVlLCBkYXRhLCBwcm9wcywgJ1lZWVktTU0tREQgSEg6c3M6bW0nKVxyXG4gICAgICAgICAgICAgIGNhc2UgJ21vbnRocmFuZ2UnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVxdWFsRGF0ZXJhbmdlKGNlbGxWYWx1ZSwgZGF0YSwgcHJvcHMsICdZWVlZLU1NJylcclxuICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNlbGxWYWx1ZSA9PT0gZGF0YVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlbmRlckl0ZW1Db250ZW50OiBjcmVhdGVGb3JtSXRlbVJlbmRlcigpLFxyXG4gICAgICAgIGV4cG9ydE1ldGhvZDogY3JlYXRlRXhwb3J0TWV0aG9kKGdldERhdGVQaWNrZXJDZWxsVmFsdWUpXHJcbiAgICAgIH0sXHJcbiAgICAgIEVsVGltZVBpY2tlcjoge1xyXG4gICAgICAgIHJlbmRlckVkaXQ6IGNyZWF0ZUVkaXRSZW5kZXIoKSxcclxuICAgICAgICByZW5kZXJDZWxsIChyZW5kZXJPcHRzLCBwYXJhbXMpIHtcclxuICAgICAgICAgIHJldHVybiBnZXRDZWxsTGFiZWxWTnMocmVuZGVyT3B0cywgcGFyYW1zLCBnZXRUaW1lUGlja2VyQ2VsbFZhbHVlKHJlbmRlck9wdHMsIHBhcmFtcykpXHJcbiAgICAgICAgfSxcclxuICAgICAgICByZW5kZXJJdGVtQ29udGVudDogY3JlYXRlRm9ybUl0ZW1SZW5kZXIoKSxcclxuICAgICAgICBleHBvcnRNZXRob2Q6IGNyZWF0ZUV4cG9ydE1ldGhvZChnZXRUaW1lUGlja2VyQ2VsbFZhbHVlKVxyXG4gICAgICB9LFxyXG4gICAgICBFbFRpbWVTZWxlY3Q6IHtcclxuICAgICAgICByZW5kZXJFZGl0OiBjcmVhdGVFZGl0UmVuZGVyKCksXHJcbiAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKClcclxuICAgICAgfSxcclxuICAgICAgRWxSYXRlOiB7XHJcbiAgICAgICAgcmVuZGVyRGVmYXVsdDogY3JlYXRlRWRpdFJlbmRlcigpLFxyXG4gICAgICAgIHJlbmRlckVkaXQ6IGNyZWF0ZUVkaXRSZW5kZXIoKSxcclxuICAgICAgICByZW5kZXJGaWx0ZXI6IGNyZWF0ZUZpbHRlclJlbmRlcigpLFxyXG4gICAgICAgIGRlZmF1bHRGaWx0ZXJNZXRob2Q6IGRlZmF1bHRFeGFjdEZpbHRlck1ldGhvZCxcclxuICAgICAgICByZW5kZXJJdGVtQ29udGVudDogY3JlYXRlRm9ybUl0ZW1SZW5kZXIoKVxyXG4gICAgICB9LFxyXG4gICAgICBFbFN3aXRjaDoge1xyXG4gICAgICAgIHJlbmRlckRlZmF1bHQ6IGNyZWF0ZUVkaXRSZW5kZXIoKSxcclxuICAgICAgICByZW5kZXJFZGl0OiBjcmVhdGVFZGl0UmVuZGVyKCksXHJcbiAgICAgICAgcmVuZGVyRmlsdGVyIChyZW5kZXJPcHRzLCBwYXJhbXMpIHtcclxuICAgICAgICAgIGNvbnN0IHsgY29sdW1uIH0gPSBwYXJhbXNcclxuICAgICAgICAgIGNvbnN0IHsgbmFtZSwgYXR0cnMgfSA9IHJlbmRlck9wdHNcclxuICAgICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIGgoJ2RpdicsIHtcclxuICAgICAgICAgICAgICBjbGFzczogJ3Z4ZS10YWJsZS0tZmlsdGVyLWVsZW1lbnQtd3JhcHBlcidcclxuICAgICAgICAgICAgfSwgY29sdW1uLmZpbHRlcnMubWFwKChvcHRpb24sIG9JbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnN0IG9wdGlvblZhbHVlID0gb3B0aW9uLmRhdGFcclxuICAgICAgICAgICAgICByZXR1cm4gaChyZXNvbHZlQ29tcG9uZW50KG5hbWUpLCB7XHJcbiAgICAgICAgICAgICAgICBrZXk6IG9JbmRleCxcclxuICAgICAgICAgICAgICAgIC4uLmF0dHJzLFxyXG4gICAgICAgICAgICAgICAgLi4uZ2V0Q2VsbEVkaXRGaWx0ZXJQcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIG9wdGlvblZhbHVlKSxcclxuICAgICAgICAgICAgICAgIC4uLmdldEZpbHRlck9ucyhyZW5kZXJPcHRzLCBwYXJhbXMsIG9wdGlvbiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAvLyDlpITnkIYgY2hhbmdlIOS6i+S7tuebuOWFs+mAu+i+kVxyXG4gICAgICAgICAgICAgICAgICBoYW5kbGVDb25maXJtRmlsdGVyKHBhcmFtcywgWEVVdGlscy5pc0Jvb2xlYW4ob3B0aW9uLmRhdGEpLCBvcHRpb24pXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pKVxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGVmYXVsdEZpbHRlck1ldGhvZDogZGVmYXVsdEV4YWN0RmlsdGVyTWV0aG9kLFxyXG4gICAgICAgIHJlbmRlckl0ZW1Db250ZW50OiBjcmVhdGVGb3JtSXRlbVJlbmRlcigpXHJcbiAgICAgIH0sXHJcbiAgICAgIEVsU2xpZGVyOiB7XHJcbiAgICAgICAgcmVuZGVyRGVmYXVsdDogY3JlYXRlRWRpdFJlbmRlcigpLFxyXG4gICAgICAgIHJlbmRlckVkaXQ6IGNyZWF0ZUVkaXRSZW5kZXIoKSxcclxuICAgICAgICByZW5kZXJGaWx0ZXI6IGNyZWF0ZUZpbHRlclJlbmRlcigpLFxyXG4gICAgICAgIGRlZmF1bHRGaWx0ZXJNZXRob2Q6IGRlZmF1bHRFeGFjdEZpbHRlck1ldGhvZCxcclxuICAgICAgICByZW5kZXJJdGVtQ29udGVudDogY3JlYXRlRm9ybUl0ZW1SZW5kZXIoKVxyXG4gICAgICB9LFxyXG4gICAgICBFbFJhZGlvOiB7XHJcbiAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGNyZWF0ZUZvcm1JdGVtUmFkaW9BbmRDaGVja2JveFJlbmRlcigpXHJcbiAgICAgIH0sXHJcbiAgICAgIEVsQ2hlY2tib3g6IHtcclxuICAgICAgICByZW5kZXJJdGVtQ29udGVudDogY3JlYXRlRm9ybUl0ZW1SYWRpb0FuZENoZWNrYm94UmVuZGVyKClcclxuICAgICAgfSxcclxuICAgICAgRWxCdXR0b246IHtcclxuICAgICAgICByZW5kZXJEZWZhdWx0OiBkZWZhdWx0QnV0dG9uRWRpdFJlbmRlcixcclxuICAgICAgICByZW5kZXJJdGVtQ29udGVudDogZGVmYXVsdEJ1dHRvbkl0ZW1SZW5kZXJcclxuICAgICAgfSxcclxuICAgICAgRWxCdXR0b25zOiB7XHJcbiAgICAgICAgcmVuZGVyRGVmYXVsdDogZGVmYXVsdEJ1dHRvbnNFZGl0UmVuZGVyLFxyXG4gICAgICAgIHJlbmRlckl0ZW1Db250ZW50OiBkZWZhdWx0QnV0dG9uc0l0ZW1SZW5kZXJcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICBpbnRlcmNlcHRvci5hZGQoJ2V2ZW50LmNsZWFyRmlsdGVyJywgaGFuZGxlQ2xlYXJFdmVudClcclxuICAgIGludGVyY2VwdG9yLmFkZCgnZXZlbnQuY2xlYXJBY3RpdmVkJywgaGFuZGxlQ2xlYXJFdmVudClcclxuICAgIGludGVyY2VwdG9yLmFkZCgnZXZlbnQuY2xlYXJBcmVhcycsIGhhbmRsZUNsZWFyRXZlbnQpXHJcbiAgfVxyXG59XHJcblxyXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LlZYRVRhYmxlICYmIHdpbmRvdy5WWEVUYWJsZS51c2UpIHtcclxuICB3aW5kb3cuVlhFVGFibGUudXNlKFZYRVRhYmxlUGx1Z2luRWxlbWVudClcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVlhFVGFibGVQbHVnaW5FbGVtZW50XHJcbiIsImltcG9ydCB7IGgsIHJlc29sdmVDb21wb25lbnQgfSBmcm9tICd2dWUnO1xuaW1wb3J0IFhFVXRpbHMgZnJvbSAneGUtdXRpbHMnO1xuaW1wb3J0IGRheWpzIGZyb20gJ2RheWpzJztcbmxldCB2eGV0YWJsZTtcbmZ1bmN0aW9uIGlzRW1wdHlWYWx1ZShjZWxsVmFsdWUpIHtcbiAgICByZXR1cm4gY2VsbFZhbHVlID09PSBudWxsIHx8IGNlbGxWYWx1ZSA9PT0gdW5kZWZpbmVkIHx8IGNlbGxWYWx1ZSA9PT0gJyc7XG59XG5mdW5jdGlvbiBnZXRPbk5hbWUodHlwZSkge1xuICAgIHJldHVybiAnb24nICsgdHlwZS5zdWJzdHJpbmcoMCwgMSkudG9Mb2NhbGVVcHBlckNhc2UoKSArIHR5cGUuc3Vic3RyaW5nKDEpO1xufVxuZnVuY3Rpb24gZ2V0TW9kZWxQcm9wKHJlbmRlck9wdHMpIHtcbiAgICByZXR1cm4gJ21vZGVsVmFsdWUnO1xufVxuZnVuY3Rpb24gZ2V0TW9kZWxFdmVudChyZW5kZXJPcHRzKSB7XG4gICAgcmV0dXJuICd1cGRhdGU6bW9kZWxWYWx1ZSc7XG59XG5mdW5jdGlvbiBnZXRDaGFuZ2VFdmVudChyZW5kZXJPcHRzKSB7XG4gICAgbGV0IHR5cGUgPSAnY2hhbmdlJztcbiAgICBzd2l0Y2ggKHJlbmRlck9wdHMubmFtZSkge1xuICAgICAgICBjYXNlICdFbEF1dG9jb21wbGV0ZSc6XG4gICAgICAgICAgICB0eXBlID0gJ3NlbGVjdCc7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnRWxJbnB1dCc6XG4gICAgICAgIGNhc2UgJ0VsSW5wdXROdW1iZXInOlxuICAgICAgICAgICAgdHlwZSA9ICdpbnB1dCc7XG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIHR5cGU7XG59XG5mdW5jdGlvbiB0b0RheVN0cmluZ0RhdGUodmFsdWUsIGZvcm1hdCkge1xuICAgIHJldHVybiBkYXlqcyh2YWx1ZSwgZm9ybWF0KS5kYXRlO1xufVxuZnVuY3Rpb24gdG9EYXlEYXRlU3RyaW5nKGRhdGUsIGZvcm1hdCkge1xuICAgIHJldHVybiBkYXlqcyhkYXRlKS5mb3JtYXQoZm9ybWF0KTtcbn1cbmZ1bmN0aW9uIHBhcnNlRGF0ZSh2YWx1ZSwgcHJvcHMpIHtcbiAgICByZXR1cm4gdmFsdWUgJiYgcHJvcHMudmFsdWVGb3JtYXQgPyB0b0RheVN0cmluZ0RhdGUodmFsdWUsIHByb3BzLnZhbHVlRm9ybWF0KSA6IHZhbHVlO1xufVxuZnVuY3Rpb24gZ2V0Rm9ybWF0RGF0ZSh2YWx1ZSwgcHJvcHMsIGRlZmF1bHRGb3JtYXQpIHtcbiAgICByZXR1cm4gdmFsdWUgPyB0b0RheURhdGVTdHJpbmcocGFyc2VEYXRlKHZhbHVlLCBwcm9wcyksIHByb3BzLmZvcm1hdCB8fCBkZWZhdWx0Rm9ybWF0KSA6IHZhbHVlO1xufVxuZnVuY3Rpb24gZ2V0Rm9ybWF0RGF0ZXModmFsdWVzLCBwcm9wcywgc2VwYXJhdG9yLCBkZWZhdWx0Rm9ybWF0KSB7XG4gICAgcmV0dXJuIFhFVXRpbHMubWFwKHZhbHVlcywgKGRhdGUpID0+IGdldEZvcm1hdERhdGUoZGF0ZSwgcHJvcHMsIGRlZmF1bHRGb3JtYXQpKS5qb2luKHNlcGFyYXRvcik7XG59XG5mdW5jdGlvbiBlcXVhbERhdGVyYW5nZShjZWxsVmFsdWUsIGRhdGEsIHByb3BzLCBkZWZhdWx0Rm9ybWF0KSB7XG4gICAgY2VsbFZhbHVlID0gZ2V0Rm9ybWF0RGF0ZShjZWxsVmFsdWUsIHByb3BzLCBkZWZhdWx0Rm9ybWF0KTtcbiAgICByZXR1cm4gY2VsbFZhbHVlID49IGdldEZvcm1hdERhdGUoZGF0YVswXSwgcHJvcHMsIGRlZmF1bHRGb3JtYXQpICYmIGNlbGxWYWx1ZSA8PSBnZXRGb3JtYXREYXRlKGRhdGFbMV0sIHByb3BzLCBkZWZhdWx0Rm9ybWF0KTtcbn1cbmZ1bmN0aW9uIGdldENlbGxFZGl0RmlsdGVyUHJvcHMocmVuZGVyT3B0cywgcGFyYW1zLCB2YWx1ZSwgZGVmYXVsdFByb3BzKSB7XG4gICAgcmV0dXJuIFhFVXRpbHMuYXNzaWduKHt9LCBkZWZhdWx0UHJvcHMsIHJlbmRlck9wdHMucHJvcHMsIHsgW2dldE1vZGVsUHJvcChyZW5kZXJPcHRzKV06IHZhbHVlIH0pO1xufVxuZnVuY3Rpb24gZ2V0SXRlbVByb3BzKHJlbmRlck9wdHMsIHBhcmFtcywgdmFsdWUsIGRlZmF1bHRQcm9wcykge1xuICAgIHJldHVybiBYRVV0aWxzLmFzc2lnbih7fSwgZGVmYXVsdFByb3BzLCByZW5kZXJPcHRzLnByb3BzLCB7IFtnZXRNb2RlbFByb3AocmVuZGVyT3B0cyldOiB2YWx1ZSB9KTtcbn1cbmZ1bmN0aW9uIGZvcm1hdFRleHQoY2VsbFZhbHVlKSB7XG4gICAgcmV0dXJuICcnICsgKGlzRW1wdHlWYWx1ZShjZWxsVmFsdWUpID8gJycgOiBjZWxsVmFsdWUpO1xufVxuZnVuY3Rpb24gZ2V0Q2VsbExhYmVsVk5zKHJlbmRlck9wdHMsIHBhcmFtcywgY2VsbExhYmVsKSB7XG4gICAgY29uc3QgeyBwbGFjZWhvbGRlciB9ID0gcmVuZGVyT3B0cztcbiAgICByZXR1cm4gW1xuICAgICAgICBoKCdzcGFuJywge1xuICAgICAgICAgICAgY2xhc3M6ICd2eGUtY2VsbC0tbGFiZWwnXG4gICAgICAgIH0sIHBsYWNlaG9sZGVyICYmIGlzRW1wdHlWYWx1ZShjZWxsTGFiZWwpXG4gICAgICAgICAgICA/IFtcbiAgICAgICAgICAgICAgICBoKCdzcGFuJywge1xuICAgICAgICAgICAgICAgICAgICBjbGFzczogJ3Z4ZS1jZWxsLS1wbGFjZWhvbGRlcidcbiAgICAgICAgICAgICAgICB9LCBmb3JtYXRUZXh0KHZ4ZXRhYmxlLl90KHBsYWNlaG9sZGVyKSkpXG4gICAgICAgICAgICBdXG4gICAgICAgICAgICA6IGZvcm1hdFRleHQoY2VsbExhYmVsKSlcbiAgICBdO1xufVxuZnVuY3Rpb24gZ2V0T25zKHJlbmRlck9wdHMsIHBhcmFtcywgaW5wdXRGdW5jLCBjaGFuZ2VGdW5jKSB7XG4gICAgY29uc3QgeyBldmVudHMgfSA9IHJlbmRlck9wdHM7XG4gICAgY29uc3QgbW9kZWxFdmVudCA9IGdldE1vZGVsRXZlbnQocmVuZGVyT3B0cyk7XG4gICAgY29uc3QgY2hhbmdlRXZlbnQgPSBnZXRDaGFuZ2VFdmVudChyZW5kZXJPcHRzKTtcbiAgICBjb25zdCBpc1NhbWVFdmVudCA9IGNoYW5nZUV2ZW50ID09PSBtb2RlbEV2ZW50O1xuICAgIGNvbnN0IG9ucyA9IHt9O1xuICAgIFhFVXRpbHMub2JqZWN0RWFjaChldmVudHMsIChmdW5jLCBrZXkpID0+IHtcbiAgICAgICAgb25zW2dldE9uTmFtZShrZXkpXSA9IGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICBmdW5jKHBhcmFtcywgLi4uYXJncyk7XG4gICAgICAgIH07XG4gICAgfSk7XG4gICAgaWYgKGlucHV0RnVuYykge1xuICAgICAgICBvbnNbZ2V0T25OYW1lKG1vZGVsRXZlbnQpXSA9IGZ1bmN0aW9uICh0YXJnZXRFdm50KSB7XG4gICAgICAgICAgICBpbnB1dEZ1bmModGFyZ2V0RXZudCk7XG4gICAgICAgICAgICBpZiAoZXZlbnRzICYmIGV2ZW50c1ttb2RlbEV2ZW50XSkge1xuICAgICAgICAgICAgICAgIGV2ZW50c1ttb2RlbEV2ZW50XShwYXJhbXMsIHRhcmdldEV2bnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzU2FtZUV2ZW50ICYmIGNoYW5nZUZ1bmMpIHtcbiAgICAgICAgICAgICAgICBjaGFuZ2VGdW5jKHRhcmdldEV2bnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoIWlzU2FtZUV2ZW50ICYmIGNoYW5nZUZ1bmMpIHtcbiAgICAgICAgb25zW2dldE9uTmFtZShjaGFuZ2VFdmVudCldID0gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgIGNoYW5nZUZ1bmMoLi4uYXJncyk7XG4gICAgICAgICAgICBpZiAoZXZlbnRzICYmIGV2ZW50c1tjaGFuZ2VFdmVudF0pIHtcbiAgICAgICAgICAgICAgICBldmVudHNbY2hhbmdlRXZlbnRdKHBhcmFtcywgLi4uYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBvbnM7XG59XG5mdW5jdGlvbiBnZXRFZGl0T25zKHJlbmRlck9wdHMsIHBhcmFtcykge1xuICAgIGNvbnN0IHsgJHRhYmxlLCByb3csIGNvbHVtbiB9ID0gcGFyYW1zO1xuICAgIHJldHVybiBnZXRPbnMocmVuZGVyT3B0cywgcGFyYW1zLCAodmFsdWUpID0+IHtcbiAgICAgICAgLy8g5aSE55CGIG1vZGVsIOWAvOWPjOWQkee7keWumlxuICAgICAgICBYRVV0aWxzLnNldChyb3csIGNvbHVtbi5wcm9wZXJ0eSwgdmFsdWUpO1xuICAgIH0sICgpID0+IHtcbiAgICAgICAgLy8g5aSE55CGIGNoYW5nZSDkuovku7bnm7jlhbPpgLvovpFcbiAgICAgICAgJHRhYmxlLnVwZGF0ZVN0YXR1cyhwYXJhbXMpO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gZ2V0RmlsdGVyT25zKHJlbmRlck9wdHMsIHBhcmFtcywgb3B0aW9uLCBjaGFuZ2VGdW5jKSB7XG4gICAgcmV0dXJuIGdldE9ucyhyZW5kZXJPcHRzLCBwYXJhbXMsICh2YWx1ZSkgPT4ge1xuICAgICAgICAvLyDlpITnkIYgbW9kZWwg5YC85Y+M5ZCR57uR5a6aXG4gICAgICAgIG9wdGlvbi5kYXRhID0gdmFsdWU7XG4gICAgfSwgY2hhbmdlRnVuYyk7XG59XG5mdW5jdGlvbiBnZXRJdGVtT25zKHJlbmRlck9wdHMsIHBhcmFtcykge1xuICAgIGNvbnN0IHsgJGZvcm0sIGRhdGEsIHByb3BlcnR5IH0gPSBwYXJhbXM7XG4gICAgcmV0dXJuIGdldE9ucyhyZW5kZXJPcHRzLCBwYXJhbXMsICh2YWx1ZSkgPT4ge1xuICAgICAgICAvLyDlpITnkIYgbW9kZWwg5YC85Y+M5ZCR57uR5a6aXG4gICAgICAgIFhFVXRpbHMuc2V0KGRhdGEsIHByb3BlcnR5LCB2YWx1ZSk7XG4gICAgfSwgKCkgPT4ge1xuICAgICAgICAvLyDlpITnkIYgY2hhbmdlIOS6i+S7tuebuOWFs+mAu+i+kVxuICAgICAgICAkZm9ybS51cGRhdGVTdGF0dXMocGFyYW1zKTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIG1hdGNoQ2FzY2FkZXJEYXRhKGluZGV4LCBsaXN0LCB2YWx1ZXMsIGxhYmVscykge1xuICAgIGNvbnN0IHZhbCA9IHZhbHVlc1tpbmRleF07XG4gICAgaWYgKGxpc3QgJiYgdmFsdWVzLmxlbmd0aCA+IGluZGV4KSB7XG4gICAgICAgIFhFVXRpbHMuZWFjaChsaXN0LCAoaXRlbSkgPT4ge1xuICAgICAgICAgICAgaWYgKGl0ZW0udmFsdWUgPT09IHZhbCkge1xuICAgICAgICAgICAgICAgIGxhYmVscy5wdXNoKGl0ZW0ubGFiZWwpO1xuICAgICAgICAgICAgICAgIG1hdGNoQ2FzY2FkZXJEYXRhKCsraW5kZXgsIGl0ZW0uY2hpbGRyZW4sIHZhbHVlcywgbGFiZWxzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0U2VsZWN0Q2VsbFZhbHVlKHJlbmRlck9wdHMsIHBhcmFtcykge1xuICAgIGNvbnN0IHsgb3B0aW9ucyA9IFtdLCBvcHRpb25Hcm91cHMsIHByb3BzID0ge30sIG9wdGlvblByb3BzID0ge30sIG9wdGlvbkdyb3VwUHJvcHMgPSB7fSB9ID0gcmVuZGVyT3B0cztcbiAgICBjb25zdCB7ICR0YWJsZSwgcm93aWQsIHJvdywgY29sdW1uIH0gPSBwYXJhbXM7XG4gICAgY29uc3QgeyBmaWx0ZXJhYmxlLCBtdWx0aXBsZSB9ID0gcHJvcHM7XG4gICAgY29uc3QgbGFiZWxQcm9wID0gb3B0aW9uUHJvcHMubGFiZWwgfHwgJ2xhYmVsJztcbiAgICBjb25zdCB2YWx1ZVByb3AgPSBvcHRpb25Qcm9wcy52YWx1ZSB8fCAndmFsdWUnO1xuICAgIGNvbnN0IGdyb3VwT3B0aW9ucyA9IG9wdGlvbkdyb3VwUHJvcHMub3B0aW9ucyB8fCAnb3B0aW9ucyc7XG4gICAgY29uc3QgY2VsbFZhbHVlID0gWEVVdGlscy5nZXQocm93LCBjb2x1bW4ucHJvcGVydHkpO1xuICAgIGNvbnN0IGNvbGlkID0gY29sdW1uLmlkO1xuICAgIGxldCBjZWxsRGF0YTtcbiAgICBpZiAoZmlsdGVyYWJsZSkge1xuICAgICAgICBjb25zdCB7IGludGVybmFsRGF0YSB9ID0gJHRhYmxlO1xuICAgICAgICBjb25zdCB7IGZ1bGxBbGxEYXRhUm93SWREYXRhIH0gPSBpbnRlcm5hbERhdGE7XG4gICAgICAgIGNvbnN0IHJlc3QgPSBmdWxsQWxsRGF0YVJvd0lkRGF0YVtyb3dpZF07XG4gICAgICAgIGlmIChyZXN0KSB7XG4gICAgICAgICAgICBjZWxsRGF0YSA9IHJlc3QuY2VsbERhdGE7XG4gICAgICAgICAgICBpZiAoIWNlbGxEYXRhKSB7XG4gICAgICAgICAgICAgICAgY2VsbERhdGEgPSByZXN0LmNlbGxEYXRhID0ge307XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3QgJiYgY2VsbERhdGFbY29saWRdICYmIGNlbGxEYXRhW2NvbGlkXS52YWx1ZSA9PT0gY2VsbFZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gY2VsbERhdGFbY29saWRdLmxhYmVsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICghaXNFbXB0eVZhbHVlKGNlbGxWYWx1ZSkpIHtcbiAgICAgICAgY29uc3Qgc2VsZWN0bGFiZWwgPSBYRVV0aWxzLm1hcChtdWx0aXBsZSA/IGNlbGxWYWx1ZSA6IFtjZWxsVmFsdWVdLCBvcHRpb25Hcm91cHNcbiAgICAgICAgICAgID8gKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHNlbGVjdEl0ZW07XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IG9wdGlvbkdyb3Vwcy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0SXRlbSA9IFhFVXRpbHMuZmluZChvcHRpb25Hcm91cHNbaW5kZXhdW2dyb3VwT3B0aW9uc10sIChpdGVtKSA9PiBpdGVtW3ZhbHVlUHJvcF0gPT09IHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdEl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBzZWxlY3RJdGVtID8gc2VsZWN0SXRlbVtsYWJlbFByb3BdIDogdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6ICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdEl0ZW0gPSBYRVV0aWxzLmZpbmQob3B0aW9ucywgKGl0ZW0pID0+IGl0ZW1bdmFsdWVQcm9wXSA9PT0gdmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBzZWxlY3RJdGVtID8gc2VsZWN0SXRlbVtsYWJlbFByb3BdIDogdmFsdWU7XG4gICAgICAgICAgICB9KS5qb2luKCcsICcpO1xuICAgICAgICBpZiAoY2VsbERhdGEgJiYgb3B0aW9ucyAmJiBvcHRpb25zLmxlbmd0aCkge1xuICAgICAgICAgICAgY2VsbERhdGFbY29saWRdID0geyB2YWx1ZTogY2VsbFZhbHVlLCBsYWJlbDogc2VsZWN0bGFiZWwgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2VsZWN0bGFiZWw7XG4gICAgfVxuICAgIHJldHVybiAnJztcbn1cbmZ1bmN0aW9uIGdldENhc2NhZGVyQ2VsbFZhbHVlKHJlbmRlck9wdHMsIHBhcmFtcykge1xuICAgIGNvbnN0IHsgcHJvcHMgPSB7fSB9ID0gcmVuZGVyT3B0cztcbiAgICBjb25zdCB7IHJvdywgY29sdW1uIH0gPSBwYXJhbXM7XG4gICAgY29uc3QgY2VsbFZhbHVlID0gWEVVdGlscy5nZXQocm93LCBjb2x1bW4ucHJvcGVydHkpO1xuICAgIGNvbnN0IHZhbHVlcyA9IGNlbGxWYWx1ZSB8fCBbXTtcbiAgICBjb25zdCBsYWJlbHMgPSBbXTtcbiAgICBtYXRjaENhc2NhZGVyRGF0YSgwLCBwcm9wcy5vcHRpb25zLCB2YWx1ZXMsIGxhYmVscyk7XG4gICAgcmV0dXJuIChwcm9wcy5zaG93QWxsTGV2ZWxzID09PSBmYWxzZSA/IGxhYmVscy5zbGljZShsYWJlbHMubGVuZ3RoIC0gMSwgbGFiZWxzLmxlbmd0aCkgOiBsYWJlbHMpLmpvaW4oYCAke3Byb3BzLnNlcGFyYXRvciB8fCAnLyd9IGApO1xufVxuZnVuY3Rpb24gZ2V0RGF0ZVBpY2tlckNlbGxWYWx1ZShyZW5kZXJPcHRzLCBwYXJhbXMpIHtcbiAgICBjb25zdCB7IHByb3BzID0ge30gfSA9IHJlbmRlck9wdHM7XG4gICAgY29uc3QgeyByb3csIGNvbHVtbiB9ID0gcGFyYW1zO1xuICAgIGNvbnN0IHsgcmFuZ2VTZXBhcmF0b3IgPSAnLScgfSA9IHByb3BzO1xuICAgIGxldCBjZWxsVmFsdWUgPSBYRVV0aWxzLmdldChyb3csIGNvbHVtbi5wcm9wZXJ0eSk7XG4gICAgc3dpdGNoIChwcm9wcy50eXBlKSB7XG4gICAgICAgIGNhc2UgJ3dlZWsnOlxuICAgICAgICAgICAgY2VsbFZhbHVlID0gZ2V0Rm9ybWF0RGF0ZShjZWxsVmFsdWUsIHByb3BzLCAnWVlZWXdXVycpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ21vbnRoJzpcbiAgICAgICAgICAgIGNlbGxWYWx1ZSA9IGdldEZvcm1hdERhdGUoY2VsbFZhbHVlLCBwcm9wcywgJ1lZWVktTU0nKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd5ZWFyJzpcbiAgICAgICAgICAgIGNlbGxWYWx1ZSA9IGdldEZvcm1hdERhdGUoY2VsbFZhbHVlLCBwcm9wcywgJ1lZWVknKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdkYXRlcyc6XG4gICAgICAgICAgICBjZWxsVmFsdWUgPSBnZXRGb3JtYXREYXRlcyhjZWxsVmFsdWUsIHByb3BzLCAnLCAnLCAnWVlZWS1NTS1ERCcpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2RhdGVyYW5nZSc6XG4gICAgICAgICAgICBjZWxsVmFsdWUgPSBnZXRGb3JtYXREYXRlcyhjZWxsVmFsdWUsIHByb3BzLCBgICR7cmFuZ2VTZXBhcmF0b3J9IGAsICdZWVlZLU1NLUREJyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnZGF0ZXRpbWVyYW5nZSc6XG4gICAgICAgICAgICBjZWxsVmFsdWUgPSBnZXRGb3JtYXREYXRlcyhjZWxsVmFsdWUsIHByb3BzLCBgICR7cmFuZ2VTZXBhcmF0b3J9IGAsICdZWVlZLU1NLUREIEhIOnNzOm1tJyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnbW9udGhyYW5nZSc6XG4gICAgICAgICAgICBjZWxsVmFsdWUgPSBnZXRGb3JtYXREYXRlcyhjZWxsVmFsdWUsIHByb3BzLCBgICR7cmFuZ2VTZXBhcmF0b3J9IGAsICdZWVlZLU1NJyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNlbGxWYWx1ZSA9IGdldEZvcm1hdERhdGUoY2VsbFZhbHVlLCBwcm9wcywgJ1lZWVktTU0tREQnKTtcbiAgICB9XG4gICAgcmV0dXJuIGNlbGxWYWx1ZTtcbn1cbmZ1bmN0aW9uIGdldFRpbWVQaWNrZXJDZWxsVmFsdWUocmVuZGVyT3B0cywgcGFyYW1zKSB7XG4gICAgY29uc3QgeyBwcm9wcyA9IHt9IH0gPSByZW5kZXJPcHRzO1xuICAgIGNvbnN0IHsgcm93LCBjb2x1bW4gfSA9IHBhcmFtcztcbiAgICBjb25zdCB7IGlzUmFuZ2UsIGZvcm1hdCA9ICdoaDptbTpzcycsIHJhbmdlU2VwYXJhdG9yID0gJy0nIH0gPSBwcm9wcztcbiAgICBsZXQgY2VsbFZhbHVlID0gWEVVdGlscy5nZXQocm93LCBjb2x1bW4ucHJvcGVydHkpO1xuICAgIGlmIChjZWxsVmFsdWUgJiYgaXNSYW5nZSkge1xuICAgICAgICBjZWxsVmFsdWUgPSBYRVV0aWxzLm1hcChjZWxsVmFsdWUsIChkYXRlKSA9PiB0b0RheURhdGVTdHJpbmcocGFyc2VEYXRlKGRhdGUsIHByb3BzKSwgZm9ybWF0KSkuam9pbihgICR7cmFuZ2VTZXBhcmF0b3J9IGApO1xuICAgIH1cbiAgICByZXR1cm4gdG9EYXlEYXRlU3RyaW5nKHBhcnNlRGF0ZShjZWxsVmFsdWUsIHByb3BzKSwgZm9ybWF0KTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUVkaXRSZW5kZXIoZGVmYXVsdFByb3BzKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyZW5kZXJPcHRzLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgeyByb3csIGNvbHVtbiB9ID0gcGFyYW1zO1xuICAgICAgICBjb25zdCB7IG5hbWUsIGF0dHJzIH0gPSByZW5kZXJPcHRzO1xuICAgICAgICBjb25zdCBjZWxsVmFsdWUgPSBYRVV0aWxzLmdldChyb3csIGNvbHVtbi5wcm9wZXJ0eSk7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBoKHJlc29sdmVDb21wb25lbnQobmFtZSksIHtcbiAgICAgICAgICAgICAgICAuLi5hdHRycyxcbiAgICAgICAgICAgICAgICAuLi5nZXRDZWxsRWRpdEZpbHRlclByb3BzKHJlbmRlck9wdHMsIHBhcmFtcywgY2VsbFZhbHVlLCBkZWZhdWx0UHJvcHMpLFxuICAgICAgICAgICAgICAgIC4uLmdldEVkaXRPbnMocmVuZGVyT3B0cywgcGFyYW1zKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgXTtcbiAgICB9O1xufVxuZnVuY3Rpb24gZGVmYXVsdEJ1dHRvbkVkaXRSZW5kZXIocmVuZGVyT3B0cywgcGFyYW1zKSB7XG4gICAgY29uc3QgeyBhdHRycyB9ID0gcmVuZGVyT3B0cztcbiAgICByZXR1cm4gW1xuICAgICAgICBoKHJlc29sdmVDb21wb25lbnQoJ2VsLWJ1dHRvbicpLCB7XG4gICAgICAgICAgICAuLi5hdHRycyxcbiAgICAgICAgICAgIC4uLmdldENlbGxFZGl0RmlsdGVyUHJvcHMocmVuZGVyT3B0cywgcGFyYW1zLCBudWxsKSxcbiAgICAgICAgICAgIC4uLmdldE9ucyhyZW5kZXJPcHRzLCBwYXJhbXMpXG4gICAgICAgIH0sIGNlbGxUZXh0KHJlbmRlck9wdHMuY29udGVudCkpXG4gICAgXTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRCdXR0b25zRWRpdFJlbmRlcihyZW5kZXJPcHRzLCBwYXJhbXMpIHtcbiAgICBjb25zdCB7IGNoaWxkcmVuIH0gPSByZW5kZXJPcHRzO1xuICAgIGlmIChjaGlsZHJlbikge1xuICAgICAgICByZXR1cm4gY2hpbGRyZW4ubWFwKChjaGlsZFJlbmRlck9wdHMpID0+IGRlZmF1bHRCdXR0b25FZGl0UmVuZGVyKGNoaWxkUmVuZGVyT3B0cywgcGFyYW1zKVswXSk7XG4gICAgfVxuICAgIHJldHVybiBbXTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUZpbHRlclJlbmRlcihkZWZhdWx0UHJvcHMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHJlbmRlck9wdHMsIHBhcmFtcykge1xuICAgICAgICBjb25zdCB7IGNvbHVtbiB9ID0gcGFyYW1zO1xuICAgICAgICBjb25zdCB7IG5hbWUsIGF0dHJzIH0gPSByZW5kZXJPcHRzO1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgaCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzOiAndnhlLXRhYmxlLS1maWx0ZXItZWxlbWVudC13cmFwcGVyJ1xuICAgICAgICAgICAgfSwgY29sdW1uLmZpbHRlcnMubWFwKChvcHRpb24sIG9JbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvblZhbHVlID0gb3B0aW9uLmRhdGE7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGgocmVzb2x2ZUNvbXBvbmVudChuYW1lKSwge1xuICAgICAgICAgICAgICAgICAgICBrZXk6IG9JbmRleCxcbiAgICAgICAgICAgICAgICAgICAgLi4uYXR0cnMsXG4gICAgICAgICAgICAgICAgICAgIC4uLmdldENlbGxFZGl0RmlsdGVyUHJvcHMocmVuZGVyT3B0cywgcGFyYW1zLCBvcHRpb25WYWx1ZSwgZGVmYXVsdFByb3BzKSxcbiAgICAgICAgICAgICAgICAgICAgLi4uZ2V0RmlsdGVyT25zKHJlbmRlck9wdHMsIHBhcmFtcywgb3B0aW9uLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDlpITnkIYgY2hhbmdlIOS6i+S7tuebuOWFs+mAu+i+kVxuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlQ29uZmlybUZpbHRlcihwYXJhbXMsICEhb3B0aW9uLmRhdGEsIG9wdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KSlcbiAgICAgICAgXTtcbiAgICB9O1xufVxuZnVuY3Rpb24gaGFuZGxlQ29uZmlybUZpbHRlcihwYXJhbXMsIGNoZWNrZWQsIG9wdGlvbikge1xuICAgIGNvbnN0IHsgJHBhbmVsIH0gPSBwYXJhbXM7XG4gICAgJHBhbmVsLmNoYW5nZU9wdGlvbihudWxsLCBjaGVja2VkLCBvcHRpb24pO1xufVxuLyoqXG4gKiDmqKHns4rljLnphY1cbiAqIEBwYXJhbSBwYXJhbXNcbiAqL1xuZnVuY3Rpb24gZGVmYXVsdEZ1enp5RmlsdGVyTWV0aG9kKHBhcmFtcykge1xuICAgIGNvbnN0IHsgb3B0aW9uLCByb3csIGNvbHVtbiB9ID0gcGFyYW1zO1xuICAgIGNvbnN0IHsgZGF0YSB9ID0gb3B0aW9uO1xuICAgIGNvbnN0IGNlbGxWYWx1ZSA9IFhFVXRpbHMuZ2V0KHJvdywgY29sdW1uLnByb3BlcnR5KTtcbiAgICByZXR1cm4gWEVVdGlscy50b1ZhbHVlU3RyaW5nKGNlbGxWYWx1ZSkuaW5kZXhPZihkYXRhKSA+IC0xO1xufVxuLyoqXG4gKiDnsr7noa7ljLnphY1cbiAqIEBwYXJhbSBwYXJhbXNcbiAqL1xuZnVuY3Rpb24gZGVmYXVsdEV4YWN0RmlsdGVyTWV0aG9kKHBhcmFtcykge1xuICAgIGNvbnN0IHsgb3B0aW9uLCByb3csIGNvbHVtbiB9ID0gcGFyYW1zO1xuICAgIGNvbnN0IHsgZGF0YSB9ID0gb3B0aW9uO1xuICAgIGNvbnN0IGNlbGxWYWx1ZSA9IFhFVXRpbHMuZ2V0KHJvdywgY29sdW1uLnByb3BlcnR5KTtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBlcWVxZXEgKi9cbiAgICByZXR1cm4gY2VsbFZhbHVlID09PSBkYXRhO1xufVxuZnVuY3Rpb24gcmVuZGVyT3B0aW9ucyhvcHRpb25zLCBvcHRpb25Qcm9wcykge1xuICAgIGNvbnN0IGxhYmVsUHJvcCA9IG9wdGlvblByb3BzLmxhYmVsIHx8ICdsYWJlbCc7XG4gICAgY29uc3QgdmFsdWVQcm9wID0gb3B0aW9uUHJvcHMudmFsdWUgfHwgJ3ZhbHVlJztcbiAgICByZXR1cm4gWEVVdGlscy5tYXAob3B0aW9ucywgKGl0ZW0sIG9JbmRleCkgPT4ge1xuICAgICAgICByZXR1cm4gaChyZXNvbHZlQ29tcG9uZW50KCdlbC1vcHRpb24nKSwge1xuICAgICAgICAgICAga2V5OiBvSW5kZXgsXG4gICAgICAgICAgICB2YWx1ZTogaXRlbVt2YWx1ZVByb3BdLFxuICAgICAgICAgICAgbGFiZWw6IGl0ZW1bbGFiZWxQcm9wXSxcbiAgICAgICAgICAgIGRpc2FibGVkOiBpdGVtLmRpc2FibGVkXG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gY2VsbFRleHQoY2VsbFZhbHVlKSB7XG4gICAgcmV0dXJuIFtmb3JtYXRUZXh0KGNlbGxWYWx1ZSldO1xufVxuZnVuY3Rpb24gY3JlYXRlRm9ybUl0ZW1SZW5kZXIoZGVmYXVsdFByb3BzKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyZW5kZXJPcHRzLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgeyBkYXRhLCBwcm9wZXJ0eSB9ID0gcGFyYW1zO1xuICAgICAgICBjb25zdCB7IG5hbWUgfSA9IHJlbmRlck9wdHM7XG4gICAgICAgIGNvbnN0IHsgYXR0cnMgfSA9IHJlbmRlck9wdHM7XG4gICAgICAgIGNvbnN0IGl0ZW1WYWx1ZSA9IFhFVXRpbHMuZ2V0KGRhdGEsIHByb3BlcnR5KTtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIGgocmVzb2x2ZUNvbXBvbmVudChuYW1lKSwge1xuICAgICAgICAgICAgICAgIC4uLmF0dHJzLFxuICAgICAgICAgICAgICAgIC4uLmdldEl0ZW1Qcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIGl0ZW1WYWx1ZSwgZGVmYXVsdFByb3BzKSxcbiAgICAgICAgICAgICAgICAuLi5nZXRJdGVtT25zKHJlbmRlck9wdHMsIHBhcmFtcylcbiAgICAgICAgICAgIH0pXG4gICAgICAgIF07XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRCdXR0b25JdGVtUmVuZGVyKHJlbmRlck9wdHMsIHBhcmFtcykge1xuICAgIGNvbnN0IHsgYXR0cnMgfSA9IHJlbmRlck9wdHM7XG4gICAgY29uc3QgcHJvcHMgPSBnZXRJdGVtUHJvcHMocmVuZGVyT3B0cywgcGFyYW1zLCBudWxsKTtcbiAgICByZXR1cm4gW1xuICAgICAgICBoKHJlc29sdmVDb21wb25lbnQoJ2VsLWJ1dHRvbicpLCB7XG4gICAgICAgICAgICAuLi5hdHRycyxcbiAgICAgICAgICAgIC4uLnByb3BzLFxuICAgICAgICAgICAgLi4uZ2V0T25zKHJlbmRlck9wdHMsIHBhcmFtcylcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4gY2VsbFRleHQocmVuZGVyT3B0cy5jb250ZW50IHx8IHByb3BzLmNvbnRlbnQpXG4gICAgICAgIH0pXG4gICAgXTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRCdXR0b25zSXRlbVJlbmRlcihyZW5kZXJPcHRzLCBwYXJhbXMpIHtcbiAgICBjb25zdCB7IGNoaWxkcmVuIH0gPSByZW5kZXJPcHRzO1xuICAgIGlmIChjaGlsZHJlbikge1xuICAgICAgICByZXR1cm4gY2hpbGRyZW4ubWFwKChjaGlsZFJlbmRlck9wdHMpID0+IGRlZmF1bHRCdXR0b25JdGVtUmVuZGVyKGNoaWxkUmVuZGVyT3B0cywgcGFyYW1zKVswXSk7XG4gICAgfVxuICAgIHJldHVybiBbXTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUV4cG9ydE1ldGhvZChnZXRFeHBvcnRDZWxsVmFsdWUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHBhcmFtcykge1xuICAgICAgICBjb25zdCB7IHJvdywgY29sdW1uLCBvcHRpb25zIH0gPSBwYXJhbXM7XG4gICAgICAgIHJldHVybiBvcHRpb25zICYmIG9wdGlvbnMub3JpZ2luYWwgPyBYRVV0aWxzLmdldChyb3csIGNvbHVtbi5wcm9wZXJ0eSkgOiBnZXRFeHBvcnRDZWxsVmFsdWUoY29sdW1uLmVkaXRSZW5kZXIgfHwgY29sdW1uLmNlbGxSZW5kZXIsIHBhcmFtcyk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUZvcm1JdGVtUmFkaW9BbmRDaGVja2JveFJlbmRlcigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHJlbmRlck9wdHMsIHBhcmFtcykge1xuICAgICAgICBjb25zdCB7IG5hbWUsIG9wdGlvbnMgPSBbXSwgb3B0aW9uUHJvcHMgPSB7fSwgYXR0cnMgfSA9IHJlbmRlck9wdHM7XG4gICAgICAgIGNvbnN0IHsgZGF0YSwgcHJvcGVydHkgfSA9IHBhcmFtcztcbiAgICAgICAgY29uc3QgbGFiZWxQcm9wID0gb3B0aW9uUHJvcHMubGFiZWwgfHwgJ2xhYmVsJztcbiAgICAgICAgY29uc3QgdmFsdWVQcm9wID0gb3B0aW9uUHJvcHMudmFsdWUgfHwgJ3ZhbHVlJztcbiAgICAgICAgY29uc3QgaXRlbVZhbHVlID0gWEVVdGlscy5nZXQoZGF0YSwgcHJvcGVydHkpO1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgaChyZXNvbHZlQ29tcG9uZW50KGAke25hbWV9R3JvdXBgKSwge1xuICAgICAgICAgICAgICAgIC4uLmF0dHJzLFxuICAgICAgICAgICAgICAgIC4uLmdldEl0ZW1Qcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIGl0ZW1WYWx1ZSksXG4gICAgICAgICAgICAgICAgLi4uZ2V0SXRlbU9ucyhyZW5kZXJPcHRzLCBwYXJhbXMpXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3B0aW9ucy5tYXAoKG9wdGlvbiwgb0luZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaChyZXNvbHZlQ29tcG9uZW50KG5hbWUpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBvSW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IG9wdGlvblt2YWx1ZVByb3BdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiBvcHRpb24uZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiBjZWxsVGV4dChvcHRpb25bbGFiZWxQcm9wXSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICBdO1xuICAgIH07XG59XG4vKipcbiAqIOajgOafpeinpuWPkea6kOaYr+WQpuWxnuS6juebruagh+iKgueCuVxuICovXG5mdW5jdGlvbiBnZXRFdmVudFRhcmdldE5vZGUoZXZudCwgY29udGFpbmVyLCBjbGFzc05hbWUpIHtcbiAgICBsZXQgdGFyZ2V0RWxlbTtcbiAgICBsZXQgdGFyZ2V0ID0gZXZudC50YXJnZXQ7XG4gICAgd2hpbGUgKHRhcmdldCAmJiB0YXJnZXQubm9kZVR5cGUgJiYgdGFyZ2V0ICE9PSBkb2N1bWVudCkge1xuICAgICAgICBpZiAoY2xhc3NOYW1lICYmIHRhcmdldC5jbGFzc05hbWUgJiYgdGFyZ2V0LmNsYXNzTmFtZS5zcGxpdCAmJiB0YXJnZXQuY2xhc3NOYW1lLnNwbGl0KCcgJykuaW5kZXhPZihjbGFzc05hbWUpID4gLTEpIHtcbiAgICAgICAgICAgIHRhcmdldEVsZW0gPSB0YXJnZXQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGFyZ2V0ID09PSBjb250YWluZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB7IGZsYWc6IGNsYXNzTmFtZSA/ICEhdGFyZ2V0RWxlbSA6IHRydWUsIGNvbnRhaW5lciwgdGFyZ2V0RWxlbTogdGFyZ2V0RWxlbSB9O1xuICAgICAgICB9XG4gICAgICAgIHRhcmdldCA9IHRhcmdldC5wYXJlbnROb2RlO1xuICAgIH1cbiAgICByZXR1cm4geyBmbGFnOiBmYWxzZSB9O1xufVxuLyoqXG4gKiDkuovku7blhbzlrrnmgKflpITnkIZcbiAqL1xuZnVuY3Rpb24gaGFuZGxlQ2xlYXJFdmVudChwYXJhbXMpIHtcbiAgICBjb25zdCB7ICRldmVudCB9ID0gcGFyYW1zO1xuICAgIGNvbnN0IGJvZHlFbGVtID0gZG9jdW1lbnQuYm9keTtcbiAgICBpZiAoXG4gICAgLy8g6L+c56iL5pCc57SiXG4gICAgZ2V0RXZlbnRUYXJnZXROb2RlKCRldmVudCwgYm9keUVsZW0sICdlbC1hdXRvY29tcGxldGUtc3VnZ2VzdGlvbicpLmZsYWcgfHxcbiAgICAgICAgLy8g5LiL5ouJ5qGGXG4gICAgICAgIGdldEV2ZW50VGFyZ2V0Tm9kZSgkZXZlbnQsIGJvZHlFbGVtLCAnZWwtc2VsZWN0LWRyb3Bkb3duJykuZmxhZyB8fFxuICAgICAgICAvLyDnuqfogZRcbiAgICAgICAgZ2V0RXZlbnRUYXJnZXROb2RlKCRldmVudCwgYm9keUVsZW0sICdlbC1jYXNjYWRlcl9fZHJvcGRvd24nKS5mbGFnIHx8XG4gICAgICAgIGdldEV2ZW50VGFyZ2V0Tm9kZSgkZXZlbnQsIGJvZHlFbGVtLCAnZWwtY2FzY2FkZXItbWVudXMnKS5mbGFnIHx8XG4gICAgICAgIC8vIOaXpeacn1xuICAgICAgICBnZXRFdmVudFRhcmdldE5vZGUoJGV2ZW50LCBib2R5RWxlbSwgJ2VsLXRpbWUtcGFuZWwnKS5mbGFnIHx8XG4gICAgICAgIGdldEV2ZW50VGFyZ2V0Tm9kZSgkZXZlbnQsIGJvZHlFbGVtLCAnZWwtcGlja2VyLXBhbmVsJykuZmxhZyB8fFxuICAgICAgICAvLyDpopzoibJcbiAgICAgICAgZ2V0RXZlbnRUYXJnZXROb2RlKCRldmVudCwgYm9keUVsZW0sICdlbC1jb2xvci1kcm9wZG93bicpLmZsYWcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbi8qKlxuICog5Z+65LqOIHZ4ZS10YWJsZSDooajmoLznmoTpgILphY3mj5Lku7bvvIznlKjkuo7lhbzlrrkgZWxlbWVudC11aSDnu4Tku7blupNcbiAqL1xuZXhwb3J0IGNvbnN0IFZYRVRhYmxlUGx1Z2luRWxlbWVudCA9IHtcbiAgICBpbnN0YWxsKHZ4ZXRhYmxlY29yZSkge1xuICAgICAgICBjb25zdCB7IGludGVyY2VwdG9yLCByZW5kZXJlciB9ID0gdnhldGFibGVjb3JlO1xuICAgICAgICB2eGV0YWJsZSA9IHZ4ZXRhYmxlY29yZTtcbiAgICAgICAgcmVuZGVyZXIubWl4aW4oe1xuICAgICAgICAgICAgRWxBdXRvY29tcGxldGU6IHtcbiAgICAgICAgICAgICAgICBhdXRvZm9jdXM6ICdpbnB1dC5lbC1pbnB1dF9faW5uZXInLFxuICAgICAgICAgICAgICAgIHJlbmRlckRlZmF1bHQ6IGNyZWF0ZUVkaXRSZW5kZXIoKSxcbiAgICAgICAgICAgICAgICByZW5kZXJFZGl0OiBjcmVhdGVFZGl0UmVuZGVyKCksXG4gICAgICAgICAgICAgICAgcmVuZGVyRmlsdGVyOiBjcmVhdGVGaWx0ZXJSZW5kZXIoKSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0RmlsdGVyTWV0aG9kOiBkZWZhdWx0RXhhY3RGaWx0ZXJNZXRob2QsXG4gICAgICAgICAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBFbElucHV0OiB7XG4gICAgICAgICAgICAgICAgYXV0b2ZvY3VzOiAnaW5wdXQuZWwtaW5wdXRfX2lubmVyJyxcbiAgICAgICAgICAgICAgICByZW5kZXJEZWZhdWx0OiBjcmVhdGVFZGl0UmVuZGVyKCksXG4gICAgICAgICAgICAgICAgcmVuZGVyRWRpdDogY3JlYXRlRWRpdFJlbmRlcigpLFxuICAgICAgICAgICAgICAgIHJlbmRlckZpbHRlcjogY3JlYXRlRmlsdGVyUmVuZGVyKCksXG4gICAgICAgICAgICAgICAgZGVmYXVsdEZpbHRlck1ldGhvZDogZGVmYXVsdEZ1enp5RmlsdGVyTWV0aG9kLFxuICAgICAgICAgICAgICAgIHJlbmRlckl0ZW1Db250ZW50OiBjcmVhdGVGb3JtSXRlbVJlbmRlcigpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgRWxJbnB1dE51bWJlcjoge1xuICAgICAgICAgICAgICAgIGF1dG9mb2N1czogJ2lucHV0LmVsLWlucHV0X19pbm5lcicsXG4gICAgICAgICAgICAgICAgcmVuZGVyRGVmYXVsdDogY3JlYXRlRWRpdFJlbmRlcigpLFxuICAgICAgICAgICAgICAgIHJlbmRlckVkaXQ6IGNyZWF0ZUVkaXRSZW5kZXIoKSxcbiAgICAgICAgICAgICAgICByZW5kZXJGaWx0ZXI6IGNyZWF0ZUZpbHRlclJlbmRlcigpLFxuICAgICAgICAgICAgICAgIGRlZmF1bHRGaWx0ZXJNZXRob2Q6IGRlZmF1bHRGdXp6eUZpbHRlck1ldGhvZCxcbiAgICAgICAgICAgICAgICByZW5kZXJJdGVtQ29udGVudDogY3JlYXRlRm9ybUl0ZW1SZW5kZXIoKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIEVsU2VsZWN0OiB7XG4gICAgICAgICAgICAgICAgcmVuZGVyRWRpdChyZW5kZXJPcHRzLCBwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBvcHRpb25zID0gW10sIG9wdGlvbkdyb3Vwcywgb3B0aW9uUHJvcHMgPSB7fSwgb3B0aW9uR3JvdXBQcm9wcyA9IHt9IH0gPSByZW5kZXJPcHRzO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHJvdywgY29sdW1uIH0gPSBwYXJhbXM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgYXR0cnMgfSA9IHJlbmRlck9wdHM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxWYWx1ZSA9IFhFVXRpbHMuZ2V0KHJvdywgY29sdW1uLnByb3BlcnR5KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvcHMgPSBnZXRDZWxsRWRpdEZpbHRlclByb3BzKHJlbmRlck9wdHMsIHBhcmFtcywgY2VsbFZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb25zID0gZ2V0RWRpdE9ucyhyZW5kZXJPcHRzLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9uR3JvdXBzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBncm91cE9wdGlvbnMgPSBvcHRpb25Hcm91cFByb3BzLm9wdGlvbnMgfHwgJ29wdGlvbnMnO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3JvdXBMYWJlbCA9IG9wdGlvbkdyb3VwUHJvcHMubGFiZWwgfHwgJ2xhYmVsJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaChyZXNvbHZlQ29tcG9uZW50KCdlbC1zZWxlY3QnKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5hdHRycyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucHJvcHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLm9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFhFVXRpbHMubWFwKG9wdGlvbkdyb3VwcywgKGdyb3VwLCBnSW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaChyZXNvbHZlQ29tcG9uZW50KCdlbC1vcHRpb24tZ3JvdXAnKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6IGdJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGdyb3VwW2dyb3VwTGFiZWxdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiByZW5kZXJPcHRpb25zKGdyb3VwW2dyb3VwT3B0aW9uc10sIG9wdGlvblByb3BzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICAgICAgaChyZXNvbHZlQ29tcG9uZW50KCdlbC1zZWxlY3QnKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnByb3BzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmF0dHJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLm9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IHJlbmRlck9wdGlvbnMob3B0aW9ucywgb3B0aW9uUHJvcHMpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVuZGVyQ2VsbChyZW5kZXJPcHRzLCBwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldENlbGxMYWJlbFZOcyhyZW5kZXJPcHRzLCBwYXJhbXMsIGdldFNlbGVjdENlbGxWYWx1ZShyZW5kZXJPcHRzLCBwYXJhbXMpKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlbmRlckZpbHRlcihyZW5kZXJPcHRzLCBwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBvcHRpb25zID0gW10sIG9wdGlvbkdyb3Vwcywgb3B0aW9uUHJvcHMgPSB7fSwgb3B0aW9uR3JvdXBQcm9wcyA9IHt9IH0gPSByZW5kZXJPcHRzO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBncm91cE9wdGlvbnMgPSBvcHRpb25Hcm91cFByb3BzLm9wdGlvbnMgfHwgJ29wdGlvbnMnO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBncm91cExhYmVsID0gb3B0aW9uR3JvdXBQcm9wcy5sYWJlbCB8fCAnbGFiZWwnO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGNvbHVtbiB9ID0gcGFyYW1zO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGF0dHJzIH0gPSByZW5kZXJPcHRzO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICAgICAgaCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiAndnhlLXRhYmxlLS1maWx0ZXItZWxlbWVudC13cmFwcGVyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgb3B0aW9uR3JvdXBzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBjb2x1bW4uZmlsdGVycy5tYXAoKG9wdGlvbiwgb0luZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvblZhbHVlID0gb3B0aW9uLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3BzID0gZ2V0Q2VsbEVkaXRGaWx0ZXJQcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIG9wdGlvblZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGgocmVzb2x2ZUNvbXBvbmVudCgnZWwtc2VsZWN0JyksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogb0luZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uYXR0cnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5wcm9wcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmdldEZpbHRlck9ucyhyZW5kZXJPcHRzLCBwYXJhbXMsIG9wdGlvbiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWkhOeQhiBjaGFuZ2Ug5LqL5Lu255u45YWz6YC76L6RXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlQ29uZmlybUZpbHRlcihwYXJhbXMsIHByb3BzLm11bHRpcGxlID8gKG9wdGlvbi5kYXRhICYmIG9wdGlvbi5kYXRhLmxlbmd0aCA+IDApIDogIVhFVXRpbHMuZXFOdWxsKG9wdGlvbi5kYXRhKSwgb3B0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWEVVdGlscy5tYXAob3B0aW9uR3JvdXBzLCAoZ3JvdXAsIGdJbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaChyZXNvbHZlQ29tcG9uZW50KCdlbC1vcHRpb24tZ3JvdXAnKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBnSW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogZ3JvdXBbZ3JvdXBMYWJlbF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4gcmVuZGVyT3B0aW9ucyhncm91cFtncm91cE9wdGlvbnNdLCBvcHRpb25Qcm9wcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBjb2x1bW4uZmlsdGVycy5tYXAoKG9wdGlvbiwgb0luZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvblZhbHVlID0gb3B0aW9uLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3BzID0gZ2V0Q2VsbEVkaXRGaWx0ZXJQcm9wcyhyZW5kZXJPcHRzLCBwYXJhbXMsIG9wdGlvblZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGgocmVzb2x2ZUNvbXBvbmVudCgnZWwtc2VsZWN0JyksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogb0luZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uYXR0cnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5wcm9wcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmdldEZpbHRlck9ucyhyZW5kZXJPcHRzLCBwYXJhbXMsIG9wdGlvbiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWkhOeQhiBjaGFuZ2Ug5LqL5Lu255u45YWz6YC76L6RXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlQ29uZmlybUZpbHRlcihwYXJhbXMsIHByb3BzLm11bHRpcGxlID8gKG9wdGlvbi5kYXRhICYmIG9wdGlvbi5kYXRhLmxlbmd0aCA+IDApIDogIVhFVXRpbHMuZXFOdWxsKG9wdGlvbi5kYXRhKSwgb3B0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IHJlbmRlck9wdGlvbnMob3B0aW9ucywgb3B0aW9uUHJvcHMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZGVmYXVsdEZpbHRlck1ldGhvZChwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBvcHRpb24sIHJvdywgY29sdW1uIH0gPSBwYXJhbXM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gb3B0aW9uO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHByb3BlcnR5LCBmaWx0ZXJSZW5kZXI6IHJlbmRlck9wdHMgfSA9IGNvbHVtbjtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBwcm9wcyA9IHt9IH0gPSByZW5kZXJPcHRzO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjZWxsVmFsdWUgPSBYRVV0aWxzLmdldChyb3csIHByb3BlcnR5KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BzLm11bHRpcGxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoWEVVdGlscy5pc0FycmF5KGNlbGxWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWEVVdGlscy5pbmNsdWRlQXJyYXlzKGNlbGxWYWx1ZSwgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5pbmRleE9mKGNlbGxWYWx1ZSkgPiAtMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBlcWVxZXEgKi9cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNlbGxWYWx1ZSA9PSBkYXRhO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQocmVuZGVyT3B0cywgcGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgb3B0aW9ucyA9IFtdLCBvcHRpb25Hcm91cHMsIG9wdGlvblByb3BzID0ge30sIG9wdGlvbkdyb3VwUHJvcHMgPSB7fSB9ID0gcmVuZGVyT3B0cztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBkYXRhLCBwcm9wZXJ0eSB9ID0gcGFyYW1zO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGF0dHJzIH0gPSByZW5kZXJPcHRzO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpdGVtVmFsdWUgPSBYRVV0aWxzLmdldChkYXRhLCBwcm9wZXJ0eSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3BzID0gZ2V0SXRlbVByb3BzKHJlbmRlck9wdHMsIHBhcmFtcywgaXRlbVZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb25zID0gZ2V0SXRlbU9ucyhyZW5kZXJPcHRzLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9uR3JvdXBzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBncm91cE9wdGlvbnMgPSBvcHRpb25Hcm91cFByb3BzLm9wdGlvbnMgfHwgJ29wdGlvbnMnO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3JvdXBMYWJlbCA9IG9wdGlvbkdyb3VwUHJvcHMubGFiZWwgfHwgJ2xhYmVsJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaChyZXNvbHZlQ29tcG9uZW50KCdlbC1zZWxlY3QnKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5hdHRycyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucHJvcHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLm9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFhFVXRpbHMubWFwKG9wdGlvbkdyb3VwcywgKGdyb3VwLCBnSW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaChyZXNvbHZlQ29tcG9uZW50KCdlbC1vcHRpb24tZ3JvdXAnKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogZ3JvdXBbZ3JvdXBMYWJlbF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogZ0luZGV4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiByZW5kZXJPcHRpb25zKGdyb3VwW2dyb3VwT3B0aW9uc10sIG9wdGlvblByb3BzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICAgICAgaChyZXNvbHZlQ29tcG9uZW50KCdlbC1zZWxlY3QnKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmF0dHJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnByb3BzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLm9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IHJlbmRlck9wdGlvbnMob3B0aW9ucywgb3B0aW9uUHJvcHMpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZXhwb3J0TWV0aG9kOiBjcmVhdGVFeHBvcnRNZXRob2QoZ2V0U2VsZWN0Q2VsbFZhbHVlKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIEVsQ2FzY2FkZXI6IHtcbiAgICAgICAgICAgICAgICByZW5kZXJFZGl0OiBjcmVhdGVFZGl0UmVuZGVyKCksXG4gICAgICAgICAgICAgICAgcmVuZGVyQ2VsbChyZW5kZXJPcHRzLCBwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldENlbGxMYWJlbFZOcyhyZW5kZXJPcHRzLCBwYXJhbXMsIGdldENhc2NhZGVyQ2VsbFZhbHVlKHJlbmRlck9wdHMsIHBhcmFtcykpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKCksXG4gICAgICAgICAgICAgICAgZXhwb3J0TWV0aG9kOiBjcmVhdGVFeHBvcnRNZXRob2QoZ2V0Q2FzY2FkZXJDZWxsVmFsdWUpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgRWxEYXRlUGlja2VyOiB7XG4gICAgICAgICAgICAgICAgcmVuZGVyRWRpdDogY3JlYXRlRWRpdFJlbmRlcigpLFxuICAgICAgICAgICAgICAgIHJlbmRlckNlbGwocmVuZGVyT3B0cywgcGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRDZWxsTGFiZWxWTnMocmVuZGVyT3B0cywgcGFyYW1zLCBnZXREYXRlUGlja2VyQ2VsbFZhbHVlKHJlbmRlck9wdHMsIHBhcmFtcykpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVuZGVyRmlsdGVyKHJlbmRlck9wdHMsIHBhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGNvbHVtbiB9ID0gcGFyYW1zO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IG5hbWUsIGF0dHJzIH0gPSByZW5kZXJPcHRzO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICAgICAgaCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiAndnhlLXRhYmxlLS1maWx0ZXItZWxlbWVudC13cmFwcGVyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgY29sdW1uLmZpbHRlcnMubWFwKChvcHRpb24sIG9JbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvblZhbHVlID0gb3B0aW9uLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGgocmVzb2x2ZUNvbXBvbmVudChuYW1lKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6IG9JbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uYXR0cnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmdldENlbGxFZGl0RmlsdGVyUHJvcHMocmVuZGVyT3B0cywgcGFyYW1zLCBvcHRpb25WYWx1ZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmdldEZpbHRlck9ucyhyZW5kZXJPcHRzLCBwYXJhbXMsIG9wdGlvbiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5aSE55CGIGNoYW5nZSDkuovku7bnm7jlhbPpgLvovpFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUNvbmZpcm1GaWx0ZXIocGFyYW1zLCAhIW9wdGlvbi5kYXRhLCBvcHRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0RmlsdGVyTWV0aG9kKHBhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IG9wdGlvbiwgcm93LCBjb2x1bW4gfSA9IHBhcmFtcztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBkYXRhIH0gPSBvcHRpb247XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZmlsdGVyUmVuZGVyOiByZW5kZXJPcHRzIH0gPSBjb2x1bW47XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgcHJvcHMgPSB7fSB9ID0gcmVuZGVyT3B0cztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbFZhbHVlID0gWEVVdGlscy5nZXQocm93LCBjb2x1bW4ucHJvcGVydHkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wcy50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGF0ZXJhbmdlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVxdWFsRGF0ZXJhbmdlKGNlbGxWYWx1ZSwgZGF0YSwgcHJvcHMsICdZWVlZLU1NLUREJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGF0ZXRpbWVyYW5nZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlcXVhbERhdGVyYW5nZShjZWxsVmFsdWUsIGRhdGEsIHByb3BzLCAnWVlZWS1NTS1ERCBISDpzczptbScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ21vbnRocmFuZ2UnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXF1YWxEYXRlcmFuZ2UoY2VsbFZhbHVlLCBkYXRhLCBwcm9wcywgJ1lZWVktTU0nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2VsbFZhbHVlID09PSBkYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlbmRlckl0ZW1Db250ZW50OiBjcmVhdGVGb3JtSXRlbVJlbmRlcigpLFxuICAgICAgICAgICAgICAgIGV4cG9ydE1ldGhvZDogY3JlYXRlRXhwb3J0TWV0aG9kKGdldERhdGVQaWNrZXJDZWxsVmFsdWUpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgRWxUaW1lUGlja2VyOiB7XG4gICAgICAgICAgICAgICAgcmVuZGVyRWRpdDogY3JlYXRlRWRpdFJlbmRlcigpLFxuICAgICAgICAgICAgICAgIHJlbmRlckNlbGwocmVuZGVyT3B0cywgcGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRDZWxsTGFiZWxWTnMocmVuZGVyT3B0cywgcGFyYW1zLCBnZXRUaW1lUGlja2VyQ2VsbFZhbHVlKHJlbmRlck9wdHMsIHBhcmFtcykpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKCksXG4gICAgICAgICAgICAgICAgZXhwb3J0TWV0aG9kOiBjcmVhdGVFeHBvcnRNZXRob2QoZ2V0VGltZVBpY2tlckNlbGxWYWx1ZSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBFbFRpbWVTZWxlY3Q6IHtcbiAgICAgICAgICAgICAgICByZW5kZXJFZGl0OiBjcmVhdGVFZGl0UmVuZGVyKCksXG4gICAgICAgICAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBFbFJhdGU6IHtcbiAgICAgICAgICAgICAgICByZW5kZXJEZWZhdWx0OiBjcmVhdGVFZGl0UmVuZGVyKCksXG4gICAgICAgICAgICAgICAgcmVuZGVyRWRpdDogY3JlYXRlRWRpdFJlbmRlcigpLFxuICAgICAgICAgICAgICAgIHJlbmRlckZpbHRlcjogY3JlYXRlRmlsdGVyUmVuZGVyKCksXG4gICAgICAgICAgICAgICAgZGVmYXVsdEZpbHRlck1ldGhvZDogZGVmYXVsdEV4YWN0RmlsdGVyTWV0aG9kLFxuICAgICAgICAgICAgICAgIHJlbmRlckl0ZW1Db250ZW50OiBjcmVhdGVGb3JtSXRlbVJlbmRlcigpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgRWxTd2l0Y2g6IHtcbiAgICAgICAgICAgICAgICByZW5kZXJEZWZhdWx0OiBjcmVhdGVFZGl0UmVuZGVyKCksXG4gICAgICAgICAgICAgICAgcmVuZGVyRWRpdDogY3JlYXRlRWRpdFJlbmRlcigpLFxuICAgICAgICAgICAgICAgIHJlbmRlckZpbHRlcihyZW5kZXJPcHRzLCBwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBjb2x1bW4gfSA9IHBhcmFtcztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBuYW1lLCBhdHRycyB9ID0gcmVuZGVyT3B0cztcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIGgoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzczogJ3Z4ZS10YWJsZS0tZmlsdGVyLWVsZW1lbnQtd3JhcHBlcidcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGNvbHVtbi5maWx0ZXJzLm1hcCgob3B0aW9uLCBvSW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvcHRpb25WYWx1ZSA9IG9wdGlvbi5kYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBoKHJlc29sdmVDb21wb25lbnQobmFtZSksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBvSW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmF0dHJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5nZXRDZWxsRWRpdEZpbHRlclByb3BzKHJlbmRlck9wdHMsIHBhcmFtcywgb3B0aW9uVmFsdWUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5nZXRGaWx0ZXJPbnMocmVuZGVyT3B0cywgcGFyYW1zLCBvcHRpb24sICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWkhOeQhiBjaGFuZ2Ug5LqL5Lu255u45YWz6YC76L6RXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVDb25maXJtRmlsdGVyKHBhcmFtcywgWEVVdGlscy5pc0Jvb2xlYW4ob3B0aW9uLmRhdGEpLCBvcHRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0RmlsdGVyTWV0aG9kOiBkZWZhdWx0RXhhY3RGaWx0ZXJNZXRob2QsXG4gICAgICAgICAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBFbFNsaWRlcjoge1xuICAgICAgICAgICAgICAgIHJlbmRlckRlZmF1bHQ6IGNyZWF0ZUVkaXRSZW5kZXIoKSxcbiAgICAgICAgICAgICAgICByZW5kZXJFZGl0OiBjcmVhdGVFZGl0UmVuZGVyKCksXG4gICAgICAgICAgICAgICAgcmVuZGVyRmlsdGVyOiBjcmVhdGVGaWx0ZXJSZW5kZXIoKSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0RmlsdGVyTWV0aG9kOiBkZWZhdWx0RXhhY3RGaWx0ZXJNZXRob2QsXG4gICAgICAgICAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGNyZWF0ZUZvcm1JdGVtUmVuZGVyKClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBFbFJhZGlvOiB7XG4gICAgICAgICAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGNyZWF0ZUZvcm1JdGVtUmFkaW9BbmRDaGVja2JveFJlbmRlcigpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgRWxDaGVja2JveDoge1xuICAgICAgICAgICAgICAgIHJlbmRlckl0ZW1Db250ZW50OiBjcmVhdGVGb3JtSXRlbVJhZGlvQW5kQ2hlY2tib3hSZW5kZXIoKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIEVsQnV0dG9uOiB7XG4gICAgICAgICAgICAgICAgcmVuZGVyRGVmYXVsdDogZGVmYXVsdEJ1dHRvbkVkaXRSZW5kZXIsXG4gICAgICAgICAgICAgICAgcmVuZGVySXRlbUNvbnRlbnQ6IGRlZmF1bHRCdXR0b25JdGVtUmVuZGVyXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgRWxCdXR0b25zOiB7XG4gICAgICAgICAgICAgICAgcmVuZGVyRGVmYXVsdDogZGVmYXVsdEJ1dHRvbnNFZGl0UmVuZGVyLFxuICAgICAgICAgICAgICAgIHJlbmRlckl0ZW1Db250ZW50OiBkZWZhdWx0QnV0dG9uc0l0ZW1SZW5kZXJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGludGVyY2VwdG9yLmFkZCgnZXZlbnQuY2xlYXJGaWx0ZXInLCBoYW5kbGVDbGVhckV2ZW50KTtcbiAgICAgICAgaW50ZXJjZXB0b3IuYWRkKCdldmVudC5jbGVhckFjdGl2ZWQnLCBoYW5kbGVDbGVhckV2ZW50KTtcbiAgICAgICAgaW50ZXJjZXB0b3IuYWRkKCdldmVudC5jbGVhckFyZWFzJywgaGFuZGxlQ2xlYXJFdmVudCk7XG4gICAgfVxufTtcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuVlhFVGFibGUgJiYgd2luZG93LlZYRVRhYmxlLnVzZSkge1xuICAgIHdpbmRvdy5WWEVUYWJsZS51c2UoVlhFVGFibGVQbHVnaW5FbGVtZW50KTtcbn1cbmV4cG9ydCBkZWZhdWx0IFZYRVRhYmxlUGx1Z2luRWxlbWVudDtcbiJdfQ==
